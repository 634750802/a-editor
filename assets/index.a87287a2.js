var Ve=Object.defineProperty,Ue=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var ae=(t,e,n)=>e in t?Ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||(e={}))ge.call(e,n)&&ae(t,n,e[n]);if(Z)for(var n of Z(e))he.call(e,n)&&ae(t,n,e[n]);return t},C=(t,e)=>Ue(t,We(e));var me=(t,e)=>{var n={};for(var s in t)ge.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Z)for(var s of Z(t))e.indexOf(s)<0&&he.call(t,s)&&(n[s]=t[s]);return n};var L=(t,e,n)=>(ae(t,typeof e!="symbol"?e+"":e,n),n);import{r as v,u as ye,a as be,p as Ke,b as Qe,c as Ge,d as Ye,E as b,e as E,f as ie,j as l,g as K,T as ee,l as A,h as ve,i as Te,F as R,k as le,m as ce,n as ue,o as te,R as $,P as y,N as d,q as S,s as Je,t as g,v as xe,w as z,x as B,y as Xe,z as we,A as Ze,B as et,_ as Q,C as ke,D as pe,G as _e,H as Me,I as Ee,J as Ne,K as Pe,L as tt,M as nt,O as st,Q as rt,S as ot,U as at,V as it,W as Ce,X as lt,Y as ct}from"./vendor.39631cd5.js";const ut=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};ut();class pt{constructor(e,n){L(this,"getMarkdownProcessor",ye().use(be).use(Ke).use(Qe,{bullet:"-",listItemIndent:"one",fence:"`",rule:"-"}));L(this,"setMarkdownProcessor",ye().use(be).use(Ge).use(Ye));this.editor=e,this.setValue=n,this.getMarkdownProcessor.freeze(),this.setMarkdownProcessor.freeze()}get markdown(){return this.getMarkdownProcessor.stringify(this.getMarkdownProcessor.runSync({type:"root",children:this.editor.children}))}set markdown(e){this.setValue(this.setMarkdownProcessor.processSync(e).result),setTimeout(()=>{b.normalize(this.editor,{force:!0})},0)}}function ft(t){const[e,n]=v.exports.useState([{type:"paragraph",children:[{text:""}]}]);return[v.exports.useMemo(()=>new pt(t,n),[t]),e,n]}var T;(function(t){t[t.flow=16]="flow",t[t.list=32]="list",t[t.phrasing=48]="phrasing",t[t.staticPhrasing=49]="staticPhrasing",t[t.value=64]="value"})(T||(T={}));function V(t,e){return t===e||t<e&&(t^e)<16}function O(t){return C(_({},t),{register(e){e.define(t)}})}function I(t,e){return E.isElement(t)?e instanceof Array?e.indexOf(t.type)>=0:t.type===e:!1}function Se({icon:t,active:e,disabled:n,action:s,tips:o}){const r=ie(),a=v.exports.useCallback(p=>{s&&p.button===0&&(p.preventDefault(),p.stopPropagation(),n||b.withoutNormalizing(r,()=>{s(p)}))},[s]),c=l("span",{className:K("toolbar-item",{active:e,disabled:n}),onMouseDown:a,children:t});return o?l(ee,{content:l("span",{className:"toolbar-item-tips",children:o}),children:c}):c}A.add(ve,Te);function dt({isEmpty:t,element:e,items:n,setActive:s}){return l(ee,{appendTo:"parent",content:gt(n),hideOnClick:!1,interactive:!0,onHide:()=>s(!1),onShow:()=>s(!0),children:l("span",{className:"line-operations",contentEditable:!1,children:l(R,{icon:t?Te:ve})})})}const gt=t=>l("div",{className:"block-toolbar",children:t.map((e,n)=>l("div",{className:"toolbar-group",children:e.map(s=>l(Se,{action:s.action,active:s.active,disabled:s.disabled,icon:s.icon,tips:s.tips},s.key))},n))});A.add(le,ce,ue,te);function ht(t,e){const n=e==null?void 0:e.current;return t.factory.blockConfigs.map(s=>s.toolbarItems.map(({key:o,isDisabled:r,isActive:a,action:c,icon:p,tips:h})=>({key:o,disabled:n?r(t,n):!1,active:n?a(t,n):!1,icon:p,action:n?i=>c(t,n,i):()=>{},tips:h}))).filter(s=>s.length>0)}function Ie(){const[t,e]=v.exports.useState(0);return()=>{e(n=>n+1)}}function ne({element:t,children:e}){const[n,s]=v.exports.useState(null),o=v.exports.useRef(),r=ie(),a=ht(r,o.current),c=Ie();v.exports.useLayoutEffect(()=>{var u,f;if(n){const m=document.createRange();m.selectNode(n.childNodes.item(0));const w=$.toSlateRange(r,m,{exactMatch:!1});let x=y.common(w.anchor.path,w.focus.path);for(;x.length!==0;){if(b.isBlock(r,d.get(r,x))){o.current=b.pathRef(r,x);break}x=y.parent(x)}}else o.current&&((f=(u=o.current).unref)==null||f.call(u)),o.current=void 0},[n]);const[p,h]=v.exports.useState(!1),i=(()=>{const u=t.children[0];return t.children.length===1&&S.isText(u)&&u.text===""})();return l(Je,{appendTo:document.body,arrow:!1,hideOnClick:!1,interactive:!0,interactiveBorder:12,offset:[0,8],onTrigger:c,placement:"left",popperOptions:{modifiers:[{name:"flip",options:{allowedAutoPlacements:["left"]}}]},ref:s,render:()=>l(dt,{element:t,isEmpty:i,items:a,setActive:h}),children:typeof e=="function"?e({active:p,pathRef:o.current}):e})}const mt=["markdown","javascript","typescript","jsx","tsx","sql","bash","go","rust","json","log"],G=Symbol("prism_token"),yt=[{key:"code-block",icon:l(R,{icon:te}),isActive:(t,e)=>I(d.get(t,e),"code"),isDisabled:(t,e)=>{const n=d.get(t,e);if(I(n,"code"))return!1;const s=d.parent(t,e),o=t.getContentModelType(s);return o?!V(De.contentType,o):!0},tips:l(z,{children:"\u4EE3\u7801\u5757"}),action:(t,e,n)=>{const s=d.get(t,e);if(I(s,"code"))g.unsetNodes(t,Object.keys(d.extractProps(s)),{at:e}),g.setNodes(t,{type:"paragraph"},{at:e});else{const o=d.string(s);g.removeNodes(t,{at:e}),g.insertNodes(t,{type:"code",lang:"markdown",meta:void 0,children:[{text:o}]},{at:e,select:!0})}}}],De=O({type:"code",isInline:!1,isLeaf:!1,isVoid:!1,isDisallowTextDecorators:!0,isHiddenHoverToolbar:!0,wrappingParagraph:!1,contentType:T.flow,contentModelType:T.flow,render:(t,{element:e,children:n,attributes:s})=>l(ne,{element:e,children:({active:o,pathRef:r})=>l(ee,{appendTo:document.body,content:l("select",{className:"lang-selector",contentEditable:!1,onChange:a=>{(r==null?void 0:r.current)&&g.setNodes(t,{lang:a.currentTarget.value},{at:r.current})},tabIndex:void 0,value:e.lang||void 0,children:mt.map(a=>l("option",{children:a},a))}),interactive:!0,placement:"top-start",children:l("pre",C(_({},s),{className:K({active:o},e.lang?`language-${e.lang}`:void 0),children:l("code",{className:"prism-code",children:n})}))})}),toggle:{prefix:/^`{3}(?: (\w+))?$/,toggle:(t,e,n)=>{if(n){const s=d.string(d.get(t,e));g.removeNodes(t,{at:e}),g.insertNodes(t,C(_({type:"code"},n),{children:[{text:s}]}),{at:e}),g.select(t,e.concat(0))}else g.unsetNodes(t,["meta","lang"],{at:e}),g.setNodes(t,{type:"paragraph"},{at:e})},onTrigger:(t,e,n)=>{if(n.length>1)return;const s=/^`{3}(?: (\w+))?$/.exec(t);return s?{lang:s[1]||"markdown",meta:void 0}:{lang:"markdown",meta:void 0}}},events:{},toolbarItems:yt,decorate:(t,[e,n],s)=>{if(S.isText(e)&&s.lang){const o=xe.languages[s.lang];if(!o)return[];const r=[],a=xe.tokenize(e.text,o);let c=0;for(const p of a){const h=Le(p),i=c+h;typeof p!="string"&&r.push({[G]:p.type,anchor:{path:n,offset:c},focus:{path:n,offset:i}}),c=i}return r}return[]}}),Le=t=>typeof t=="string"?t.length:typeof t.content=="string"?t.content.length:t.content.reduce((e,n)=>e+Le(n),0);var bt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SYMBOL_PRISM_TOKEN:G,default:De}),D;(function(t){t.strong="strong",t.emphasis="emphasis",t.delete="delete",t.inlineCode="inlineCode"})(D||(D={}));const U=O({isLeaf:!0,contentType:T.staticPhrasing,contentModelType:T.value,canContainsContentModelTypeOf:t=>t.inlineCode?T.value:(t.strong||t.emphasis||t.delete,T.phrasing),normalize:(t,e,n,s)=>{if(e.text===""){const o=[D.strong,D.emphasis,D.delete,D.inlineCode].filter(r=>!!e[r]);o.length>0&&g.unsetNodes(t,o,{at:n})}},render(t,{leaf:e,children:n,attributes:s}){let o=n;return e[G]&&(o=l("span",{className:K(e[G]?`token ${e[G]}`:void 0,s.className),children:o})),e.delete&&(o=l("del",{children:o})),e.emphasis&&(o=l("em",{children:o})),e.strong&&(o=l("strong",{children:o})),e.inlineCode&&(o=l("code",{children:o})),l("span",C(_({},s),{children:o}))},toggleDecorator:(t,e,n)=>{const s=Oe(t),o=r=>s(d.get(t,r.anchor.path),r.anchor.path);fe(t,e,n)?B.isCollapsed(e)?o(e)&&b.addMark(t,n,!1):g.setNodes(t,{[n]:!1},{match:s,split:!0}):B.isCollapsed(e)?o(e)&&b.addMark(t,n,!0):g.setNodes(t,{[n]:!0},{match:s,split:!0})},toolbarItems:[{key:D.strong,icon:le,tips:l(z,{children:"\u52A0\u7C97"})},{key:D.emphasis,icon:ce,tips:l(z,{children:"\u659C\u4F53"})},{key:D.inlineCode,icon:te,tips:l(z,{children:"\u884C\u5185\u4EE3\u7801"})},{key:D.delete,icon:ue,tips:l(z,{children:"\u5220\u9664"})}].map(({key:t,icon:e,tips:n})=>({key:t,icon:l(R,{icon:e}),isActive:(s,o)=>fe(s,o,t),isDisabled:(s,o)=>!se(s,o),action:(s,o,r)=>{U.toggleDecorator(s,o,t)},tips:n}))});function fe(t,e,n){if(!$.hasRange(t,e))return!1;const s=b.marks(t);return s?!!s[n]:!1}const se=(t,e)=>{const n=Re(t),[s]=b.nodes(t,{at:e,match:n});return!s},Oe=t=>(e,n)=>{if(!S.isText(e))return!1;const s=d.parent(t,n);if(E.isElement(s)){const o=t.factory.customElementMap.get(s.type);return o?!o.isDisallowTextDecorators:!1}else return!1},Re=t=>(e,n)=>{if(!S.isText(e))return!1;const s=d.parent(t,n);if(E.isElement(s)){const o=t.factory.customElementMap.get(s.type);return o?!!o.isDisallowTextDecorators:!0}else return!0};function Y(t,e,n,s){if(B.isRange(e)){if(!$.hasRange(t,e))return!1}else if(y.isPath(e)){if(!b.hasPath(t,e))return!1}else if(!$.hasRange(t,{anchor:e,focus:e}))return!1;if(y.isPath(e)){const r=d.get(t,e);return I(r,n)&&(s?s(r):!0)}const[o]=b.nodes(t,{at:B.isRange(e)?b.unhangRange(t,e):e,match:r=>!b.isEditor(r)&&I(r,n)&&(s?s(r):!0)});return!!o}var vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get TextNodeDecorator(){return D},isDecoratorActive:fe,isRangeCustomTextPropsEnabled:se,isCustomTextPropsEnabled:Oe,isCustomTextPropsNotEnabled:Re,isElementActive:Y,default:U});function Tt({schema:t,onSubmit:e,defaultValues:n}){return l("div",{contentEditable:!1,children:l(Xe,{className:"action-form",formData:n,onSubmit:s=>e(s.formData),schema:t})})}function xt(t,e){return v.exports.useCallback(()=>t.selection?$.toDOMRange(t,t.selection).getBoundingClientRect():e.getBoundingClientRect(),[t,e])}function wt(t,e){return v.exports.useCallback(()=>{t("user canceled"),e.current&&e.current.hide()},[t])}function kt(){const t=v.exports.useRef(),e=v.exports.useCallback(n=>{t.current=n},[t]);return[t,e]}function _t(t,e,n,s){const o=v.exports.useCallback(r=>{var a;e(r),(a=s.current)==null||a.hide()},[e,s]);return v.exports.useMemo(()=>l(Tt,{defaultValues:n,onSubmit:o,schema:t}),[t,o])}function Mt({editor:t,el:e,reject:n,resolve:s,schema:o,defaultValues:r}){const[a,c]=kt(),p=xt(t,e),h=wt(n,a),i=_t(o,s,r,a);return l(ee,{content:i,getReferenceClientRect:p,interactive:!0,onClickOutside:h,onMount:c,placement:"right-start",visible:!0,children:l("span",{})})}function ze(t,e,n,s){return new Promise((o,r)=>{t.setActionForm(l(Mt,{defaultValues:s,editor:t,el:e,reject:r,resolve:o,schema:n}))}).catch(o=>{if(o==="user canceled")return Promise.resolve(void 0);throw o})}const Et="\u6DFB\u52A0\u8D85\u94FE\u63A5",Nt="object",Pt={src:{title:"\u94FE\u63A5",type:"string",format:"url"},text:{title:"\u663E\u793A\u6587\u672C",type:"string"}},Ct=["src","text"];var St={title:Et,type:Nt,properties:Pt,required:Ct};A.add(we);const de=O({type:"link",isInline:!0,isVoid:!1,isLeaf:!1,contentType:T.phrasing,contentModelType:T.staticPhrasing,normalize:(t,e,n,s)=>{d.string(e).trim().length===0&&(g.removeNodes(t,{at:n}),s())},render:(t,{element:e,attributes:n,children:s})=>l("a",C(_({href:e.url,onClick:()=>window.open(e.url,"_blank"),style:{display:"inline-flex",cursor:"pointer"}},n),{children:s})),insert:(t,e,o)=>{var r=o,{text:n}=r,s=me(r,["text"]);g.insertNodes(t,[_({type:"link",children:[{text:n}]},s),{text:" "}],{at:e,select:!0}),Ze.isPoint(e)&&g.move(t,{distance:1})},match:{regexp:et()},toolbarItems:[{key:"link",icon:l(R,{icon:we}),tips:l(z,{children:"\u8D85\u94FE\u63A5"}),isActive:(t,e)=>Y(t,e,"link"),isDisabled:(t,e)=>!y.equals(y.parent(e.focus.path),y.parent(e.anchor.path))||!se(t,e),action:(t,e,n)=>{Y(t,e,"link")?g.unwrapNodes(t,{at:b.unhangRange(t,e),match:s=>!b.isEditor(s)&&E.isElement(s)&&s.type==="link"}):ze(t,n.target,St,{text:b.string(t,e),src:""}).then(s=>{if(s){const{src:o,text:r}=s;b.withoutNormalizing(t,()=>{de.insert(t,e,{url:o,title:"",text:r})})}})}}]});var It=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:de});class Dt{constructor(e,n){L(this,"state",[]);this.factory=e,this.editor=n}process(e){const[n,s]=e;if(b.isEditor(n))return this.state=[],[];if(E.isElement(n)){const o=this.factory.customElementMap.get(n.type);if(o&&!o.isInline){const r=o;if(r.decorate)return this.state.push({element:n,path:s,config:r}),[]}}if(this.state.length>0){for(const o of this.state.reverse())if(y.isAncestor(o.path,s))return o.config.decorate(this.editor,e,o.element)}return[]}}class Lt{constructor(){L(this,"blockConfigs",[]);L(this,"inlineConfigs",[]);L(this,"textConfig");L(this,"inlineSet",new Set);L(this,"voidSet",new Set);L(this,"customElementMap",new Map);L(this,"contentTypeMap",new Map);L(this,"contentModelTypeMap",new Map)}define(e){return e.isLeaf?this.textConfig=e:(e.isInline?(this.inlineSet.add(e.type),this.inlineConfigs.push(e)):this.blockConfigs.push(e),this.customElementMap.set(e.type,e),this.contentModelTypeMap.set(e.type,e.contentModelType),this.contentTypeMap.set(e.type,e.contentType),e.isVoid&&this.voidSet.add(e.type)),this}wrapEditor(e){const{isVoid:n,isInline:s,normalizeNode:o}=e;return e.factory=this,e.updatePopper=e.hidePopper=e.togglePopper=()=>{},e.isContent=(r,a)=>E.isElement(r)?this.contentTypeMap.get(r.type)===a:S.isText(r)?this.textConfig.contentType===a:!1,e.canContainsContent=(r,a)=>{if(b.isEditor(r))return a===T.flow;if(E.isElement(r)){const c=this.contentModelTypeMap.get(r.type);return c?V(a,c):!1}else return S.isText(r)?V(a,U.canContainsContentModelTypeOf(r)):!1},e.getContentType=r=>E.isElement(r)?this.contentTypeMap.get(r.type)||null:S.isText(r)&&this.textConfig.contentType||null,e.getContentModelType=r=>b.isEditor(r)?T.flow:E.isElement(r)?this.contentModelTypeMap.get(r.type)||null:S.isText(r)?this.textConfig.contentModelType:null,e.getContentTypePair=r=>E.isElement(r)?[this.contentTypeMap.get(r.type)||null,this.contentModelTypeMap.get(r.type)||null]:S.isText(r)?[this.textConfig.contentType||null,this.textConfig.contentModelType||null]:[null,null],e.toggle=(r,a,c)=>{const p=e.canToggle(r,a,!0);if(!p)return!1;const[[h,i],u]=p,f=typeof c=="object"?c:{};switch(u){case H.replace:return g.unsetNodes(e,Object.keys(d.extractProps(h))),g.setNodes(e,C(_({type:a.type},f),{children:[]}),{at:i}),!0;case H.wrap:return g.wrapNodes(e,_({type:a.type},f),{at:i}),!0;case H.custom:throw new Error("TODO: ToggleStrategy.custom");default:throw new Error("unknown ToggleStrategy: "+u)}},e.canToggle=(r,a,c)=>{const[p]=r,[h,i]=e.getContentTypePair(p);if(a.contentType!==h)return!1;if(a.contentModelType===i)return[r,H.replace];if(a.contentModelType===h)return[r,H.wrap];if(!c)return!1;const u=d.ancestors(e,r[1],{reverse:!0});for(const f of u){const m=e.canToggle(f,a,!1);if(m)return m}return!1},e.unwrap=(r,a)=>{if(!e.canUnwrap(r,a))return!1;const[c,p]=r,h=[[[]]];let i=[[c,[]]],u=0;for(;u<a.length-1;){const f=[];for(const[m,w]of i)for(const[x,M]of m.children.entries())f.push([M,w.concat(x)]);u+=1,i=f,h.push(f.map(([,m])=>m))}for(const f of h.reverse())for(const m of f.reverse())g.unwrapNodes(e,{at:p.concat(m),split:!0});return!0},e.canUnwrap=([r,a],c)=>{if(c.length===0)return!0;const p=e.getContentModelType(d.parent(e,a)),h=c[c.length-1].contentModelType;if(!p||!h||!V(h,p))return!1;let i=[[r,[]]],u=0;for(;u<c.length;){const f=[];for(const[m,w]of i){if(!I(m,c[u].type))return!1;for(const[x,M]of m.children.entries())f.push([M,w.concat(x)])}u+=1,i=f}return!0},e.wrap=(r,a,c)=>{if(!e.canWrap(r,a,c))return!1;const[,p]=r;let h=a.length-1;for(;h>=0;){const i=a[h],u=c[h];g.wrapNodes(e,Object.assign({type:i.type,children:[]},u),{at:p}),h--}return!0},e.canWrap=(r,a,c)=>{console.assert(a.length===c.length,"editor.canWrap: configs.length should be equals to params.length");const[p,h]=r,i=d.parent(e,h);let u=0,f=e.getContentModelType(i);for(;u<a.length;){const w=a[u];if(f===null||!V(w.contentType,f))return!1;f=w.contentModelType,u+=1}if(f===null)return!1;const m=e.getContentType(p);return m?V(m,f):!1},e.nearest=(r,a)=>{const[c,p]=r;if(I(c,a.type))return r;for(const h of d.ancestors(e,p,{reverse:!0}))if(I(h[0],a.type))return h},e.getAndRemoveMark=r=>{if(e.marks){const a=e.marks[r];return e.removeMark(r),a}},e.isVoid=r=>this.voidSet.has(r.type)||n(r),e.isInline=r=>this.inlineSet.has(r.type)||s(r),e.normalizeNode=r=>{let a=!0;const c=()=>{a=!1};b.withoutNormalizing(e,()=>{var i;const[p,h]=r;if(E.isElement(p)){const u=(i=this.customElementMap.get(p.type))==null?void 0:i.normalize;u&&u(e,p,h,c)}S.isText(p)&&this.textConfig.normalize&&this.textConfig.normalize(e,p,h,c)}),a&&o(r)},e}createDefaultEditableProps(e){const n=i=>{var f;const{selection:u}=e;if(u&&B.isCollapsed(u)){const m=u.anchor,w=d.get(e,m.path),x=d.parent(e,m.path);if(S.isText(w)&&E.isElement(x)&&x.type==="paragraph"&&i.data===" "&&!y.hasPrevious(m.path)){const M=w.text.slice(0,m.offset);for(const{toggle:k}of this.blockConfigs)if(!(typeof k.estimatePrefixLength=="number"&&M.length>k.estimatePrefixLength)&&((f=k.prefix)==null?void 0:f.test(M))){const N=k.onTrigger(M,e,y.parent(m.path));if(typeof N!="undefined"){g.delete(e,{at:{path:m.path,offset:0},distance:m.offset}),k.toggle(e,y.parent(m.path),N),i.preventDefault();return}}}if(S.isText(w)&&!I(x,"link")&&i.data===" "){for(const M of this.inlineConfigs)if(M.match){const k=M.match.regexp.exec(w.text.slice(0,m.offset));if(k){const N=k[0],q=k.index,Fe=k.index+N.length,He={anchor:{path:m.path,offset:q},focus:{path:m.path,offset:Fe}};de.insert(e,He,{url:N,title:"",text:N}),i.preventDefault();return}}}if(b.isInline(e,x)){const M=y.parent(m.path).concat(x.children.length);g.insertNodes(e,{text:i.data||""},{at:M}),g.move(e,{distance:1}),i.preventDefault();return}}},s=i=>u=>{const{selection:f}=e;if(f&&B.isCollapsed(f)){const m=f.anchor;if(Ot(e,m)){const w=y.parent(m.path),x=d.get(e,w);if(E.isElement(x)){const M=this.customElementMap.get(x.type);if(M){const k=i(M.events);if(k&&k(e,m.path)){u.preventDefault();return}}if(x.type==="paragraph"){const k=d.parent(e,w);if(!y.hasPrevious(w)&&E.isElement(k)){const N=this.customElementMap.get(k.type);if(N==null?void 0:N.wrappingParagraph){const q=i(N.events);if(q&&q(e,m.path)){u.preventDefault();return}}}}}}}},o=s(i=>i.onStartDelete),r=s(i=>i.onStartEnter),c=(i=>u=>{const{selection:f}=e;if(f&&B.isCollapsed(f)){const m=f.anchor,w=y.parent(m.path),x=d.parent(e,m.path);if(E.isElement(x)){const M=this.customElementMap.get(x.type);if(M){const k=i(M.events);if(k&&k(e,m.path)){u.preventDefault();return}}if(x.type==="paragraph"){const k=d.parent(e,w);if(E.isElement(k)){const N=this.customElementMap.get(k.type);if(N==null?void 0:N.wrappingParagraph){const q=i(N.events);if(q&&q(e,m.path)){u.preventDefault();return}}}}}}})(i=>i.onTab),p=new Dt(this,e);return{renderElement:i=>{const u=this.customElementMap.get(i.element.type);return u?u.render(e,i):(console.warn(`${i.element.type} not impl`),v.exports.createElement("div",i.attributes,i.children))},renderLeaf:i=>this.textConfig?this.textConfig.render(e,i):v.exports.createElement("span",i.attributes,i.children),decorate:i=>p.process(i),onDOMBeforeInput:i=>{je(e,()=>{switch(console.log(i.inputType),i.inputType){case"insertText":n(i);break;case"deleteContentBackward":o(i);break;case"insertParagraph":r(i);break;case"insertFromPaste":console.log(i);break}})},onKeyDown:i=>{je(e,()=>{if(Q("tab",i)){c(i);return}if(Q(["ctrl+enter"],i)){g.insertText(e,`
`);return}if(Q("enter",i)&&e.selection){const u=d.parent(e,e.selection.anchor.path);if(b.isBlock(e,u)&&!/paragraph|heading/.test(u.type)){g.insertText(e,`
`),i.preventDefault();return}}if(e.selection){if(Q("meta+b",i)){U.toggleDecorator(e,e.selection,D.strong),i.preventDefault();return}if(Q("meta+i",i)){U.toggleDecorator(e,e.selection,D.emphasis),i.preventDefault();return}}})},onSelect:i=>{const u=window.getSelection();u&&(u.isCollapsed?e.hidePopper():u.rangeCount>0&&e.updatePopper(u.getRangeAt(0)))},onBlur:i=>{e.hidePopper()},onClick:()=>{const i=window.getSelection();if(i&&i.isCollapsed&&i.rangeCount>0){const u=i.getRangeAt(0),f=$.toSlateRange(e,u,{exactMatch:!0});f&&e.selection&&B.equals(f,e.selection)&&e.togglePopper(u)}}}}}function Ot(t,e){return e.offset===0&&!y.hasPrevious(e.path)&&S.isText(d.get(t,e.path))}function je(t,e){let n=!0;b.withoutNormalizing(t,()=>{e(()=>{n=!1})}),n||b.normalize(t)}A.add(ke);const Rt=[{key:"blockquote",icon:l(R,{icon:ke}),isActive:(t,e)=>{const n=[d.get(t,e),e];return!!t.nearest(n,j)},isDisabled:(t,e)=>{const n=[d.get(t,e),e],s=t.nearest(n,j);return s?!t.canUnwrap(s,[j]):!t.canToggle(n,j,!1)},tips:l(z,{children:"\u5F15\u7528"}),action:(t,e,n)=>{const s=[d.get(t,e),e],o=t.nearest(s,j);return o?t.unwrap(o,[j]):t.toggle(s,j,void 0)}}],j=O({type:"blockquote",isInline:!1,isLeaf:!1,isVoid:!1,wrappingParagraph:!0,contentType:T.flow,contentModelType:T.flow,render:(t,{children:e,attributes:n})=>l("blockquote",C(_({},n),{children:e})),toggle:{prefix:/^>$/,toggle:(t,e,n)=>{n?g.wrapNodes(t,{type:"blockquote",children:[]},{at:e}):g.unwrapNodes(t,{at:y.parent(e)})},onTrigger(){return!0}},events:{onStartDelete:(t,e)=>{const n=d.parent(t,y.parent(e));return I(n,"blockquote")?(j.toggle.toggle(t,y.parent(e),!1),!0):!1}},toolbarItems:Rt});var zt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:j});const J=O({type:"paragraph",isLeaf:!1,isInline:!1,isVoid:!1,wrappingParagraph:!1,contentType:T.flow,contentModelType:T.phrasing,toggle:{},events:{},render(t,{element:e,attributes:n,children:s}){return l(ne,{element:e,children:({active:o})=>l("p",C(_({className:K({active:o})},n),{children:s}))})},toolbarItems:[]});var jt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:J});const At=[1,2,3,4,5,6].map(t=>{const e=(s,o)=>{const r=[d.get(s,o),o],a=s.nearest(r,F);return!!(a&&a[0].depth===t)},n=(s,o)=>{const r=[d.get(s,o),o],a=s.nearest(r,F);return a?!s.canToggle(a,J,!1):!s.canToggle(r,F,!0)};return{key:`heading-level-${t}`,icon:pe(z,{children:["H",t]}),isActive:e,isDisabled:n,action:(s,o,r)=>{const a=[d.get(s,o),o],c=s.nearest(a,F);c?s.toggle(c,J,void 0):s.toggle(a,F,{depth:t})}}}),F=O({type:"heading",isInline:!1,isLeaf:!1,isVoid:!1,wrappingParagraph:!1,contentType:T.flow,contentModelType:T.phrasing,render:(t,{element:e,children:n,attributes:s})=>l(ne,{element:e,children:({active:o})=>v.exports.createElement(`h${e.depth}`,Object.assign(s,{className:K({active:o})}),n)}),toggle:{prefix:/^#{1,6}$/,estimatePrefixLength:6,toggle:(t,e,n)=>{n?t.toggle([d.get(t,e),e],F,n):t.toggle([d.get(t,e),e],J,void 0)},onTrigger:t=>({depth:t.length})},events:{onStartEnter:(t,e)=>{const n=d.parent(t,e);return I(n,"heading")?(t.toggle([n,y.parent(e)],J,void 0),!0):!1}},toolbarItems:At});var $t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:F});const Bt="\u6DFB\u52A0\u56FE\u7247",qt="object",Ft={src:{title:"\u94FE\u63A5",type:"string",format:"url"},alt:{title:"\u66FF\u4EE3\u6587\u672C\uFF08alt\uFF09",type:"string"}},Ht=["src","alt"];var Vt={title:Bt,type:qt,properties:Ft,required:Ht};A.add(_e);const Ae=O({type:"image",isInline:!0,isVoid:!1,isLeaf:!1,contentType:T.staticPhrasing,contentModelType:null,render:(t,{element:e,attributes:n})=>l("img",_({alt:e.alt,src:e.url,title:e.title},n)),insert:(t,e,n)=>{g.insertNodes(t,[{text:" "},_({type:"image",children:[]},n),{text:" "}],{at:e})},toolbarItems:[{key:"image",icon:l(R,{icon:_e}),tips:l(z,{children:"\u8D85\u94FE\u63A5"}),isActive:(t,e)=>Y(t,e,"image"),isDisabled:(t,e)=>!y.equals(y.parent(e.focus.path),y.parent(e.anchor.path))||!se(t,e),action:(t,e,n)=>{Y(t,e,"image")?g.removeNodes(t,{at:b.unhangRange(t,e),match:s=>!b.isEditor(s)&&E.isElement(s)&&s.type==="image"}):ze(t,n.target,Vt,{alt:b.string(t,e),src:""}).then(s=>{if(s){const{src:o,alt:r}=s;b.withoutNormalizing(t,()=>{Ae.insert(t,e,{url:o,title:"",alt:r})})}})}}]});var Ut=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ae});A.add(Me,Ee);const $e=[!0,!1].map(t=>{const e={ordered:t,spread:void 0,start:void 0},n={spread:void 0,checked:void 0};return{key:`list-${t?"ordered":"unordered"}`,icon:l(R,{icon:t?Me:Ee}),isActive:(s,o)=>{const r=[d.get(s,o),o],a=s.nearest(r,P);return a?Boolean(a[0].ordered)===Boolean(t):!1},isDisabled:(s,o)=>{const r=[d.get(s,o),o],a=s.nearest(r,P);return a?!s.canUnwrap(a,[P,W]):!s.canWrap(r,[P,W],[e,n])},action:(s,o,r)=>{const a=s.getAndRemoveMark("start"),c=[d.get(s,o),o],p=s.nearest(c,P);if(p){const[h,i]=p;h.ordered===t?s.unwrap(p,[P,W]):g.setNodes(s,{ordered:t,start:a},{at:i})}else s.wrap(c,[P,W],[Object.assign({},e,{start:a}),n])}}}),P=O({type:"list",isLeaf:!1,isInline:!1,isVoid:!1,wrappingParagraph:!0,contentType:T.flow,contentModelType:T.list,normalize:(t,e,n,s)=>{if(e.children.length===0){g.removeNodes(t,{at:n}),s();return}if(y.hasPrevious(n)){const o=d.get(t,y.previous(n));if(I(o,"list")&&Boolean(o.ordered)===Boolean(e.ordered)&&o.start===void 0&&e.start===void 0){g.mergeNodes(t,{at:n}),s();return}}},render(t,{element:e,attributes:n,children:s}){return e.ordered?l("ol",C(_({},n),{start:e.start,children:s})):l("ul",C(_({},n),{children:s}))},toggle:{prefix:/^(?:-|\d+\.)$/,toggle:Be,onTrigger:t=>{if(t==="-")return{ordered:!1,start:void 0,spread:void 0};{const e=parseInt(t);return{ordered:!0,start:e===1?void 0:e,spread:void 0}}}},events:{},toolbarItems:$e});function Be(t,e,n){if(n===!1)throw new Error("should never reach");t.addMark("start",n.start),t.nearest([d.get(t,e),e],P)?(t.addMark("ordered",n.ordered),W.toolbarItems[0].action(t,e,{})):$e[n.ordered?0:1].action(t,e,{})}var Wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toggleList:Be,default:P});A.add(Ne,Pe);const re=[{key:"indent-list-item",isActive:()=>!1,isDisabled:(t,e)=>{const n=t.nearest([d.get(t,e),e],P);return!n||n[0].children.length<=1},icon:l(R,{icon:Ne}),action:(t,e,n)=>{const s=t.getAndRemoveMark("ordered"),o=t.getAndRemoveMark("start"),r=[d.get(t,e),e],a=t.nearest(r,P);if(!a||a[0].children.length<=1)return;const c=t.nearest(r,X);!c||!y.hasPrevious(c[1])||t.wrap(c,[X,P],[{spread:void 0,checked:void 0},{ordered:s!=null?s:a[0].ordered,spread:void 0,start:o}])&&g.mergeNodes(t,{at:c[1]})}},{key:"outdent-list-item",isActive:()=>!1,isDisabled:(t,e)=>!t.nearest([d.get(t,e),e],P),icon:l(R,{icon:Pe}),action:(t,e,n)=>{const s=[d.get(t,e),e];if(!t.nearest(s,P))return;const r=t.nearest(s,X);if(!r)return;const a=b.pathRef(t,r[1]),c=y.next(r[1]);if(b.hasPath(t,c)&&g.splitNodes(t,{at:c}),g.splitNodes(t,{at:r[1]}),a.current){const p=y.parent(a.current),h=[d.get(t,p),p];t.unwrap(h,[P,X]),g.splitNodes(t,{at:p})}a.unref()}}],X=O({type:"listItem",isLeaf:!1,isInline:!1,isVoid:!1,wrappingParagraph:!0,contentType:T.list,contentModelType:T.flow,normalize:(t,e,n)=>{const s=e.children.length-1;if(e.children.length>1&&I(e.children[s],"paragraph")){const o=y.next(n);g.moveNodes(t,{at:n.concat(s),to:o}),g.wrapNodes(t,{type:"listItem",checked:e.checked,spread:e.spread,children:[]},{at:o})}},render(t,{element:e,attributes:n,children:s}){return l("li",C(_({},n),{children:s}))},toggle:{},events:{onStartDelete:(t,e)=>(re[1].action(t,y.parent(e),{}),!0),onStartEnter:(t,e)=>d.string(d.get(t,e))?!1:(re[1].action(t,y.parent(e),{}),!0),onTab:(t,e)=>(re[0].action(t,y.parent(e),{}),!0)},toolbarItems:re});var W=X,Kt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:W});const qe=v.exports.forwardRef(function({children:t},e){return l("div",{className:"void-element",contentEditable:!1,ref:e,children:t})});qe.displayName="VoidElement";var Qt=O({type:"thematicBreak",isLeaf:!1,isInline:!1,isVoid:!0,wrappingParagraph:!1,contentType:T.flow,contentModelType:null,isDisallowTextDecorators:!0,isHiddenHoverToolbar:!0,render(t,{element:e,children:n,attributes:s}){return l(ne,{element:e,children:pe(qe,{children:[l("hr",_({},s)),n]})})},toggle:{prefix:/^---$/,estimatePrefixLength:3,toggle:(t,e,n)=>{n?(g.removeNodes(t,{at:e}),g.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:e}),g.insertNodes(t,{type:"thematicBreak",children:[]},{at:e}),$.deselect(t),g.select(t,b.start(t,y.next(e)))):g.setNodes(t,{type:"thematicBreak",children:[{text:""}]},{at:e})},onTrigger:(t,e,n)=>{if(!(n.length>1))return!0}},events:{},toolbarItems:[]}),Gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Qt});const Yt={"./blockquote/BlockquoteNode.tsx":zt,"./code/CodeNode.tsx":bt,"./heading/HeadingNode.tsx":$t,"./image/ImageNode.tsx":Ut,"./link/LinkNode.tsx":It,"./list/ListItemNode.tsx":Kt,"./list/ListNode.tsx":Wt,"./paragraph/ParagraphNode.tsx":jt,"./text/TextNode.tsx":vt,"./thematic-break/ThematicBreakNode.tsx":Gt};function Jt(t){for(const[e,{default:n}]of Object.entries(Yt))typeof(n==null?void 0:n.register)=="function"&&(console.debug("auto detected",e),n.register(t))}A.add(le,ce,ue,te);function Xt(t,e){var o;if(!e)return[];const n=(o=$.toSlateRange(t,e,{exactMatch:!0}))!=null?o:t.selection;if(n){const[r]=b.nodes(t,{at:n,match:a=>{const c=a.type;if(c){const p=t.factory.customElementMap.get(c);if(p&&p.isHiddenHoverToolbar)return!0}return!1}});if(r)return[]}return U.toolbarItems.concat(t.factory.inlineConfigs.flatMap(r=>r.toolbarItems)).map(({key:r,isDisabled:a,isActive:c,action:p,icon:h,tips:i})=>({key:r,disabled:n?a(t,n):!1,active:n?c(t,n):!1,icon:h,action:n?u=>p(t,n,u):()=>{},tips:i}))}function Zt(){const t=ie(),e=v.exports.useRef(null),n=v.exports.useRef(),[s,o]=v.exports.useState(!0),r=Ie(),[a,c]=v.exports.useState([]);t.hidePopper=()=>o(!0);const p=v.exports.useMemo(()=>({getBoundingClientRect(){return n.current?n.current.getBoundingClientRect():{width:0,height:0}}}),[t,n]),{styles:h,attributes:i,update:u}=tt(p,e.current,{placement:"top",modifiers:[{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,8]}}]});return t.updatePopper=f=>{if(f){const w=!n.current;n.current=f,w&&setTimeout(()=>{t.updatePopper()},0)}const m=Xt(t,n.current);c(m),m.length>0?(o(!1),u&&u()):o(!0),r()},t.togglePopper=f=>{s?t.updatePopper(f):t.hidePopper()},l("div",C(_({className:"ti-hovering-toolbar",ref:e,style:C(_({},h.popper),{opacity:s?0:1,pointerEvents:s?"none":"initial"})},i.popper),{children:a.map(f=>l(Se,{action:f.action,active:f.active,disabled:f.disabled,icon:f.icon,tips:f.tips},f.key))}))}var H;(function(t){t[t.replace=1]="replace",t[t.wrap=2]="wrap",t[t.unwrap=3]="unwrap",t[t.custom=4]="custom"})(H||(H={}));const oe=v.exports.forwardRef(({disabled:t=!1,initialMarkdown:e=""},n)=>{const s=v.exports.useMemo(()=>{const f=new Lt;return Jt(f),f},[]),o=v.exports.useMemo(()=>{const f=nt(st(rt()));return s.wrapEditor(f)},[]),r=v.exports.useMemo(()=>s.createDefaultEditableProps(o),[]),[a,c,p]=ft(o);v.exports.useEffect(()=>{n&&(typeof n=="function"?n(a):n.current=a),a.markdown=e},[o]);const[h,i]=v.exports.useState();o.setActionForm=i;const u=v.exports.useMemo(()=>{if(h)return ot.exports.createPortal(h,document.body)},[h]);return pe(at,{editor:o,onChange:p,value:c,children:[l(Zt,{}),l(it,_({as:"article",className:"ti-community-editor markdown-body"},r)),u]})});oe.displayName="TiEditor";oe.propTypes={disabled:Ce.bool,initialMarkdown:Ce.string};oe.defaultProps={disabled:!1,initialMarkdown:""};const en=`### \u5F15\u7528 (blockquote)

\`\`\`markdown
> blockquote
> 
> yeah
\`\`\`

> blockquote
> 
> yeah

- \u6DFB\u52A0\u5F15\u7528
  - \u8F93\u5165 \`>\` \u5E76\u8F93\u5165\u7A7A\u683C
- \u5220\u9664\u5F15\u7528
  - \u5728\u5F15\u7528\u8D77\u59CB\u5904\u70B9\u51FB \`<Backspace>\`
`;var tn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:en});const nn=`### Codes

### Usage

- \u8F93\u5165 \\\`\\\`\\\` \u52A0\u7A7A\u683C

### Examples

\`\`\`javascript
console.log('hello world')
\`\`\`

\`\`\`sql
SELECT * FROM hello_world;
\`\`\`

`;var sn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:nn});const rn=`### \u6807\u9898

\`\`\`markdown
# h1
## h2
### h3
#### h4
##### h5
###### h6
\`\`\`

> # h1
> ## h2
> ### h3
> #### h4
> ##### h5
> ###### h6

- \u521B\u5EFA\u6807\u9898
  1. \u8F93\u5165 1-6 \u4E2A \`#\` \u5E76\u8F93\u5165\u7A7A\u683C
  2. \u5728\u6807\u9898\u4E2D\u95F4\u6216\u7ED3\u5C3E\u70B9\u51FB \`<Enter>\`
- \u5220\u9664\u6807\u9898
  - \u5728\u6807\u9898\u8D77\u59CB\u5904\u70B9\u51FB \`<Enter>\` \u4EE5\u5C06\u6807\u9898\u8F6C\u6362\u6210\u6BB5\u843D
`;var on=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:rn});const an=`### \u94FE\u63A5

\`\`\`
[title](url)
\`\`\`

> [title](#)

- \u521B\u5EFA\u94FE\u63A5
  - \u8F93\u5165\u94FE\u63A5 url \u5E76\u8F93\u5165\u7A7A\u683C\u4F1A\u81EA\u52A8\u8F6C\u6362
`;var ln=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:an});const cn=`### \u5217\u8868

\`\`\`markdown
- \u65E0\u5E8F\u5217\u8868
- ...
  - \u7F29\u8FDB\u5217\u8868

1. \u6709\u5E8F\u5217\u8868
\`\`\`

> - \u65E0\u5E8F\u5217\u8868
> - ...
>   - \u7F29\u8FDB\u5217\u8868
> 
> 1. \u6709\u5E8F\u5217\u8868 1
> 2. \u6709\u5E8F\u5217\u8868 2

\u4F7F\u7528\u4EE5\u4E0B\u65B9\u5F0F\u63A7\u5236 Markdown \u5217\u8868\uFF1A
- \u65B0\u5EFA\u5217\u8868\uFF1A
  1. \u8F93\u5165 \`-\` \u52A0\u7A7A\u683C\u63D2\u5165\u65E0\u5E8F\u5217\u8868
  2. \u8F93\u5165 \`number.\` \u52A0\u7A7A\u683C\u63D2\u5165\u6709\u5E8F\u5217\u8868
- \u5217\u8868\u7F29\u8FDB\uFF1A
  1. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`<Tab>\` \u751F\u6210\u4E0B\u7EA7\u5217\u8868 
  2. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`-\` \u6216 \`<number>\`\u3002
- \u53D6\u6D88\u5217\u8868
  1. \u5728\u7A7A\u5217\u8868\u9879\u4E2D\u76F4\u63A5\u8F93\u5165 \`<Enter>\`
`;var un=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:cn});const pn=`# a-editor

## \u6280\u672F\u6808

- core
  - [slate](https://www.slatejs.org/)
  - [remark](https://remark.js.org/)
  - [remark-slate-transformer](https://github.com/inokawa/remark-slate-transformer)
- code highlight
  - [prism](https://prismjs.com/)

## \u6837\u5F0F\u914D\u7F6E

### \u4EE3\u7801\u9AD8\u4EAE

\u5728 \`src/slate-markdown/elements/code/style.less\` \u6DFB\u52A0\u5BF9\u5E94 token \u6837\u5F0F\u3002

## \u7528\u6CD5
`,fn={"./slate-markdown/elements/blockquote/instructions.md":tn,"./slate-markdown/elements/code/instructions.md":sn,"./slate-markdown/elements/heading/instructions.md":on,"./slate-markdown/elements/link/instructions.md":ln,"./slate-markdown/elements/list/instructions.md":un},dn=pn+`

`+Object.values(fn).map(t=>t.plainText).join(`

`);function gn(){return l("div",{children:l(oe,{initialMarkdown:dn})})}lt.render(l(ct.StrictMode,{children:l(gn,{})}),document.getElementById("root"));
