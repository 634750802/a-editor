var Te=Object.defineProperty,Ee=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var Q=(t,e,n)=>e in t?Te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v=(t,e)=>{for(var n in e||(e={}))ae.call(e,n)&&Q(t,n,e[n]);if(H)for(var n of H(e))ie.call(e,n)&&Q(t,n,e[n]);return t},N=(t,e)=>Ee(t,Pe(e));var le=(t,e)=>{var n={};for(var s in t)ae.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&H)for(var s of H(t))e.indexOf(s)<0&&ie.call(t,s)&&(n[s]=t[s]);return n};var P=(t,e,n)=>(Q(t,typeof e!="symbol"?e+"":e,n),n);import{r as p,u as ce,a as ue,p as Ce,b as Me,c as Ie,d as De,E as x,e as C,P as u,N as b,f as W,j as i,g as U,T as X,l as B,h as fe,i as pe,F as $,k as Z,m as ee,n as te,o as K,R as G,q as D,s as Le,t as A,v as c,w as L,x as de,y as z,z as Oe,A as ge,B as Re,C as ze,_ as j,D as he,G as me,H as Fe,I as Be,J as $e,K as Ae,L as je,S as qe,M as Ve,O as be,Q as He,U as Ue}from"./vendor.2b0dca9d.js";const Ke=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};Ke();class Ge{constructor(e,n){P(this,"getMarkdownProcessor",ce().use(ue).use(Ce).use(Me,{bullet:"-",listItemIndent:"one",fence:"`",rule:"-"}));P(this,"setMarkdownProcessor",ce().use(ue).use(Ie).use(De));this.editor=e,this.setValue=n,this.getMarkdownProcessor.freeze(),this.setMarkdownProcessor.freeze()}get markdown(){return this.getMarkdownProcessor.stringify(this.getMarkdownProcessor.runSync({type:"root",children:this.editor.children}))}set markdown(e){this.setValue(this.setMarkdownProcessor.processSync(e).result),setTimeout(()=>{x.normalize(this.editor,{force:!0})},0)}}function Ye(t){const[e,n]=p.exports.useState([{type:"paragraph",children:[{text:""}]}]);return[p.exports.useMemo(()=>new Ge(t,n),[t]),e,n]}function M(t){return N(v({},t),{register(e){e.define(t)}})}function I(t,e){return C.isElement(t)&&t.type===e}function Je(t,e){const n=u.previous(e),s=b.get(t,n);return n.concat(s.children.length)}function ye({icon:t,active:e,disabled:n,action:s,tips:r}){const o=W(),f=p.exports.useCallback(d=>{s&&d.button===0&&(d.preventDefault(),d.stopPropagation(),n||x.withoutNormalizing(o,()=>{s(d)}))},[s]),h=i("span",{className:U("toolbar-item",{active:e,disabled:n}),onMouseDown:f,children:t});return r?i(X,{content:r,children:h}):h}B.add(fe,pe);function Qe({isEmpty:t,element:e,items:n,setActive:s}){return i(X,{appendTo:"parent",content:We(n),hideOnClick:!1,interactive:!0,onHide:()=>s(!1),onShow:()=>s(!0),children:i("span",{className:"line-operations",contentEditable:!1,children:i($,{icon:t?pe:fe})})})}const We=t=>i("div",{className:"block-toolbar",children:t.map(e=>i(ye,{action:e.action,active:e.active,disabled:e.disabled,icon:e.icon,tips:e.tips},e.key))});B.add(Z,ee,te,K);function Xe(t,e){return t.factory.blockConfigs.flatMap(s=>s.toolbarItems).map(({key:s,isDisabled:r,isActive:o,action:f,icon:h,tips:d})=>({key:s,disabled:e?r(t,e):!1,active:e?o(t,e):!1,icon:h,action:e?y=>f(t,e,y):()=>{},tips:d}))}function _e(){const[t,e]=p.exports.useState(0);return()=>{e(n=>n+1)}}function ne({element:t,children:e}){const[n,s]=p.exports.useState(null),r=p.exports.useRef(),o=W(),f=Xe(o,r.current),h=_e();p.exports.useLayoutEffect(()=>{if(n){const l=document.createRange();l.selectNode(n.childNodes.item(0));const _=G.toSlateRange(o,l,{exactMatch:!1});let g=u.common(_.anchor.path,_.focus.path);for(;g.length!==0;){if(x.isBlock(o,b.get(o,g))){r.current=g;break}g=u.parent(g)}}else r.current=void 0},[n]);const[d,y]=p.exports.useState(!1),a=(()=>{const l=t.children[0];return t.children.length===1&&D.isText(l)&&l.text===""})();return i(Le,{appendTo:document.body,arrow:!1,hideOnClick:!1,interactive:!0,interactiveBorder:12,offset:[0,8],onTrigger:h,placement:"left",popperOptions:{modifiers:[{name:"flip",options:{allowedAutoPlacements:["left"]}}]},ref:s,render:()=>i(Qe,{element:t,isEmpty:a,items:f,setActive:y}),children:e({active:d,path:r.current})})}const Ze=["markdown","javascript","sql","bash","go","rust"],q=Symbol("prism_token"),se=M({type:"code",isInline:!1,isLeaf:!1,isVoid:!1,wrappingParagraph:!1,render:(t,{element:e,children:n,attributes:s})=>i(ne,{element:e,children:({path:r})=>A("pre",N(v({},s),{className:e.lang?`language-${e.lang}`:void 0,children:[i("code",{className:"prism-code",children:n}),i("select",{className:"lang-selector",contentEditable:!1,onChange:o=>{c.setNodes(t,{lang:o.currentTarget.value},{at:r})},value:e.lang||void 0,children:Ze.map(o=>i("option",{children:o},o))})]}))}),toggle:{prefix:/^`{3}(?: (\w+))?$/,toggle:(t,e,n)=>{if(n){const s=b.string(b.get(t,e));c.removeNodes(t,{at:e}),c.insertNodes(t,N(v({type:"code"},n),{children:[{text:s}]}),{at:e}),c.select(t,e.concat(0))}else c.unsetNodes(t,["meta","lang"],{at:e}),c.setNodes(t,{type:"paragraph"},{at:e})},onTrigger:t=>{const e=/^`{3}(?: (\w+))?$/.exec(t);return e?{lang:e[1]||"markdown",meta:void 0}:{lang:"markdown",meta:void 0}}},events:{},toolbarItems:[{key:"code-block",icon:i($,{icon:K}),isActive:(t,e)=>R(t,e,"code"),isDisabled:(t,e)=>e.length>1,tips:i(L,{children:"\u4EE3\u7801\u5757"}),action:(t,e,n)=>{R(t,e,"code")?se.toggle.toggle(t,e,!1):se.toggle.toggle(t,e,{lang:"markdown",meta:void 0})}}],decorate:(t,[e,n],s)=>{if(D.isText(e)&&s.lang){const r=de.languages[s.lang];if(!r)return[];const o=[],f=de.tokenize(e.text,r);let h=0;for(const d of f){const y=ve(d),a=h+y;typeof d!="string"&&o.push({[q]:d.type,anchor:{path:n,offset:h},focus:{path:n,offset:a}}),h=a}return o}return[]}}),ve=t=>typeof t=="string"?t.length:typeof t.content=="string"?t.content.length:t.content.reduce((e,n)=>e+ve(n),0);var et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SYMBOL_PRISM_TOKEN:q,default:se}),S;(function(t){t.strong="strong",t.emphasis="emphasis",t.delete="delete",t.inlineCode="inlineCode"})(S||(S={}));const V=M({isLeaf:!0,normalize:(t,e,n,s)=>{if(e.text===""){const r=[S.strong,S.emphasis,S.delete,S.inlineCode].filter(o=>!!e[o]);r.length>0&&c.unsetNodes(t,r,{at:n})}},render(t,{leaf:e,children:n,attributes:s}){let r=n;return e[q]&&(r=i("span",{className:U(e[q]?`token ${e[q]}`:void 0,s.className),children:r})),e.delete&&(r=i("del",{children:r})),e.emphasis&&(r=i("em",{children:r})),e.strong&&(r=i("strong",{children:r})),e.inlineCode&&(r=i("code",{children:r})),i("span",N(v({},s),{children:r}))},toggleDecorator:(t,e,n)=>{re(t,e,n)?z.isCollapsed(e)?x.addMark(t,n,!1):c.setNodes(t,{[n]:!1},{match:D.isText,split:!0}):z.isCollapsed(e)?x.addMark(t,n,!0):c.setNodes(t,{[n]:!0},{match:D.isText,split:!0})},toolbarItems:[{key:S.strong,icon:Z,tips:i(L,{children:"\u52A0\u7C97"})},{key:S.emphasis,icon:ee,tips:i(L,{children:"\u659C\u4F53"})},{key:S.inlineCode,icon:K,tips:i(L,{children:"\u884C\u5185\u4EE3\u7801"})},{key:S.delete,icon:te,tips:i(L,{children:"\u5220\u9664"})}].map(({key:t,icon:e,tips:n})=>({key:t,icon:i($,{icon:e}),isActive:(s,r)=>re(s,r,t),isDisabled:()=>!1,action:(s,r,o)=>{V.toggleDecorator(s,r,t)},tips:n}))});function re(t,e,n){if(!G.hasRange(t,e))return!1;const s=x.marks(t);return s?!!s[n]:!1}function R(t,e,n,s){if(u.isPath(e)){const o=b.get(t,e);return I(o,n)&&(s?s(o):!0)}const[r]=x.nodes(t,{at:z.isRange(e)?x.unhangRange(t,e):e,match:o=>!x.isEditor(o)&&I(o,n)&&(s?s(o):!0)});return!!r}var tt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get TextNodeDecorator(){return S},isDecoratorActive:re,isElementActive:R,default:V});function nt({schema:t,onSubmit:e,defaultValues:n}){return i("div",{contentEditable:!1,children:i(Oe,{className:"action-form",formData:n,onSubmit:s=>e(s.formData),schema:t})})}function st(t,e){return p.exports.useCallback(()=>t.selection?G.toDOMRange(t,t.selection).getBoundingClientRect():e.getBoundingClientRect(),[t,e])}function rt(t,e){return p.exports.useCallback(()=>{t("user canceled"),e.current&&e.current.hide()},[t])}function ot(){const t=p.exports.useRef(),e=p.exports.useCallback(n=>{t.current=n},[t]);return[t,e]}function at(t,e,n,s){const r=p.exports.useCallback(o=>{var f;e(o),(f=s.current)==null||f.hide()},[e,s]);return p.exports.useMemo(()=>i(nt,{defaultValues:n,onSubmit:r,schema:t}),[t,r])}function it({editor:t,el:e,reject:n,resolve:s,schema:r,defaultValues:o}){const[f,h]=ot(),d=st(t,e),y=rt(n,f),a=at(r,s,o,f);return i(X,{content:a,getReferenceClientRect:d,interactive:!0,onClickOutside:y,onMount:h,placement:"right-start",visible:!0,children:i("span",{})})}function lt(t,e,n,s){return new Promise((r,o)=>{t.setActionForm(i(it,{defaultValues:s,editor:t,el:e,reject:o,resolve:r,schema:n}))}).catch(r=>{if(r==="user canceled")return Promise.resolve(void 0);throw r})}const ct="\u6DFB\u52A0\u8D85\u94FE\u63A5",ut="object",ft={src:{title:"\u94FE\u63A5",type:"string",format:"url"},text:{title:"\u663E\u793A\u6587\u672C",type:"string"}},pt=["src","text"];var dt={title:ct,type:ut,properties:ft,required:pt};B.add(ge);const oe=M({type:"link",isInline:!0,isVoid:!1,isLeaf:!1,normalize:(t,e,n,s)=>{b.string(e).trim().length===0&&(c.removeNodes(t,{at:n}),s())},render:(t,{element:e,attributes:n,children:s})=>i("a",N(v({href:e.url,onClick:()=>window.open(e.url,"_blank"),style:{display:"inline-flex",cursor:"pointer"}},n),{children:s})),insert:(t,e,r)=>{var o=r,{text:n}=o,s=le(o,["text"]);console.log(e),c.insertNodes(t,[v({type:"link",children:[{text:n}]},s),{text:" "}],{at:e}),Re.isPoint(e)&&c.move(t,{distance:1})},match:{regexp:ze()},toolbarItems:[{key:"link",icon:i($,{icon:ge}),tips:i(L,{children:"\u8D85\u94FE\u63A5"}),isActive:(t,e)=>R(t,e,"link"),isDisabled:(t,e)=>!u.equals(u.parent(e.focus.path),u.parent(e.anchor.path)),action:(t,e,n)=>{R(t,e,"link")?c.unwrapNodes(t,{at:x.unhangRange(t,e),match:s=>!x.isEditor(s)&&C.isElement(s)&&s.type==="link"}):lt(t,n.target,dt,{text:x.string(t,e),src:""}).then(s=>{if(s){const{src:r,text:o}=s;x.withoutNormalizing(t,()=>{oe.insert(t,e,{url:r,title:"",text:o})})}})}}]});var gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oe});class ht{constructor(e,n){P(this,"state",[]);this.factory=e,this.editor=n}process(e){const[n,s]=e;if(x.isEditor(n))return this.state=[],[];if(C.isElement(n)){const r=this.factory.customElementMap.get(n.type);if(r&&!r.isInline){const o=r;if(o.decorate)return this.state.push({element:n,path:s,config:o}),[]}}if(this.state.length>0){for(const r of this.state.reverse())if(u.isAncestor(r.path,s))return r.config.decorate(this.editor,e,r.element)}return[]}}class mt{constructor(){P(this,"blockConfigs",[]);P(this,"inlineConfigs",[]);P(this,"textConfig");P(this,"inlineSet",new Set);P(this,"voidSet",new Set);P(this,"customElementMap",new Map)}define(e){return e.isLeaf?this.textConfig=e:(e.isInline?(this.inlineSet.add(e.type),this.inlineConfigs.push(e)):this.blockConfigs.push(e),this.customElementMap.set(e.type,e),e.isVoid&&this.voidSet.add(e.type)),this}wrapEditor(e){const{isVoid:n,isInline:s,normalizeNode:r}=e;return e.factory=this,e.updatePopper=()=>{},e.isVoid=o=>this.voidSet.has(o.type)||n(o),e.isInline=o=>this.inlineSet.has(o.type)||s(o),e.normalizeNode=o=>{let f=!0;const h=()=>{f=!1};x.withoutNormalizing(e,()=>{var a;const[d,y]=o;if(C.isElement(d)){const l=(a=this.customElementMap.get(d.type))==null?void 0:a.normalize;l&&l(e,d,y,h)}D.isText(d)&&this.textConfig.normalize&&this.textConfig.normalize(e,d,y,h)}),f&&r(o)},e}createDefaultEditableProps(e){const n=a=>{var _;const{selection:l}=e;if(l&&z.isCollapsed(l)){const g=l.anchor,E=b.get(e,g.path),T=b.parent(e,g.path);if(D.isText(E)&&C.isElement(T)&&T.type==="paragraph"&&a.data===" "&&!u.hasPrevious(g.path)){const w=E.text.slice(0,g.offset);for(const{toggle:m}of this.blockConfigs)if(!(typeof m.estimatePrefixLength=="number"&&w.length>m.estimatePrefixLength)&&((_=m.prefix)==null?void 0:_.test(w))){const k=m.onTrigger(w);if(typeof k!="undefined"){c.delete(e,{at:{path:g.path,offset:0},distance:g.offset}),m.toggle(e,u.parent(g.path),k),a.preventDefault();return}}}if(D.isText(E)&&a.data===" "){for(const w of this.inlineConfigs)if(w.match){const m=w.match.regexp.exec(E.text.slice(0,g.offset));if(m){const k=m[0],O=m.index,Ne=m.index+k.length,Se={anchor:{path:g.path,offset:O},focus:{path:g.path,offset:Ne}};oe.insert(e,Se,{url:k,title:"",text:k}),a.preventDefault();return}}}if(x.isInline(e,T)){const w=u.parent(g.path).concat(T.children.length);c.insertNodes(e,{text:a.data||""},{at:w}),c.move(e,{distance:1}),a.preventDefault();return}}},s=a=>l=>{const{selection:_}=e;if(_&&z.isCollapsed(_)){const g=_.anchor;if(bt(e,g)){const E=u.parent(g.path),T=b.get(e,E);if(C.isElement(T)){const w=this.customElementMap.get(T.type);if(w){const m=a(w.events);if(m&&m(e,g.path)){l.preventDefault();return}}if(T.type==="paragraph"){const m=b.parent(e,E);if(!u.hasPrevious(E)&&C.isElement(m)){const k=this.customElementMap.get(m.type);if(k==null?void 0:k.wrappingParagraph){const O=a(k.events);if(O&&O(e,g.path)){l.preventDefault();return}}}}}}}},r=s(a=>a.onStartDelete),o=s(a=>a.onStartEnter),h=(a=>l=>{const{selection:_}=e;if(_&&z.isCollapsed(_)){const g=_.anchor,E=u.parent(g.path),T=b.parent(e,g.path);if(C.isElement(T)){const w=this.customElementMap.get(T.type);if(w){const m=a(w.events);if(m&&m(e,g.path)){l.preventDefault();return}}if(T.type==="paragraph"){const m=b.parent(e,E);if(C.isElement(m)){const k=this.customElementMap.get(m.type);if(k==null?void 0:k.wrappingParagraph){const O=a(k.events);if(O&&O(e,g.path)){l.preventDefault();return}}}}}}})(a=>a.onTab),d=new ht(this,e);return{renderElement:a=>{const l=this.customElementMap.get(a.element.type);return l?l.render(e,a):(console.warn(`${a.element.type} not impl`),p.exports.createElement("div",a.attributes,a.children))},renderLeaf:a=>this.textConfig?this.textConfig.render(e,a):p.exports.createElement("span",a.attributes,a.children),decorate:a=>d.process(a),onDOMBeforeInput:a=>{xe(e,()=>{switch(console.log(a.inputType),a.inputType){case"insertText":n(a);break;case"deleteContentBackward":r(a);break;case"insertParagraph":o(a);break;case"insertFromPaste":console.log(a);break}})},onKeyDown:a=>{xe(e,()=>{if(j("tab",a)){h(a);return}if(j(["ctrl+enter"],a)){c.insertText(e,`
`);return}if(j("enter",a)&&e.selection){const l=b.parent(e,e.selection.anchor.path);if(x.isBlock(e,l)&&!/paragraph|heading/.test(l.type)){c.insertText(e,`
`),a.preventDefault();return}}if(e.selection){if(j("meta+b",a)){V.toggleDecorator(e,e.selection,S.strong),a.preventDefault();return}if(j("meta+i",a)){V.toggleDecorator(e,e.selection,S.emphasis),a.preventDefault();return}}})},onSelect:a=>{const l=window.getSelection();l&&(l.isCollapsed?e.hidePopper():l.rangeCount>0&&(e.updatePopper(l.getRangeAt(0)),a.preventDefault(),a.stopPropagation()))},onBlur:a=>{e.hidePopper()}}}}function bt(t,e){return e.offset===0&&!u.hasPrevious(e.path)&&D.isText(b.get(t,e.path))}function xe(t,e){let n=!0;x.withoutNormalizing(t,()=>{e(()=>{n=!1})}),n||x.normalize(t)}const ke=M({type:"blockquote",isInline:!1,isLeaf:!1,isVoid:!1,wrappingParagraph:!0,render:(t,{children:e,attributes:n})=>i("blockquote",N(v({},n),{children:e})),toggle:{prefix:/^>$/,toggle:(t,e,n)=>{n?c.wrapNodes(t,{type:"blockquote",children:[]},{at:e}):c.unwrapNodes(t,{at:u.parent(e)})},onTrigger(){return!0}},events:{onStartDelete:(t,e)=>{const n=b.parent(t,u.parent(e));return I(n,"blockquote")?(ke.toggle.toggle(t,u.parent(e),!1),!0):!1}},toolbarItems:[]});var yt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ke});const Y=M({type:"heading",isInline:!1,isLeaf:!1,isVoid:!1,wrappingParagraph:!1,render:(t,{element:e,children:n,attributes:s})=>i(ne,{element:e,children:({active:r})=>p.exports.createElement(`h${e.depth}`,Object.assign(s,{className:U({active:r})}),n)}),toggle:{prefix:/^#{1,6}$/,estimatePrefixLength:6,toggle:(t,e,n)=>{n?c.setNodes(t,v({type:"heading"},n),{at:e}):(c.unsetNodes(t,"depth",{at:e}),c.setNodes(t,{type:"paragraph"},{at:e}))},onTrigger:t=>({depth:t.length})},events:{onStartEnter:(t,e)=>{const n=b.parent(t,e);return I(n,"heading")?(Y.toggle.toggle(t,u.parent(e),!1),!0):!1}},toolbarItems:[1,2,3,4,5,6].map(t=>{const e=(n,s)=>R(n,s,"heading",r=>r.depth===t);return{key:`heading-level-${t}`,icon:A(L,{children:["H",t]}),isActive:e,isDisabled:()=>!1,action:(n,s,r)=>{e(n,s)?Y.toggle.toggle(n,s,!1):Y.toggle.toggle(n,s,{depth:t})}}})});var _t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Y}),we=M({type:"image",isInline:!0,isVoid:!1,isLeaf:!1,render:(t,{element:e,attributes:n})=>i("img",v({alt:e.alt,src:e.url,title:e.title},n)),insert:(t,e,n)=>{c.insertNodes(t,[{text:" "},v({type:"image",children:[]},n),{text:" "}],{at:e})},toolbarItems:[]}),vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:we});B.add(he,me);const F=M({type:"list",isLeaf:!1,isInline:!1,isVoid:!1,wrappingParagraph:!0,normalize:(t,e,n,s)=>{if(e.children.length===0){c.removeNodes(t,{at:n}),s();return}if(u.hasPrevious(n)){const r=b.get(t,u.previous(n));if(I(r,"list")&&r.ordered===e.ordered&&r.spread===e.spread&&r.start===void 0){c.mergeNodes(t,{at:n}),s();return}}},render(t,{element:e,attributes:n,children:s}){return e.ordered?i("ol",N(v({},n),{start:e.start,children:s})):i("ul",N(v({},n),{children:s}))},toggle:{prefix:/^(?:-|\d+\.)$/,toggle:(t,e,n)=>{if(!I(b.get(t,e),"paragraph"))throw new Error("can only call ListNode.toggle on a paragraph node.");if(n===!1){const s=u.parent(e),r=u.next(u.parent(s));c.splitNodes(t,{at:s}),c.moveNodes(t,{at:r.concat(0),to:r}),c.unwrapNodes(t,{at:r}),c.select(t,{path:r,offset:0})}else{const s=u.parent(e),r=b.get(t,s);if(I(r,"listItem")){if(u.hasPrevious(s)){const o=Je(t,s);c.moveNodes(t,{at:s,to:o}),c.wrapNodes(t,v({type:"list",children:[]},n),{at:o})}}else c.wrapNodes(t,{type:"listItem",checked:void 0,spread:n.spread,children:[]},{at:e}),c.wrapNodes(t,v({type:"list",children:[]},n),{at:e})}},onTrigger:t=>t==="-"?{ordered:!1,start:void 0,spread:void 0}:{ordered:!0,start:parseInt(t),spread:void 0}},events:{},toolbarItems:[!0,!1].map(t=>{const e=(n,s)=>s.length>2&&R(n,u.parent(u.parent(s)),"list",r=>r.ordered===t);return{key:`list-${t?"ordered":"unordered"}`,icon:i($,{icon:t?he:me}),isActive:e,isDisabled:()=>!1,action:(n,s,r)=>{e(n,s)?F.toggle.toggle(n,s,!1):F.toggle.toggle(n,s,{ordered:t,start:void 0,spread:void 0})}}})});var xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:F});const kt=M({type:"listItem",isLeaf:!1,isInline:!1,isVoid:!1,wrappingParagraph:!0,normalize:(t,e,n)=>{const s=e.children.length-1;if(e.children.length>1&&I(e.children[s],"paragraph")){const r=u.next(n);c.moveNodes(t,{at:n.concat(s),to:r}),c.wrapNodes(t,{type:"listItem",checked:e.checked,spread:e.spread,children:[]},{at:r})}},render(t,{element:e,attributes:n,children:s}){return i("li",N(v({},n),{children:s}))},toggle:{},events:{onStartDelete:(t,e)=>(F.toggle.toggle(t,u.parent(e),!1),!0),onStartEnter:(t,e)=>b.string(b.get(t,e))?!1:(F.toggle.toggle(t,u.parent(e),!1),!0),onTab:(t,e)=>{const n=b.parent(t,u.parent(u.parent(e)));if(I(n,"list")){const{spread:s,ordered:r}=n;return F.toggle.toggle(t,u.parent(e),{spread:s,ordered:r,start:void 0}),!0}else return console.warn(`bad structure, expect a list at ${e}-2`),!1}},toolbarItems:[]});var wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:kt});const Nt=M({type:"paragraph",isLeaf:!1,isInline:!1,isVoid:!1,wrappingParagraph:!1,toggle:{},events:{},render(t,{element:e,attributes:n,children:s}){return i(ne,{element:e,children:({active:r})=>i("p",N(v({className:U({active:r})},n),{children:s}))})},toolbarItems:[]});var St=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Nt});const Tt={"./blockquote/BlockquoteNode.tsx":yt,"./code/CodeNode.tsx":et,"./heading/HeadingNode.tsx":_t,"./image/ImageNode.tsx":vt,"./link/LinkNode.tsx":gt,"./list/ListItemNode.tsx":wt,"./list/ListNode.tsx":xt,"./paragraph/ParagraphNode.tsx":St,"./text/TextNode.tsx":tt};function Et(t){for(const[e,{default:n}]of Object.entries(Tt))typeof(n==null?void 0:n.register)=="function"&&(console.debug("auto detected",e),n.register(t))}B.add(Z,ee,te,K);function Pt(t,e){var r;if(!e)return[];const n=(r=G.toSlateRange(t,e,{exactMatch:!0}))!=null?r:t.selection;return V.toolbarItems.concat(t.factory.inlineConfigs.flatMap(o=>o.toolbarItems)).map(({key:o,isDisabled:f,isActive:h,action:d,icon:y,tips:a})=>({key:o,disabled:n?f(t,n):!1,active:n?h(t,n):!1,icon:y,action:n?l=>d(t,n,l):()=>{},tips:a}))}function Ct(){const t=W(),e=p.exports.useRef(null),n=p.exports.useRef(),[s,r]=p.exports.useState(!0),o=_e();t.hidePopper=()=>r(!0);const f=p.exports.useMemo(()=>({getBoundingClientRect(){return n.current?n.current.getBoundingClientRect():{width:0,height:0}}}),[t,n]),{styles:h,attributes:d,update:y}=Fe(f,e.current,{placement:"top",modifiers:[{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,8]}}]}),a=Pt(t,n.current);return t.updatePopper=l=>{if(l){const _=!n.current;n.current=l,_&&setTimeout(()=>{t.updatePopper()},0)}a.length>0?(r(!1),y&&y()):r(!0),o()},i("div",N(v({className:"ti-hovering-toolbar",ref:e,style:N(v({},h.popper),{opacity:s?0:1,pointerEvents:s?"none":"initial"})},d.popper),{children:a.map(l=>i(ye,{action:l.action,active:l.active,disabled:l.disabled,icon:l.icon,tips:l.tips},l.key))}))}const J=p.exports.forwardRef(({disabled:t=!1,initialMarkdown:e=""},n)=>{const s=p.exports.useMemo(()=>{const _=new mt;return Et(_),_},[]),r=p.exports.useMemo(()=>{const _=Be($e(Ae()));return s.wrapEditor(_)},[]),o=p.exports.useMemo(()=>s.createDefaultEditableProps(r),[]),[f,h,d]=Ye(r);p.exports.useEffect(()=>{n&&(typeof n=="function"?n(f):n.current=f),f.markdown=e},[r]);const[y,a]=p.exports.useState();r.setActionForm=a;const l=p.exports.useMemo(()=>{if(y)return je.exports.createPortal(y,document.body)},[y]);return A(qe,{editor:r,onChange:d,value:h,children:[i(Ct,{}),i(Ve,v({as:"article",className:"ti-community-editor"},o)),l]})});J.displayName="TiEditor";J.propTypes={disabled:be.bool,initialMarkdown:be.string};J.defaultProps={disabled:!1,initialMarkdown:""};const Mt=`## \u5F15\u7528 (blockquote)

\`\`\`markdown
> blockquote
> 
> yeah
\`\`\`

> blockquote
> 
> yeah

- \u6DFB\u52A0\u5F15\u7528
  - \u8F93\u5165 \`>\` \u5E76\u8F93\u5165\u7A7A\u683C
- \u5220\u9664\u5F15\u7528
  - \u5728\u5F15\u7528\u8D77\u59CB\u5904\u70B9\u51FB \`<Backspace>\`
`;var It=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Mt});const Dt=`## Codes

### Usage

- \u8F93\u5165 \\\`\\\`\\\` \u52A0\u7A7A\u683C

### Examples

\`\`\`javascript
console.log('hello world')
\`\`\`

\`\`\`sql
SELECT * FROM hello_world;
\`\`\`

`;var Lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Dt});const Ot=`## \u6807\u9898

\`\`\`markdown
# h1
## h2
### h3
#### h4
##### h5
###### h6
\`\`\`

> # h1
> ## h2
> ### h3
> #### h4
> ##### h5
> ###### h6

- \u521B\u5EFA\u6807\u9898
  1. \u8F93\u5165 1-6 \u4E2A \`#\` \u5E76\u8F93\u5165\u7A7A\u683C
  2. \u5728\u6807\u9898\u4E2D\u95F4\u6216\u7ED3\u5C3E\u70B9\u51FB \`<Enter>\`
- \u5220\u9664\u6807\u9898
  - \u5728\u6807\u9898\u8D77\u59CB\u5904\u70B9\u51FB \`<Enter>\` \u4EE5\u5C06\u6807\u9898\u8F6C\u6362\u6210\u6BB5\u843D
`;var Rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Ot});const zt=`## \u94FE\u63A5

\`\`\`
[title](url)
\`\`\`

> [title](#)

- \u521B\u5EFA\u94FE\u63A5
  - \u8F93\u5165\u94FE\u63A5 url \u5E76\u8F93\u5165\u7A7A\u683C\u4F1A\u81EA\u52A8\u8F6C\u6362
`;var Ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:zt});const Bt=`## \u5217\u8868

\`\`\`markdown
- \u65E0\u5E8F\u5217\u8868
- ...
  - \u7F29\u8FDB\u5217\u8868

1. \u6709\u5E8F\u5217\u8868
\`\`\`

> - \u65E0\u5E8F\u5217\u8868
> - ...
>   - \u7F29\u8FDB\u5217\u8868
> 
> 1. \u6709\u5E8F\u5217\u8868 1
> 2. \u6709\u5E8F\u5217\u8868 2

\u4F7F\u7528\u4EE5\u4E0B\u65B9\u5F0F\u63A7\u5236 Markdown \u5217\u8868\uFF1A
- \u65B0\u5EFA\u5217\u8868\uFF1A
  1. \u8F93\u5165 \`-\` \u52A0\u7A7A\u683C\u63D2\u5165\u65E0\u5E8F\u5217\u8868
  2. \u8F93\u5165 \`number.\` \u52A0\u7A7A\u683C\u63D2\u5165\u6709\u5E8F\u5217\u8868
- \u5217\u8868\u7F29\u8FDB\uFF1A
  1. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`<Tab>\` \u751F\u6210\u4E0B\u7EA7\u5217\u8868 
  2. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`-\` \u6216 \`<number>\`\u3002
- \u53D6\u6D88\u5217\u8868
  1. \u5728\u7A7A\u5217\u8868\u9879\u4E2D\u76F4\u63A5\u8F93\u5165 \`<Enter>\`
`;var $t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Bt});const At={"./slate-markdown/elements/blockquote/instructions.md":It,"./slate-markdown/elements/code/instructions.md":Lt,"./slate-markdown/elements/heading/instructions.md":Rt,"./slate-markdown/elements/link/instructions.md":Ft,"./slate-markdown/elements/list/instructions.md":$t},jt=Object.values(At).map(t=>t.plainText).join(`

`);function qt(){const t=p.exports.useRef(null),[e,n]=p.exports.useState("");return p.exports.useEffect(()=>{const r=setInterval(()=>{var o,f;n((f=(o=t.current)==null?void 0:o.markdown)!=null?f:"")},1e3);return()=>clearInterval(r)},[]),A(L,{children:["\u5DE6\u8FB9\u662F\u7F16\u8F91\u5668\uFF0C\u53F3\u8FB9\u662F\u7F16\u8F91\u5668\u5185\u5BB9\u5B9E\u9645\u7684 markdown",i("button",{onClick:()=>{var o;const r=t.current.editor;we.insert(r,(o=r.selection)!=null?o:[r.children.length-1],{url:"https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png",alt:"",title:""})},children:"add img"}),A("div",{style:{display:"flex"},children:[i(J,{ref:t,initialMarkdown:jt}),i("textarea",{onChange:r=>{n(r.currentTarget.value),t.current.markdown=r.currentTarget.value},value:e})]})]})}He.render(i(Ue.StrictMode,{children:i(qt,{})}),document.getElementById("root"));
