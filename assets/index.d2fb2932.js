var pt=Object.defineProperty,ft=Object.defineProperties;var gt=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var fe=(t,e,n)=>e in t?pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e)=>{for(var n in e||(e={}))Se.call(e,n)&&fe(t,n,e[n]);if(te)for(var n of te(e))Ce.call(e,n)&&fe(t,n,e[n]);return t},z=(t,e)=>ft(t,gt(e));var ge=(t,e)=>{var n={};for(var r in t)Se.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&te)for(var r of te(t))e.indexOf(r)<0&&Ce.call(t,r)&&(n[r]=t[r]);return n};var I=(t,e,n)=>(fe(t,typeof e!="symbol"?e+"":e,n),n);import{E as O,u as de,r as T,a as m,j as p,c as Y,T as ne,l as q,f as Ne,b as Ae,d as X,F as j,e as he,g as me,h as ye,i as re,R as U,P,N as v,k as L,m as Re,n as dt,o as y,p as ze,q as H,s as Oe,t as ht,v as mt,w as yt,x as be,y as bt,z as _e,A as _t,B as vt,C as Ie,D as wt,G as xt,_ as se,H as oe,I as ve,J as De,K as Tt,L as je,M as Be,O as Le,Q as $e,S as Fe,U as kt,V as Pt,W as Et,X as Mt,Y as ae,Z as St,$ as Ct,a0 as Nt,a1 as At,a2 as Rt,a3 as zt,a4 as Ot,a5 as qe,a6 as It,a7 as He,a8 as Dt,a9 as jt}from"./vendor.8b3ca2ea.js";const Bt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};Bt();var x;(function(t){t[t.flow=16]="flow",t[t.list=32]="list",t[t.phrasing=48]="phrasing",t[t.staticPhrasing=49]="staticPhrasing",t[t.value=64]="value",t[t.table=80]="table",t[t.tableRow=96]="tableRow"})(x||(x={}));function V(t,e){return t===e||t<e&&(t^e)<16}function B(t){return z(N({},t),{register(e){e.define(t)}})}function R(t,e){return O.isElement(t)?e instanceof Array?e.indexOf(t.type)>=0:t.type===e:!1}function We({icon:t,active:e,disabled:n,action:r,tips:s}){const o=de(),a=T.exports.useCallback(d=>{r&&d.button===0&&(d.preventDefault(),d.stopPropagation(),n||m.withoutNormalizing(o,()=>{r(d)}))},[r]),c=p("span",{className:Y("a-editor-toolbar-item",{active:e,disabled:n}),onMouseDown:a,children:t});return s?p(ne,{content:p("span",{className:"toolbar-item-tips",children:s}),children:c}):c}q.add(Ne,Ae);function Lt({extraWidth:t,isEmpty:e,element:n,items:r,setActive:s}){return p(ne,{appendTo:"parent",arrow:!1,content:$t(r),hideOnClick:!1,interactive:!0,onHide:()=>s(!1),onShow:()=>s(!0),children:X("div",{className:"line-operations",contentEditable:!1,children:[p("span",{className:"icon",children:p(j,{icon:e?Ae:Ne})}),p("div",{className:"spacer",style:{width:t,height:"100%"}})]})})}const $t=t=>p("div",{className:"block-toolbar",children:t.map((e,n)=>p("div",{className:"toolbar-group",children:e.map(r=>p(We,{action:r.action,active:r.active,disabled:r.disabled,icon:r.icon,tips:r.tips},r.key))},n))});q.add(he,me,ye,re);function Ue(t,e){if(!!e)return typeof e=="function"?e(t):e}function Ft(t,e){const n=e==null?void 0:e.current;return n?t.factory.lineActions.map(r=>t.getActions(n,r).map(({action:{key:s,icon:o,tips:a},state:c})=>({key:s,disabled:c.disabled,active:c.active,icon:Ue(c,o),tips:Ue(c,a),action:d=>{t.runAction(s,n,d)}}))):[]}function Ve(){const[t,e]=T.exports.useState(0);return()=>{e(n=>n+1)}}const Ke=T.exports.createContext({getEditorDOMRect:()=>new DOMRect});function J({element:t,children:e}){const[n,r]=T.exports.useState(null),s=T.exports.useRef(),o=de(),a=Ft(o,s.current),c=Ve(),[d,w]=T.exports.useState(0),{getEditorDOMRect:i}=T.exports.useContext(Ke),b=T.exports.useCallback(()=>{var M;const g=(M=n==null?void 0:n.getBoundingClientRect())!=null?M:new DOMRect,{x:h=0}=g,{x:k}=i();return w(h-k),g},[i,n]);T.exports.useLayoutEffect(()=>{var g,h;if(n){const k=document.createRange();k.selectNode(n.childNodes.item(0));const M=U.toSlateRange(o,k,{exactMatch:!1});let A=P.common(M.anchor.path,M.focus.path);for(;A.length!==0;){if(m.isBlock(o,v.get(o,A))){s.current=m.pathRef(o,A);break}A=P.parent(A)}}else s.current&&((h=(g=s.current).unref)==null||h.call(g)),s.current=void 0},[n]);const[f,u]=T.exports.useState(!1),l=(()=>{const g=t.children[0];return t.children.length===1&&L.isText(g)&&g.text===""})();return Re()?typeof e=="function"?e({active:f,pathRef:s.current}):e:p(dt,{appendTo:document.body,arrow:!1,getReferenceClientRect:b,hideOnClick:!1,interactive:!0,interactiveBorder:12,offset:[0,8],onTrigger:c,placement:"left",popperOptions:{modifiers:[{name:"flip",options:{allowedAutoPlacements:["left"]}}]},ref:r,render:()=>p(Lt,{element:t,extraWidth:d,isEmpty:l,items:a,setActive:u}),children:typeof e=="function"?e({active:f,pathRef:s.current}):e})}const qt=["markdown","javascript","typescript","jsx","tsx","sql","bash","go","rust","json","log"],Z=Symbol("prism_token"),Qe=({attributes:t,element:e,children:n},r)=>p("pre",z(N({},t),{className:Y({active:r},e.lang?`language-${e.lang}`:void 0),children:p("code",{className:"prism-code",children:n})})),Ge=B({type:"code",isInline:!1,isLeaf:!1,wrappingParagraph:!1,contentType:x.flow,contentModelType:x.value,render:(t,e)=>{const{element:n}=e;return Re()?Qe(e,!1):p(J,{element:n,children:({active:s,pathRef:o})=>p(ne,{appendTo:document.body,content:p("select",{className:"lang-selector",contentEditable:!1,onChange:a=>{(o==null?void 0:o.current)&&y.setNodes(t,{lang:a.currentTarget.value},{at:o.current})},tabIndex:void 0,value:n.lang||void 0,children:qt.map(a=>p("option",{children:a},a))}),interactive:!0,placement:"top-start",children:Qe(e,s)})})},toggle:{prefix:/^`{3}(?: (\w+))?$/,toggle:(t,e,n)=>t.runAction("toggle-codeblock",e),onTrigger:(t,e,n)=>{if(n.length>1)return;const r=/^`{3}(?: (\w+))?$/.exec(t);return r?{lang:r[1]||"markdown",meta:void 0}:{lang:"markdown",meta:void 0}}},events:{},decorate:(t,[e,n],r)=>{if(L.isText(e)&&r.lang){const s=ze.languages[r.lang];if(!s)return[];const o=[],a=ze.tokenize(e.text,s);let c=0;for(const d of a){const w=Ye(d),i=c+w;typeof d!="string"&&o.push({[Z]:d.type,anchor:{path:n,offset:c},focus:{path:n,offset:i}}),c=i}return o}return[]}}),Ye=t=>typeof t=="string"?t.length:typeof t.content=="string"?t.content.length:t.content.reduce((e,n)=>e+Ye(n),0);var Ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SYMBOL_PRISM_TOKEN:Z,default:Ge}),S;(function(t){t.strong="strong",t.emphasis="emphasis",t.delete="delete",t.inlineCode="inlineCode"})(S||(S={}));const ee=B({isLeaf:!0,contentType:x.staticPhrasing,contentModelType:x.value,canContainsContentModelTypeOf:t=>t.inlineCode?x.value:(t.strong||t.emphasis||t.delete,x.phrasing),normalize:(t,e,n,r)=>{if(e.text===""){const s=[S.strong,S.emphasis,S.delete,S.inlineCode].filter(o=>!!e[o]);s.length>0&&y.unsetNodes(t,s,{at:n})}},render(t,{leaf:e,children:n,attributes:r}){let s=n;return e[Z]&&(s=p("span",{className:Y(e[Z]?`token ${e[Z]}`:void 0,r.className),children:s})),e.delete&&(s=p("del",{children:s})),e.emphasis&&(s=p("em",{children:s})),e.strong&&(s=p("strong",{children:s})),e.inlineCode&&(s=p("code",{children:s})),p("span",z(N({},r),{children:s}))},toggleDecorator:(t,e,n)=>{const r=Xe(t),s=o=>r(v.get(t,o.anchor.path),o.anchor.path);we(t,e,n)?H.isCollapsed(e)?s(e)&&m.addMark(t,n,!1):y.setNodes(t,{[n]:!1},{match:r,split:!0}):H.isCollapsed(e)?s(e)&&(m.addMark(t,n,!0),n===S.inlineCode?(m.addMark(t,S.inlineCode,!1),m.addMark(t,S.emphasis,!1),m.addMark(t,S.delete,!1)):m.addMark(t,S.inlineCode,!1)):(y.setNodes(t,{[n]:!0},{match:r,split:!0}),n===S.inlineCode?y.unsetNodes(t,[S.delete,S.emphasis,S.strong],{match:r,split:!0}):y.unsetNodes(t,S.inlineCode,{match:r,split:!0}))}});function we(t,e,n){if(!U.hasRange(t,e))return!1;const r=m.marks(t);return r?!!r[n]:!1}const le=(t,e)=>{const n=xe(t),[r]=m.nodes(t,{at:e,match:n});return!!r},Xe=t=>(e,n)=>{const r=xe(t);if(!L.isText(e))return!1;const s=v.parent(t,n);return O.isElement(s)?r(s,P.parent(n)):!1},xe=t=>(e,n)=>{if(O.isElement(e)){const r=t.factory.customElementMap.get(e.type);return r&&r.contentModelType?V(r.contentModelType,x.phrasing):!1}else return!1};function Te(t,e,n,r){if(H.isRange(e)){if(!U.hasRange(t,e))return!1}else if(P.isPath(e)){if(!m.hasPath(t,e))return!1}else if(!U.hasRange(t,{anchor:e,focus:e}))return!1;if(P.isPath(e)){const o=v.get(t,e);return R(o,n)&&(r?r(o):!0)}const[s]=m.nodes(t,{at:H.isRange(e)?m.unhangRange(t,e):e,match:o=>!m.isEditor(o)&&R(o,n)&&(r?r(o):!0)});return!!s}var Wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get TextNodeDecorator(){return S},isDecoratorActive:we,isRangeCustomTextPropsEnabled:le,isCustomTextPropsEnabled:Xe,isPhrasing:xe,isElementActive:Te,default:ee});q.add(Oe);const ke=B({type:"link",isInline:!0,isLeaf:!1,contentType:x.phrasing,contentModelType:x.staticPhrasing,normalize:(t,e,n,r)=>{v.string(e).trim().length===0&&(y.removeNodes(t,{at:n}),r())},render:(t,{element:e,attributes:n,children:r})=>p("a",z(N({href:e.url,onClick:()=>window.open(e.url,"_blank"),style:{display:"inline-flex",cursor:"pointer"}},n),{children:r})),insert:(t,e,s)=>{var o=s,{text:n}=o,r=ge(o,["text"]);y.insertNodes(t,[N({type:"link",children:[{text:n}]},r),{text:" "}],{at:e,select:!0}),ht.isPoint(e)&&y.move(t,{distance:1})},match:{regexp:mt()}});var Ut=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ke});class Vt{constructor(e,n){I(this,"state",[]);this.factory=e,this.editor=n}process(e){const[n,r]=e;if(m.isEditor(n))return this.state=[],[];if(O.isElement(n)){const s=this.factory.customElementMap.get(n.type);if(s&&!s.isInline){const o=s;if(o.decorate)return this.state.push({element:n,path:r,config:o}),[]}}if(this.state.length>0){for(const s of this.state.reverse())if(P.isAncestor(s.path,r))return s.config.decorate(this.editor,e,s.element)}return[]}}const Kt=yt({proto:!1,circles:!1});class Qt{constructor(){I(this,"blockConfigs",[]);I(this,"inlineConfigs",[]);I(this,"textConfig");I(this,"inlineSet",new Set);I(this,"voidSet",new Set);I(this,"customElementMap",new Map);I(this,"contentTypeMap",new Map);I(this,"contentModelTypeMap",new Map);I(this,"serializerPlugins",[]);I(this,"deserializerPlugins",[]);I(this,"serializeProcessor",be());I(this,"deserializeProcessor",be());I(this,"deserializeHTMLProcessor",be());I(this,"editorWrapHandlers",[]);I(this,"editorMountedHandlers",[])}freezeProcessors(){this.serializeProcessor.use(this.serializerPlugins).use(bt).use(_e).use(_t,{emphasis:"*",strong:"*",listItemIndent:"one",fence:"`",bullet:"-"}).freeze(),this.deserializeProcessor.use(vt).use(_e).use(Ie).use(this.deserializerPlugins).freeze(),this.deserializeHTMLProcessor.use(wt).use(xt).use(_e).use(Ie).use(this.deserializerPlugins).freeze()}configProcessor(...e){this.configSerializeProcessor(...e),this.configDeserializeProcessor(...e)}configSerializeProcessor(...e){this.serializerPlugins.push(...e)}configDeserializeProcessor(...e){this.deserializerPlugins.push(...e)}use(e){return e(this),this}define(e){return e.isLeaf?this.textConfig=e:(e.isInline?(this.inlineSet.add(e.type),this.inlineConfigs.push(e)):this.blockConfigs.push(e),this.customElementMap.set(e.type,e),this.contentModelTypeMap.set(e.type,e.contentModelType),this.contentTypeMap.set(e.type,e.contentType),e.contentModelType===null&&this.voidSet.add(e.type)),this}onWrapEditor(e){this.editorWrapHandlers.push(e)}onEditorMounted(e){this.editorMountedHandlers.push(e)}triggerEditorMounted(e){this.editorMountedHandlers.forEach(n=>n(e))}generateMarkdown(e){return this.serializeProcessor.stringify(this.serializeProcessor.runSync({type:"root",children:Kt(e)}))}parseMarkdown(e){return this.deserializeProcessor.processSync(e).result}wrapEditor(e,n){const{isVoid:r,isInline:s,normalizeNode:o,insertBreak:a,insertFragment:c,setFragmentData:d}=e;e.factory=this;function w(i){m.isEditor(i)?(console.group("#root"),i.children.forEach(w),console.groupEnd()):O.isElement(i)?(console.group(i.type),i.children.forEach(w),console.groupEnd()):console.debug("text")}return window.debugPrintTree=()=>w(e),window.debugEditor=e,Object.defineProperty(e,"markdown",{enumerable:!1,configurable:!0,get:()=>this.generateMarkdown(e.children),set:i=>{n(this.parseMarkdown(i)),m.setNormalizing(e,!0)}}),e.updatePopper=e.hidePopper=e.togglePopper=()=>{},e.isContent=(i,b)=>O.isElement(i)?this.contentTypeMap.get(i.type)===b:L.isText(i)?this.textConfig.contentType===b:!1,e.canContainsContent=(i,b)=>{if(m.isEditor(i))return b===x.flow;if(O.isElement(i)){const f=this.contentModelTypeMap.get(i.type);return f?V(b,f):!1}else return L.isText(i)?V(b,ee.canContainsContentModelTypeOf(i)):!1},e.getContentType=i=>O.isElement(i)?this.contentTypeMap.get(i.type)||null:L.isText(i)&&this.textConfig.contentType||null,e.getContentModelType=i=>m.isEditor(i)?x.flow:O.isElement(i)?this.contentModelTypeMap.get(i.type)||null:L.isText(i)?this.textConfig.contentModelType:null,e.getContentTypePair=i=>O.isElement(i)?[this.contentTypeMap.get(i.type)||null,this.contentModelTypeMap.get(i.type)||null]:L.isText(i)?[this.textConfig.contentType||null,this.textConfig.contentModelType||null]:[null,null],e.toggle=(i,b,f)=>{const u=e.canToggle(i,b,!0);if(!u)return!1;const[[l,_],g]=u,h=typeof f=="object"?f:{};switch(g){case Q.replace:return y.unsetNodes(e,Object.keys(v.extractProps(l)),{at:_}),y.setNodes(e,z(N({type:b.type},h),{children:[]}),{at:_}),!0;case Q.wrap:return y.wrapNodes(e,N({type:b.type},h),{at:_}),!0;case Q.custom:throw new Error("TODO: ToggleStrategy.custom");default:throw new Error("unknown ToggleStrategy: "+g)}},e.canToggle=(i,b,f)=>{const[u]=i,[l,_]=e.getContentTypePair(u);if(b.contentType!==l)return!1;if(b.contentModelType===_)return[i,Q.replace];if(b.contentModelType===l)return[i,Q.wrap];if(!f)return!1;const g=v.ancestors(e,i[1],{reverse:!0});for(const h of g){const k=e.canToggle(h,b,!1);if(k)return k}return!1},e.unwrap=(i,b)=>{if(!e.canUnwrap(i,b))return!1;const[f,u]=i,l=[[[]]];let _=[[f,[]]],g=0;for(;g<b.length-1;){const h=[];for(const[k,M]of _)for(const[A,C]of k.children.entries())h.push([C,M.concat(A)]);g+=1,_=h,l.push(h.map(([,k])=>k))}for(const h of l.reverse())for(const k of h.reverse())y.unwrapNodes(e,{at:u.concat(k),split:!0});return!0},e.canUnwrap=([i,b],f)=>{if(f.length===0)return!0;const u=e.getContentModelType(v.parent(e,b)),l=f[f.length-1].contentModelType;if(!u||!l||!V(l,u))return!1;let _=[[i,[]]],g=0;for(;g<f.length;){const h=[];for(const[k,M]of _){if(!R(k,f[g].type))return!1;for(const[A,C]of k.children.entries())h.push([C,M.concat(A)])}g+=1,_=h}return!0},e.wrap=(i,b,f)=>{if(!e.canWrap(i,b,f))return!1;const[,u]=i;let l=b.length-1;for(;l>=0;){const _=b[l],g=f[l];y.wrapNodes(e,Object.assign({type:_.type,children:[]},g),{at:u}),l--}return!0},e.canWrap=(i,b,f)=>{console.assert(b.length===f.length,"editor.canWrap: configs.length should be equals to params.length");const[u,l]=i,_=v.parent(e,l);let g=0,h=e.getContentModelType(_);for(;g<b.length;){const M=b[g];if(h===null||!V(M.contentType,h))return!1;h=M.contentModelType,g+=1}if(h===null)return!1;const k=e.getContentType(u);return k?V(k,h):!1},e.nearest=(i,b)=>{const[f,u]=i;if(R(f,b.type))return i;for(const l of v.ancestors(e,u,{reverse:!0}))if(R(l[0],b.type))return l},e.getAndRemoveMark=i=>{if(e.marks){const b=e.marks[i];return e.removeMark(i),b}},e.isVoid=i=>this.voidSet.has(i.type)||r(i),e.isInline=i=>this.inlineSet.has(i.type)||s(i),e.normalizeNode=i=>{let b=!0;const f=()=>{b=!1};m.withoutNormalizing(e,()=>{var _;const[u,l]=i;if(O.isElement(u)){const g=(_=this.customElementMap.get(u.type))==null?void 0:_.normalize;g&&g(e,u,l,f)}L.isText(u)&&this.textConfig.normalize&&this.textConfig.normalize(e,u,l,f),m.isEditor(u)&&(u.children.length===0?y.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[0]}):R(u.children[u.children.length-1],"paragraph")||y.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[u.children.length]}))}),b&&o(i)},e.insertBreak=()=>{if(e.selection){const i=v.parent(e,e.selection.anchor.path);if(e.getContentModelType(i)!==x.phrasing){y.insertText(e,`
`);return}}a()},e.insertFragment=i=>{if(e.selection){const b=v.parent(e,e.selection.anchor.path);if(e.getContentModelType(b)===x.value){const u=this.serializeProcessor.stringify(this.serializeProcessor.runSync({type:"root",children:i}));y.insertText(e,u);return}}c(i)},e.setFragmentData=i=>{d(i),i.setData("text/plain",this.generateMarkdown(e.getFragment()))},this.editorWrapHandlers.forEach(i=>i(e)),e}createDefaultEditableProps(e){const n=l=>{var g;const{selection:_}=e;if(_&&H.isCollapsed(_)){const h=_.anchor,k=v.get(e,h.path),M=v.parent(e,h.path);if(L.isText(k)&&O.isElement(M)&&M.type==="paragraph"&&l.data===" "&&!P.hasPrevious(h.path)){const A=k.text.slice(0,h.offset);for(const{toggle:C}of this.blockConfigs)if(!(typeof C.estimatePrefixLength=="number"&&A.length>C.estimatePrefixLength)&&((g=C.prefix)==null?void 0:g.test(A))){const D=C.onTrigger(A,e,P.parent(h.path));if(typeof D!="undefined"){y.delete(e,{at:{path:h.path,offset:0},distance:h.offset}),C.toggle(e,P.parent(h.path),D),l.preventDefault();return}}}if(L.isText(k)&&!R(M,"link")&&l.data===" "){for(const A of this.inlineConfigs)if(A.match){const C=A.match.regexp.exec(k.text.slice(0,h.offset));if(C){const D=C[0],K=C.index,ct=C.index+D.length,ut={anchor:{path:h.path,offset:K},focus:{path:h.path,offset:ct}};ke.insert(e,ut,{url:D,title:"",text:D}),l.preventDefault();return}}}if(m.isInline(e,M)){const A=P.parent(h.path).concat(M.children.length);y.insertNodes(e,{text:l.data||""},{at:A}),y.move(e,{distance:1}),l.preventDefault();return}}},r=l=>_=>{const{selection:g}=e;if(g&&H.isCollapsed(g)){const h=g.anchor;if(Gt(e,h)){const k=P.parent(h.path),M=v.get(e,k);if(O.isElement(M)){const A=this.customElementMap.get(M.type);if(A){const C=l(A.events);if(C&&C(e,h.path)){_.preventDefault();return}}if(M.type==="paragraph"){const C=v.parent(e,k);if(!P.hasPrevious(k)&&O.isElement(C)){const D=this.customElementMap.get(C.type);if(D==null?void 0:D.wrappingParagraph){const K=l(D.events);if(K&&K(e,h.path)){_.preventDefault();return}}}}}}}},s=r(l=>l.onStartDelete),o=r(l=>l.onStartEnter),c=(l=>_=>{const{selection:g}=e;if(g&&H.isCollapsed(g)){const h=g.anchor,k=P.parent(h.path),M=v.parent(e,h.path);if(O.isElement(M)){const A=this.customElementMap.get(M.type);if(A){const C=l(A.events);if(C&&C(e,h.path)){_.preventDefault();return}}if(M.type==="paragraph"){const C=v.parent(e,k);if(O.isElement(C)){const D=this.customElementMap.get(C.type);if(D==null?void 0:D.wrappingParagraph){const K=l(D.events);if(K&&K(e,h.path)){_.preventDefault();return}}}}}}})(l=>l.onTab),d=new Vt(this,e),w=l=>d.process(l),i=(l,_)=>{const g=_?m.rangeRef(e,_):null;e.uploadFile&&Promise.all(l.map(e.uploadFile)).then(h=>h.map((k,M)=>({type:"image",url:k,title:void 0,alt:l[M].name,children:[{text:""}]}))).then(h=>{var k;y.insertNodes(e,h,{at:(k=g==null?void 0:g.current)!=null?k:m.last(e,[])[1]})}).catch(console.error)},b=(l,_)=>{const g=[...l.files].filter(h=>/image\/*/.test(h.type));g.length>0&&i(g,_)};return{renderElement:l=>{const _=this.customElementMap.get(l.element.type);return _?_.render(e,l):(console.warn(`${l.element.type} not impl`),T.exports.createElement("div",l.attributes,l.children))},renderLeaf:l=>this.textConfig?this.textConfig.render(e,l):T.exports.createElement("span",l.attributes,l.children),decorate:w,onDOMBeforeInput:l=>{Je(e,()=>{switch(console.log(l.inputType),l.inputType){case"insertText":n(l);break;case"deleteContentBackward":s(l);break;case"insertParagraph":o(l);break}})},onKeyDown:l=>{Je(e,()=>{if(se("tab",l)){c(l);return}if(se(["ctrl+enter"],l)){y.insertText(e,`
`);return}if(e.selection){if(se("meta+b",l)){ee.toggleDecorator(e,e.selection,S.strong),l.preventDefault();return}if(se("meta+i",l)){ee.toggleDecorator(e,e.selection,S.emphasis),l.preventDefault();return}}})},onSelect:l=>{const _=window.getSelection();_&&(_.isCollapsed?e.hidePopper():_.rangeCount>0&&e.updatePopper(_.getRangeAt(0)))},onBlur:l=>{e.hidePopper()},onClick:()=>{},onPaste:l=>{const _=l.clipboardData;if(!!_){if(_.types.indexOf("application/x-slate-fragment")<0){if(_.types.indexOf("text/html")>=0){const g=_.getData("text/html"),h=this.deserializeHTMLProcessor.processSync(g).result;e.insertFragment(h),l.preventDefault()}else if(_.types.indexOf("text/plain")>=0){const g=_.getData("text/plain"),h=this.deserializeProcessor.processSync(g).result;e.insertFragment(h),l.preventDefault()}}b(_,e.selection)}},onDrop:l=>{b(l.dataTransfer,U.findEventRange(e,l))}}}}function Gt(t,e){return e.offset===0&&!P.hasPrevious(e.path)&&L.isText(v.get(t,e.path))}function Je(t,e){let n=!0;m.withoutNormalizing(t,()=>{e(()=>{n=!1})}),n||m.normalize(t)}q.add(oe);const $=B({type:"blockquote",isInline:!1,isLeaf:!1,wrappingParagraph:!0,contentType:x.flow,contentModelType:x.flow,render:(t,{children:e,attributes:n})=>p("blockquote",z(N({},n),{children:e})),toggle:{prefix:/^>$/,toggle:(t,e,n)=>n?t.runAction("indent-blockquote",e):!1,onTrigger(){return!0}},events:{onStartDelete:(t,e)=>{const n=v.parent(t,P.parent(e));return R(n,"blockquote")?t.runAction("outdent-blockquote",P.parent(e)):!1}}});var Yt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$});const Xt=t=>{let e=!1,n=!1;const r=()=>{e=!0,t.preventDefault()},s=()=>{n=!0,t.stopPropagation()};return{nativeEvent:t,currentTarget:t.currentTarget,target:t.target,bubbles:t.bubbles,cancelable:t.cancelable,defaultPrevented:t.defaultPrevented,eventPhase:t.eventPhase,isTrusted:t.isTrusted,preventDefault:r,isDefaultPrevented:()=>e,stopPropagation:s,isPropagationStopped:()=>n,persist:()=>{},timeStamp:t.timeStamp,type:t.type}};var E;(function(t){t.selection="selection",t.phrasing="phrasing",t.toplevel="toplevel"})(E||(E={}));function Jt({key:t,type:e,tips:n,defaultParams:r={},action:s,computeState:o,hotkeys:a,icon:c}){const d=N({active:!1,disabled:!1},r),w={key:t,type:e,hotkeys:a!=null?a:[],tips:n!=null?n:null,icon:c!=null?c:null,computeState:o!=null?o:()=>d,action:(i,b,f)=>{const u=w.computeState(i,b);return console.log("run action",t,b,u),u.disabled?!1:s(i,b,u,f)}};return w}function ie(t,e,n){const r=n!=null?n:t.selection;if(!!r)switch(e){case E.phrasing:{const s=m.path(t,r),o=v.get(t,s);if(t.getContentModelType(o)===x.phrasing||!L.isText(o)&&t.getContentType(o)===x.flow)return s;for(const[c,d]of v.ancestors(t,s))if(t.getContentModelType(c)===x.phrasing)return d;break}case E.selection:return m.range(t,r);case E.toplevel:{const s=m.path(t,r);if(s.length>=1)return[s[0]];break}}}function Zt(t){t.actions=[],t.actionMap=new Map,t.actionTypes={[E.selection]:[],[E.phrasing]:[],[E.toplevel]:[]},t.defineAction=e=>{const n=Jt(e);t.actionMap.set(n.key,n),t.actionTypes[n.type].push(n),t.actions.push(n)},t.onWrapEditor(e=>{e.runAction=(n,r,s)=>{const o=t.actionMap.get(n);if(!o||(r=ie(e,o.type,r),!r))return!1;const a=r;let c;return m.withoutNormalizing(e,()=>{c=o.action(e,a,s!=null?s:Xt(new Event("fake")))}),c},e.getActions=(n,r)=>{let s=t.actions;r&&(s=r.map(a=>t.actionMap.get(a)).filter(a=>!!a));const o={[E.toplevel]:ie(e,E.toplevel,n),[E.selection]:ie(e,E.selection,n),[E.phrasing]:ie(e,E.phrasing,n)};return s.map(a=>{const c=o[a.type];return{state:c?a.computeState(e,c):{active:!1,disabled:!0},action:a}})}}),t.lineActions||(t.lineActions=[["toggle-heading-1","toggle-heading-2","toggle-heading-3","toggle-heading-4","toggle-heading-5","toggle-heading-6"],["toggle-ordered-list","toggle-unordered-list","indent-list","outdent-list"],["toggle-blockquote","toggle-codeblock","toggle-table"]]),t.selectionActions||(t.selectionActions=[S.strong,S.emphasis,S.delete,S.inlineCode,"toggle-link","table-insert-row-right","table-insert-row-left","table-insert-row-above","table-insert-row-below"])}function en(t){t.defineAction({key:"toggle-blockquote",icon:p(j,{icon:oe}),type:E.phrasing,computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,$),o=!!s;let a;return s?a=!e.canUnwrap(s,[$]):a=!e.canToggle(r,$,!1),{active:o,disabled:a,blockquoteEntry:s}},action:(e,n,r)=>{if(r.active){if(r.blockquoteEntry)return e.unwrap(r.blockquoteEntry,[$])}else return e.toggle([v.get(e,n),n],$,void 0);return!1}}),t.defineAction({key:"indent-blockquote",icon:p(j,{icon:oe}),type:E.phrasing,computeState:(e,n)=>({active:!1,disabled:!e.canToggle([v.get(e,n),n],$,!1)}),action:(e,n)=>e.toggle([v.get(e,n),n],$,void 0)}),t.defineAction({key:"outdent-blockquote",icon:p(j,{icon:oe}),type:E.phrasing,computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,$),o=!!s,a=!s||!e.canUnwrap(s,[$]);return{active:o,disabled:a,blockquoteEntry:s}},action:(e,n,r)=>r.blockquoteEntry?e.unwrap(r.blockquoteEntry,[$]):!1})}var tn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:en});function nn(t){t.defineAction({key:"toggle-codeblock",type:E.phrasing,icon:p(j,{icon:re}),computeState:(e,n)=>{const r=v.get(e,n),s=R(r,"code");let o;if(s)o=!1;else{const a=v.parent(e,n),c=e.getContentModelType(a);c?o=!V(Ge.contentType,c):o=!0}return{active:s,disabled:o}},action:(e,n,r)=>{const s=v.get(e,n);if(r.active)y.unsetNodes(e,Object.keys(v.extractProps(s)),{at:n}),y.setNodes(e,{type:"paragraph"},{at:n});else{const o=v.string(s);y.removeNodes(e,{at:n}),y.insertNodes(e,{type:"code",lang:"markdown",meta:void 0,children:[{text:o}]},{at:n,select:!0})}return!0}})}var rn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:nn});const ce=B({type:"heading",isInline:!1,isLeaf:!1,wrappingParagraph:!1,contentType:x.flow,contentModelType:x.phrasing,render:(t,{element:e,children:n,attributes:r})=>p(J,{element:e,children:({active:s})=>T.exports.createElement(`h${e.depth}`,Object.assign(r,{className:Y({active:s})}),n)}),toggle:{prefix:/^#{1,6}$/,estimatePrefixLength:6,toggle:(t,e,n)=>{n?t.runAction(`toggle-heading-${n.depth}`,e):t.runAction("toggle-paragraph",e)},onTrigger:t=>({depth:t.length})},events:{onStartEnter:(t,e)=>t.runAction("toggle-paragraph",e)}});var sn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ce});q.add(ve);const G=B({type:"paragraph",isLeaf:!1,isInline:!1,wrappingParagraph:!1,contentType:x.flow,contentModelType:x.phrasing,toggle:{},events:{},render(t,{element:e,attributes:n,children:r}){return p(J,{element:e,children:({active:s})=>p("p",z(N({className:Y({active:s})},n),{children:r}))})}});var on=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:G});function an(t){[1,2,3,4,5,6].forEach(e=>{const n=`H${e}`;t.defineAction({key:`toggle-heading-${e}`,type:E.phrasing,defaultParams:{depth:e},icon:p("span",{children:n}),computeState:(r,s)=>{const o=[v.get(r,s),s],a=r.nearest(o,ce),c=!!a&&a[0].depth===e;let d;return a?d=!r.canToggle(a,G,!1):d=!r.canToggle(o,ce,!0),{active:c,disabled:d,depth:e}},action:(r,s,o)=>{const a=[v.get(r,s),s];return o.active?r.toggle(a,G,void 0):r.toggle(a,ce,{depth:e})}})})}var ln=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:an});function Ze(t,e){e&&(typeof e=="function"?e(t):e.current=t)}function cn(t,e){return n=>{Ze(n,t),Ze(n,e)}}const Pe=T.exports.forwardRef(function(s,r){var{children:t,attributes:o}=s,a=o,{ref:e}=a,n=ge(a,["ref"]);return p("span",z(N({className:"void-element",contentEditable:!1,ref:cn(r,e)},n),{children:t}))});Pe.displayName="VoidElement";q.add(De);const et=B({type:"image",isInline:!0,isLeaf:!1,contentType:x.staticPhrasing,contentModelType:null,render:(t,{element:e,attributes:n,children:r})=>X(Pe,{attributes:n,children:[p("img",{alt:e.alt,src:e.url,title:e.title}),r]}),insert:(t,e,n)=>{y.insertNodes(t,[{text:" "},N({type:"image",children:[]},n),{text:" "}],{at:e})}});var un=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:et});function pn({schema:t,onSubmit:e,defaultValues:n}){return p("div",{contentEditable:!1,children:p(Tt,{className:"action-form",formData:n,onSubmit:r=>e(r.formData),schema:t})})}function fn(t,e){return T.exports.useCallback(()=>t.selection?U.toDOMRange(t,t.selection).getBoundingClientRect():e.getBoundingClientRect(),[t,e])}function gn(t,e){return T.exports.useCallback(()=>{t("user canceled"),e.current&&e.current.hide()},[t])}function dn(){const t=T.exports.useRef(),e=T.exports.useCallback(n=>{t.current=n},[t]);return[t,e]}function hn(t,e,n,r){const s=T.exports.useCallback(o=>{var a;e(o),(a=r.current)==null||a.hide()},[e,r]);return T.exports.useMemo(()=>p(pn,{defaultValues:n,onSubmit:s,schema:t}),[t,s])}function mn({editor:t,el:e,reject:n,resolve:r,schema:s,defaultValues:o}){const[a,c]=dn(),d=fn(t,e),w=gn(n,a),i=hn(s,r,o,a);return p(ne,{content:i,getReferenceClientRect:d,interactive:!0,onClickOutside:w,onMount:c,placement:"right-start",visible:!0,children:p("span",{})})}function Ee(t,e,n,r){return new Promise((s,o)=>{t.setActionForm(p(mn,{defaultValues:r,editor:t,el:e,reject:o,resolve:s,schema:n}))}).catch(s=>{if(s==="user canceled")return Promise.resolve(void 0);throw s})}const yn="\u6DFB\u52A0\u56FE\u7247",bn="object",_n={src:{title:"\u94FE\u63A5",type:"string",format:"url"},alt:{title:"\u66FF\u4EE3\u6587\u672C\uFF08alt\uFF09",type:"string"}},vn=["src","alt"];var wn={title:yn,type:bn,properties:_n,required:vn};function xn(t){t.defineAction({key:"toggle-image",type:E.selection,icon:p(j,{icon:De}),computeState:(e,n)=>{const r=Te(e,n,"image"),s=!P.equals(P.parent(n.focus.path),P.parent(n.anchor.path))||!le(e,n);return{active:r,disabled:s}},action:(e,n,r,s)=>{if(r.active)return y.unwrapNodes(e,{at:m.unhangRange(e,n),match:o=>!m.isEditor(o)&&O.isElement(o)&&o.type==="image"}),!0;{const o=m.rangeRef(e,n);return Ee(e,s.target,wn,{alt:m.string(e,n),src:""}).then(a=>{if(!!o.current&&a){const{src:c,alt:d}=a;m.withoutNormalizing(e,()=>{et.insert(e,n,{url:c,title:"",alt:d})})}}).finally(()=>{o.unref()}),!1}}})}var Tn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:xn});const kn="\u6DFB\u52A0\u8D85\u94FE\u63A5",Pn="object",En={src:{title:"\u94FE\u63A5",type:"string",format:"url"},text:{title:"\u663E\u793A\u6587\u672C",type:"string"}},Mn=["src","text"];var Sn={title:kn,type:Pn,properties:En,required:Mn};function Cn(t){t.defineAction({key:"toggle-link",type:E.selection,icon:p(j,{icon:Oe}),computeState:(e,n)=>{const r=Te(e,n,"link"),s=!P.equals(P.parent(n.focus.path),P.parent(n.anchor.path))||!le(e,n);return{active:r,disabled:s}},action:(e,n,r,s)=>{if(r.active)return y.unwrapNodes(e,{at:m.unhangRange(e,n),match:o=>!m.isEditor(o)&&O.isElement(o)&&o.type==="link"}),!0;{const o=m.rangeRef(e,n);return Ee(e,s.target,Sn,{text:m.string(e,n),src:""}).then(a=>{if(!!o.current&&a){const{src:c,text:d}=a;m.withoutNormalizing(e,()=>{ke.insert(e,n,{url:c,title:"",text:d})})}}).finally(()=>{o.unref()}),!1}}})}var Nn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Cn});q.add(je,Be);const W=B({type:"listItem",isLeaf:!1,isInline:!1,wrappingParagraph:!0,contentType:x.list,contentModelType:x.flow,normalize:(t,e,n,r)=>{if(e.children.length>0)if(R(e.children[0],"list")){y.moveNodes(t,{at:n.concat(0),to:P.parent(n)}),r();return}else{const a=e.children.length-1;if(e.children.length>1&&R(e.children[a],"paragraph")){const c=P.next(n);y.moveNodes(t,{at:n.concat(a),to:c}),y.wrapNodes(t,{type:"listItem",checked:e.checked,spread:e.spread,children:[]},{at:c}),r();return}}else{y.removeNodes(t,{at:n}),r();return}const s=v.parent(t,n);t.getContentModelType(s)!==x.list&&(y.wrapNodes(t,{type:"list",ordered:!1,start:void 0,spread:void 0,children:[]},{at:n}),r())},render(t,{element:e,attributes:n,children:r}){return p("li",z(N({},n),{children:r}))},toggle:{},events:{onStartDelete:(t,e)=>t.runAction("outdent-list",P.parent(e)),onStartEnter:(t,e)=>v.string(v.get(t,e))?!1:t.runAction("outdent-list",P.parent(e)),onTab:(t,e)=>t.runAction("indent-list",P.parent(e))}});var An=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:W});q.add(Le,$e);const F=B({type:"list",isLeaf:!1,isInline:!1,wrappingParagraph:!0,contentType:x.flow,contentModelType:x.list,normalize:(t,e,n,r)=>{if(e.children.length===0){y.removeNodes(t,{at:n}),r();return}if(P.hasPrevious(n)){const s=v.get(t,P.previous(n));if(R(s,"list")&&Boolean(s.ordered)===Boolean(e.ordered)&&s.start===void 0&&e.start===void 0){y.mergeNodes(t,{at:n}),r();return}}},render(t,{element:e,attributes:n,children:r}){return e.ordered?p("ol",z(N({},n),{start:e.start,children:r})):p("ul",z(N({},n),{children:r}))},toggle:{prefix:/^(?:-|\d+\.)$/,toggle:(t,e,n)=>{if(n===!1)throw new Error("should never reach");{let r;return t.runActionParams=n,t.nearest([v.get(t,e),e],F)?r=t.runAction("indent-list",e):r=t.runAction(`toggle-${n.ordered?"ordered":"unordered"}-list`,e),t.runActionParams=void 0,r}},onTrigger:t=>{if(t==="-")return{ordered:!1,start:void 0,spread:void 0};{const e=parseInt(t);return{ordered:!0,start:e===1?void 0:e,spread:void 0}}}},events:{}});var Rn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:F});const tt=t=>{let e,n;if(t.runActionParams&&typeof t.runActionParams=="object"){const{ordered:r,start:s}=t.runActionParams;typeof r=="boolean"&&(e=r),typeof s=="number"&&(n=s)}return{ordered:e,start:n}};function zn(t){t.defineAction({key:"indent-list",type:E.phrasing,icon:p(j,{icon:je}),computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,W),o=e.nearest(s!=null?s:r,F),a=!1,c=!o||!s||!P.hasPrevious(s[1])||o[0].children.length<=1;return N({active:a,disabled:c,listEntry:o,listItemEntry:s},tt(e))},action:(e,n,r)=>{var a;const{listEntry:s,listItemEntry:o}=r;return!o||!s?!1:e.wrap(o,[W,F],[{spread:void 0,checked:void 0},{ordered:(a=r.ordered)!=null?a:s[0].ordered,spread:void 0,start:r.start}])?(y.mergeNodes(e,{at:o[1]}),!0):!1}}),t.defineAction({key:"outdent-list",type:E.phrasing,icon:p(j,{icon:Be}),computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,W),o=e.nearest(s!=null?s:r,F);return{active:!1,disabled:!o||!s,listEntry:o,listItemEntry:s}},action:(e,n,r)=>{const{listEntry:s,listItemEntry:o}=r;if(!o||!s)return!1;const a=m.pathRef(e,o[1]),c=P.next(o[1]);if(m.hasPath(e,c)&&y.splitNodes(e,{at:c}),y.splitNodes(e,{at:o[1]}),a.current){const d=P.parent(a.current),w=[v.get(e,d),d];e.unwrap(w,[F,W]),y.splitNodes(e,{at:d})}return a.unref(),!0}}),[!0,!1].forEach(e=>{const n={ordered:e,spread:void 0,start:void 0},r={spread:void 0,checked:void 0};t.defineAction({key:`toggle-${e?"ordered":"unordered"}-list`,type:E.phrasing,icon:p(j,{icon:e?Le:$e}),computeState:(s,o)=>{const a=[v.get(s,o),o],c=s.nearest(a,F),d=c?Boolean(c[0].ordered)===Boolean(e):!1;let w;return c?d?w=!s.canUnwrap(c,[F,W]):w=!0:w=!s.canWrap(a,[F,W],[n,r]),{active:d,disabled:w,listEntry:c}},action:(s,o,a)=>{const c=[v.get(s,o),o],{ordered:d,start:w}=tt(s);return a.listEntry?a.active?s.unwrap(a.listEntry,[F,W]):(y.setNodes(s,{ordered:d,start:w},{at:a.listEntry[1]}),!0):s.wrap(c,[F,W],[Object.assign({},n,{start:w}),r])}})})}var On=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:zn});function In(t){t.defineAction({key:"toggle-paragraph",type:E.phrasing,icon:p(j,{icon:ve}),computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,G),o=!!s;let a;return s?a=!0:a=!e.canToggle(r,G,!0),{active:o,disabled:a}},action:(e,n,r)=>{const s=[v.get(e,n),n];return r.active?!1:e.toggle(s,G,void 0)}}),t.defineAction({key:"insert-paragraph",type:E.toplevel,icon:p(j,{icon:ve}),computeState:()=>({active:!1,disabled:!1}),action:(e,n,r)=>(y.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:n}),!0)})}var Dn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:In});const ue=T.exports.createContext({isHeader:!1});var jn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",TableContext:ue});const nt=B({type:"tableCell",isInline:!1,isLeaf:!1,contentType:x.tableRow,contentModelType:x.phrasing,wrappingParagraph:!1,events:{},toggle:{},render:(t,{element:e,attributes:n,children:r})=>p(ue.Consumer,{children:({isHeader:s})=>s?p("th",z(N({},n),{children:r})):p("td",z(N({},n),{children:r}))})});var Bn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:nt});q.add(Fe);const rt=B({type:"table",isInline:!1,isLeaf:!1,contentType:x.flow,contentModelType:x.table,wrappingParagraph:!1,events:{},toggle:{},render:(t,{element:e,attributes:n,children:r})=>{const[s,...o]=r,a={isHeader:!0,align:e.align},c={isHeader:!1,align:e.align};return p(J,{element:e,children:X("table",z(N({},n),{children:[p(ue.Provider,{value:a,children:p("thead",{children:s})}),p(ue.Provider,{value:c,children:p("tbody",{children:o})})]}))})}});var Ln=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:rt});const $n=B({type:"tableRow",isInline:!1,isLeaf:!1,contentType:x.table,contentModelType:x.tableRow,wrappingParagraph:!1,events:{},toggle:{},render:(t,{element:e,attributes:n,children:r})=>p("tr",z(N({},n),{children:r}))});var Fn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$n});const qn="\u6DFB\u52A0\u56FE\u7247",Hn="object",Wn={cols:{title:"\u5217\u6570",type:"number",min:2},rows:{title:"\u884C\u6570",type:"number",min:2}},Un=["cols","rows"];var Vn={title:qn,type:Hn,properties:Wn,required:Un};const Kn=t=>{let e,n;if(t.runActionParams&&typeof t.runActionParams=="object"){const{rows:r,cols:s}=t.runActionParams;typeof r=="boolean"&&(e=r),typeof s=="number"&&(n=s)}return{rows:e,cols:n}},Me=t=>t.children.length>0?t.children[0].children.length:0;function st(t,e,n){let r;return t.selection&&([r]=m.nodes(t,{at:t.selection,mode:"lowest",match:s=>R(s,"tableRow")})),r?r[1]:e.concat(n)}function ot(t,e){let n;if(t.selection){const r=t.selection.focus.path,s=t.nearest([v.get(t,r),r],nt);s&&(n=s[1][s[1].length-1])}return typeof n!="number"&&(n=e),n}function at(t,e,n){y.insertNodes(t,{type:"tableRow",children:Array(n).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))},{at:e})}function lt(t,e,n){for(const[r]of Array(e[0].children.length).fill(0).entries()){const s=e[1].concat(r,n);y.insertNodes(t,{type:"tableCell",children:[{text:""}]},{at:s})}}function Qn(t){t.defineAction({key:"toggle-table",type:E.phrasing,icon:p(j,{icon:Fe}),computeState:(e,n)=>{const r=v.get(e,n),s=R(r,"table");let o,a;if(s)a=!1,o=[r,n];else{const c=v.parent(e,n),d=e.getContentModelType(c);d?a=!V(rt.contentType,d):a=!0}return{active:s,disabled:a,tableEntry:o}},action:(e,n,r,s)=>{if(Kn(e),r.active){if(!r.tableEntry)return!1;const[o,a]=r.tableEntry,c=[...v.texts(o)].map(([d])=>d.text).join(" ");return y.removeNodes(e,{at:a}),y.insertNodes(e,{type:"paragraph",children:[{text:c}]},{at:a}),!0}else{const o=m.pathRef(e,n);return Ee(e,s.target,Vn,{cols:2,rows:2}).then(a=>{const c=o.current;!c||a&&m.withoutNormalizing(e,()=>{const{cols:d,rows:w}=a;y.removeNodes(e,{at:c}),y.insertNodes(e,{type:"table",align:void 0,children:Array(w).fill(0).map(()=>({type:"tableRow",children:Array(d).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))}))},{at:c})})}).finally(()=>o.unref()),!0}}}),t.defineAction({key:"table-insert-row-above",type:E.selection,icon:p(kt,{}),computeState:(e,n)=>{const[r]=m.nodes(e,{at:n,mode:"lowest",match:s=>R(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[s,o]=r.tableEntry,a=st(e,o,0),c=Me(s);return at(e,a,c),!0}}),t.defineAction({key:"table-insert-row-below",type:E.selection,icon:p(Pt,{}),computeState:(e,n)=>{const[r]=m.nodes(e,{at:n,mode:"lowest",match:s=>R(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[s,o]=r.tableEntry,a=st(e,o,s.children.length-1);a[a.length-1]+=1;const c=Me(s);return at(e,a,c),!0}}),t.defineAction({key:"table-insert-row-left",type:E.selection,icon:p(Et,{}),computeState:(e,n)=>{const[r]=m.nodes(e,{at:n,mode:"lowest",match:s=>R(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const s=ot(e,0);return lt(e,r.tableEntry,s),!0}}),t.defineAction({key:"table-insert-row-right",type:E.selection,icon:p(Mt,{}),computeState:(e,n)=>{const[r]=m.nodes(e,{at:n,mode:"lowest",match:s=>R(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const s=ot(e,Me(r.tableEntry[0])-1)+1;return lt(e,r.tableEntry,s),!0}})}var Gn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Qn});function Yn(t){[{key:S.strong,icon:he,tips:p(ae,{children:"\u52A0\u7C97"})},{key:S.emphasis,icon:me,tips:p(ae,{children:"\u659C\u4F53"})},{key:S.inlineCode,icon:re,tips:p(ae,{children:"\u884C\u5185\u4EE3\u7801"})},{key:S.delete,icon:ye,tips:p(ae,{children:"\u5220\u9664"})}].forEach(({icon:e,key:n,tips:r})=>{t.defineAction({key:n,type:E.selection,icon:p(j,{icon:e}),tips:r,computeState:(s,o)=>{const a=we(s,o,n),c=!le(s,o);return{active:a,disabled:c}},action:(s,o,a,c)=>(ee.toggleDecorator(s,o,n),!0)})})}var Xn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Yn}),Jn=B({type:"thematicBreak",isLeaf:!1,isInline:!1,wrappingParagraph:!1,contentType:x.flow,contentModelType:null,render(t,{element:e,children:n,attributes:r}){return p(J,{element:e,children:X(Pe,{attributes:r,children:[p("hr",{}),n]})})},toggle:{prefix:/^---$/,estimatePrefixLength:3,toggle:(t,e,n)=>{n?(y.removeNodes(t,{at:e}),y.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:e}),y.insertNodes(t,{type:"thematicBreak",children:[]},{at:e}),U.deselect(t),y.select(t,m.start(t,P.next(e)))):y.setNodes(t,{type:"thematicBreak",children:[{text:""}]},{at:e})},onTrigger:(t,e,n)=>{if(!(n.length>1))return!0}},events:{}}),Zn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Jn});const er={"./blockquote/BlockquoteNode.tsx":Yt,"./blockquote/action.tsx":tn,"./code/CodeNode.tsx":Ht,"./code/actions.tsx":rn,"./heading/HeadingNode.tsx":sn,"./heading/actions.tsx":ln,"./image/ImageNode.tsx":un,"./image/action.tsx":Tn,"./link/LinkNode.tsx":Ut,"./link/action.tsx":Nn,"./list/ListItemNode.tsx":An,"./list/ListNode.tsx":Rn,"./list/actions.tsx":On,"./paragraph/ParagraphNode.tsx":on,"./paragraph/actions.tsx":Dn,"./table/TableCellNode.tsx":Bn,"./table/TableNode.tsx":Ln,"./table/TableRowNode.tsx":Fn,"./table/actions.tsx":Gn,"./table/context.tsx":jn,"./text/TextNode.tsx":Wt,"./text/actions.tsx":Xn,"./thematic-break/ThematicBreakNode.tsx":Zn};function tr(t){for(const[e,{default:n,register:r}]of Object.entries(er)){const s=r||(n==null?void 0:n.register);typeof s=="function"&&(console.debug("auto detected",e),s(t))}}q.add(he,me,ye,re);function it(t,e){if(!!e)return typeof e=="function"?e(t):e}function nr(t,e){var r;if(!e)return[];const n=(r=U.toSlateRange(t,e,{exactMatch:!0}))!=null?r:t.selection;if(n){const[s]=m.nodes(t,{at:n,match:o=>{const a=o.type;if(a){const c=t.factory.customElementMap.get(a);if(c&&c.contentModelType!==x.value)return!0}return!1}});if(!s)return[]}return t.getActions(n!=null?n:void 0,t.factory.selectionActions).map(({action:{key:s,icon:o,tips:a},state:c})=>({key:s,disabled:c.disabled,active:c.active,icon:it(c,o),tips:it(c,a),action:d=>{t.runAction(s,n!=null?n:void 0,d)}})).filter(s=>!s.disabled)}function rr(){const t=de(),e=T.exports.useRef(null),n=T.exports.useRef(),[r,s]=T.exports.useState(!0),o=Ve(),[a,c]=T.exports.useState([]);t.hidePopper=()=>s(!0);const d=T.exports.useMemo(()=>({getBoundingClientRect(){return n.current?n.current.getBoundingClientRect():{width:0,height:0}}}),[t,n]),{styles:w,attributes:i,update:b}=St(d,e.current,{placement:"top",modifiers:[{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,8]}}]});return t.updatePopper=f=>{if(f){const l=!n.current;n.current=f,l&&setTimeout(()=>{t.updatePopper()},0)}const u=nr(t,n.current);c(u),u.length>0?(s(!1),b&&b()):s(!0),o()},t.togglePopper=f=>{r?t.updatePopper(f):t.hidePopper()},p("div",z(N({className:"ti-hovering-toolbar",ref:e,style:z(N({},w.popper),{opacity:r?0:1,pointerEvents:r?"none":"initial"})},i.popper),{children:a.map(f=>p(We,{action:f.action,active:f.active,disabled:f.disabled,icon:f.icon,tips:f.tips},f.key))}))}var Q;(function(t){t[t.replace=1]="replace",t[t.wrap=2]="wrap",t[t.unwrap=3]="unwrap",t[t.custom=4]="custom"})(Q||(Q={}));const pe=T.exports.forwardRef(({disabled:t=!1,initialMarkdown:e="",config:n,uploadFile:r},s)=>{const[o,a]=T.exports.useState([]),c=T.exports.useMemo(()=>{const g=new Qt;return g.use(Zt),tr(g),n&&n(g),g.freezeProcessors(),g},[]),d=T.exports.useMemo(()=>{const g=Ct(Nt(At()));return g.onAlert=(h,k)=>{console.warn(h,k)},c.wrapEditor(g,a)},[c]);T.exports.useEffect(()=>{s&&(typeof s=="function"?s(d):s.current=d)},[d,s]),T.exports.useEffect(()=>{e&&(d.markdown=e)},[d]);const w=T.exports.useMemo(()=>c.createDefaultEditableProps(d),[c,d]),i=T.exports.useRef(null),b=T.exports.useMemo(()=>({getEditorDOMRect(){var g,h;return(h=(g=i.current)==null?void 0:g.getBoundingClientRect())!=null?h:new DOMRect}}),[i]),[f,u]=T.exports.useState();d.setActionForm=u,r&&(d.uploadFile=r);const l=T.exports.useMemo(()=>{if(f)return Rt.exports.createPortal(f,document.body)},[f]),_=T.exports.useCallback(g=>{a(g)},[a]);return T.exports.useLayoutEffect(()=>{c.triggerEditorMounted(d)},[d]),X(zt,{editor:d,onChange:_,value:o,children:[p(rr,{}),p(Ke.Provider,{value:b,children:p("div",{className:"ti-community-editor-container",ref:i,children:p(Ot,N({as:"article",className:"ti-community-editor markdown-body",readOnly:t},w))})}),l]})});pe.displayName="TiEditor";pe.propTypes={disabled:qe.bool,initialMarkdown:qe.string};pe.defaultProps={disabled:!1,initialMarkdown:""};const sr=t=>{console.log(t)};var or=B({type:"section",isLeaf:!1,isInline:!1,contentType:x.flow,contentModelType:x.flow,wrappingParagraph:!1,normalize:(t,e,n,r)=>{e.children.length===0&&(y.removeNodes(t,{at:n}),r())},render(t,{attributes:e,children:n}){return p("section",z(N({},e),{contentEditable:!1,onBeforeInputCapture:sr,children:n}))},events:{},toggle:{}});const ar=()=>t=>{It(t,n=>"children"in n&&"type"in n,n=>{for(let r=n.children.length-1;r>=0;--r){const s=n.children[r];s.type==="section"&&n.children.splice(r,1,...s.children)}})};function lr(t){or.register(t),t.configSerializeProcessor(ar);let e=[];t.configSections=n=>{e=n},t.onWrapEditor(n=>{const{normalizeNode:r,deleteFragment:s,deleteBackward:o,deleteForward:a,insertFragment:c,runAction:d}=n,w=[];n.insertFragment=f=>{c(f.filter(u=>!R(u,"section")))},n.runAction=(f,u,l)=>{if(u){const _=m.range(n,u);let g=!1;for(const h of w)if(h.current&&H.includes(_,h.current)){g=!0;break}if(g)return n.onAlert("\u65E0\u6CD5\u64CD\u4F5C\u56FA\u5B9A\u5185\u5BB9",""),!1}return d(f,u,l)},n.deleteFragment=f=>{if(n.selection){let u=!1;for(const l of w)if(l.current&&H.includes(n.selection,l.current)){u=!0;break}if(u){n.onAlert("\u65E0\u6CD5\u5220\u9664\u56FA\u5B9A\u5185\u5BB9","");return}}s(f)},n.deleteBackward=f=>{if(n.selection){const u=m.before(n,n.selection,{unit:f});if(u&&R(m.node(n,u,{depth:1})[0],"section")){n.onAlert("\u65E0\u6CD5\u5220\u9664\u56FA\u5B9A\u5185\u5BB9","");return}}o(f)},n.deleteForward=f=>{if(n.selection){const u=m.after(n,n.selection,{unit:f});if(u&&R(m.node(n,u,{depth:1})[0],"section")){n.onAlert("\u65E0\u6CD5\u5220\u9664\u56FA\u5B9A\u5185\u5BB9","");return}}a(f)};const i=f=>{let u=0;return n.selection&&(u=n.selection.focus.path[0]),y.insertNodes(n,[f,{type:"paragraph",children:[{text:""}]}],{at:[u]}),m.pathRef(n,[u])},b=()=>{let f=!1;return He.withoutSaving(n,()=>{m.withoutNormalizing(n,()=>{if(e.length)if(w.length===0){for(let u=e.length-1;u>=0;--u)w[u]=i(e[u]);return}else{for(let u=e.length-1;u>=0;--u){const l=w[u];l.current&&R(v.get(n,l.current),"section")||(l.unref(),w[u]=i(e[u]),f=!0)}if(f)return}})}),f};n.normalizeNode=f=>{b()||r(f)},Object.defineProperty(n,"markdown",{get(){console.warn("editor.markdown was disabled for layout plugin, use editor.getSectionMarkdown instead")},set(){console.warn("editor.markdown was disabled for layout plugin, use editor.setSectionMarkdown instead")}}),n.getSectionRange=f=>{if(f>=w.length)return;let u=w[f].current;if(!u)return;let l;if(f<w.length-1?l=w[f+1].current:l=[n.children.length-1],!!l)return u=P.next(u),l=P.previous(l),P.isBefore(l,u)&&(l=u),{anchor:m.start(n,u),focus:m.end(n,l)}},n.getSection=f=>{const u=n.getSectionRange(f);return u?m.fragment(n,u):[]},n.getSectionMarkdown=f=>t.generateMarkdown(n.getSection(f)),n.setSection=(f,u)=>{const l=n.getSectionRange(f);!l||(y.select(n,l),n.insertFragment(u))},n.setSectionMarkdown=(f,u)=>{n.setSection(f,t.parseMarkdown(u))}}),t.onEditorMounted(n=>{m.normalize(n,{force:!0})})}const ir=`### \u5F15\u7528 (blockquote)

\`\`\`markdown
> blockquote
> 
> yeah
\`\`\`

> blockquote
> 
> yeah

- \u6DFB\u52A0\u5F15\u7528
  - \u8F93\u5165 \`>\` \u5E76\u8F93\u5165\u7A7A\u683C
- \u5220\u9664\u5F15\u7528
  - \u5728\u5F15\u7528\u8D77\u59CB\u5904\u70B9\u51FB \`<Backspace>\`
`;var cr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:ir});const ur=`### Codes

### Usage

- \u8F93\u5165 \\\`\\\`\\\` \u52A0\u7A7A\u683C

### Examples

\`\`\`javascript
console.log('hello world')
\`\`\`

\`\`\`sql
SELECT * FROM hello_world;
\`\`\`

`;var pr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:ur});const fr=`### \u6807\u9898

\`\`\`markdown
# h1
## h2
### h3
#### h4
##### h5
###### h6
\`\`\`

> # h1
> ## h2
> ### h3
> #### h4
> ##### h5
> ###### h6

- \u521B\u5EFA\u6807\u9898
  1. \u8F93\u5165 1-6 \u4E2A \`#\` \u5E76\u8F93\u5165\u7A7A\u683C
  2. \u5728\u6807\u9898\u4E2D\u95F4\u6216\u7ED3\u5C3E\u70B9\u51FB \`<Enter>\`
- \u5220\u9664\u6807\u9898
  - \u5728\u6807\u9898\u8D77\u59CB\u5904\u70B9\u51FB \`<Enter>\` \u4EE5\u5C06\u6807\u9898\u8F6C\u6362\u6210\u6BB5\u843D
`;var gr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:fr});const dr=`### Image

![google logo](https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png "google")
`;var hr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:dr});const mr=`### \u94FE\u63A5

\`\`\`
[title](url)
\`\`\`

> [title](#)

- \u521B\u5EFA\u94FE\u63A5
  - \u8F93\u5165\u94FE\u63A5 url \u5E76\u8F93\u5165\u7A7A\u683C\u4F1A\u81EA\u52A8\u8F6C\u6362
`;var yr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:mr});const br=`### \u5217\u8868

\`\`\`markdown
- \u65E0\u5E8F\u5217\u8868
- ...
  - \u7F29\u8FDB\u5217\u8868

1. \u6709\u5E8F\u5217\u8868
\`\`\`

> - \u65E0\u5E8F\u5217\u8868
> - ...
>   - \u7F29\u8FDB\u5217\u8868
> 
> 1. \u6709\u5E8F\u5217\u8868 1
> 2. \u6709\u5E8F\u5217\u8868 2

\u4F7F\u7528\u4EE5\u4E0B\u65B9\u5F0F\u63A7\u5236 Markdown \u5217\u8868\uFF1A
- \u65B0\u5EFA\u5217\u8868\uFF1A
  1. \u8F93\u5165 \`-\` \u52A0\u7A7A\u683C\u63D2\u5165\u65E0\u5E8F\u5217\u8868
  2. \u8F93\u5165 \`number.\` \u52A0\u7A7A\u683C\u63D2\u5165\u6709\u5E8F\u5217\u8868
- \u5217\u8868\u7F29\u8FDB\uFF1A
  1. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`<Tab>\` \u751F\u6210\u4E0B\u7EA7\u5217\u8868 
  2. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`-\` \u6216 \`<number>\`\u3002
- \u53D6\u6D88\u5217\u8868
  1. \u5728\u7A7A\u5217\u8868\u9879\u4E2D\u76F4\u63A5\u8F93\u5165 \`<Enter>\`
`;var _r=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:br});const vr=`### Table

| foo | bar |
| :-- | :-: |
| baz | qux |

`;var wr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:vr});const xr=`# a-editor

## \u6280\u672F\u6808

- core
  - [slate](https://www.slatejs.org/)
  - [remark](https://remark.js.org/)
  - [remark-slate-transformer](https://github.com/inokawa/remark-slate-transformer)
- code highlight
  - [prism](https://prismjs.com/)

## \u6837\u5F0F\u914D\u7F6E

### \u4EE3\u7801\u9AD8\u4EAE

\u5728 \`src/slate-markdown/elements/code/style.less\` \u6DFB\u52A0\u5BF9\u5E94 token \u6837\u5F0F\u3002

abc
deb

## \u7528\u6CD5
`,Tr={"./slate-markdown/elements/blockquote/instructions.md":cr,"./slate-markdown/elements/code/instructions.md":pr,"./slate-markdown/elements/heading/instructions.md":gr,"./slate-markdown/elements/image/instructions.md":hr,"./slate-markdown/elements/link/instructions.md":yr,"./slate-markdown/elements/list/instructions.md":_r,"./slate-markdown/elements/table/instructions.md":wr},kr=xr+`

`+Object.values(Tr).map(t=>t.plainText).join(`

`);function Pr(t){t.use(lr),t.configSections([{type:"section",children:[{type:"heading",depth:1,children:[{text:"section 1",inlineCode:!0},{text:" \u65E0\u6CD5\u4FEE\u6539\u6216\u5220\u9664\uFF0C\u4F7F\u7528\u65B9\u6CD5\u67E5\u770B "},{text:"plugins/layout",inlineCode:!0}]},{type:"blockquote",children:[{type:"paragraph",children:[{text:"\u7528\u4E8E\u56FA\u5B9A\u7684\u5185\u5BB9\u7ED3\u6784"}]}]}]}]),t.onEditorMounted(e=>{setTimeout(()=>{He.withoutSaving(e,()=>{e.setSectionMarkdown(0,kr)})})})}async function Er(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=function(){setTimeout(()=>{e(r.result)},500)},r.onerror=function(){n(r.error)},r.readAsDataURL(t)})}function Mr(){return p("div",{children:p(pe,{config:Pr,uploadFile:Er})})}Dt.render(p(jt.StrictMode,{children:p(Mr,{})}),document.getElementById("root"));
