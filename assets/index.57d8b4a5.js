var ot=Object.defineProperty,at=Object.defineProperties;var lt=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var ge=(t,e,n)=>e in t?ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e)=>{for(var n in e||(e={}))Ne.call(e,n)&&ge(t,n,e[n]);if(oe)for(var n of oe(e))Ce.call(e,n)&&ge(t,n,e[n]);return t},R=(t,e)=>at(t,lt(e));var Se=(t,e)=>{var n={};for(var s in t)Ne.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&oe)for(var s of oe(t))e.indexOf(s)<0&&Ce.call(t,s)&&(n[s]=t[s]);return n};var D=(t,e,n)=>(ge(t,typeof e!="symbol"?e+"":e,n),n);import{E as z,u as de,r as x,a as v,j as u,c as Z,T as ae,l as $,f as Ie,b as Re,d as Y,F as j,e as he,g as me,h as ye,i as le,R as q,P as T,N as f,k as F,m as ze,n as it,o as d,p as De,q as H,s as U,t as ct,v as Oe,w as ut,x as pt,y as ft,z as be,A as gt,B as we,C as dt,D as ht,G as Le,H as mt,I as yt,_ as ie,J as Ae,K as Fe,L as je,M as $e,O as Be,Q as qe,S as He,U as We,V as bt,W as wt,X as vt,Y as xt,Z as Tt,$ as _t,a0 as kt,a1 as Mt,a2 as Pt,a3 as Et,a4 as Nt,a5 as Ue,a6 as Ct,a7 as St,a8 as It}from"./vendor.045e0b49.js";const Rt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};Rt();var _;(function(t){t[t.flow=16]="flow",t[t.list=32]="list",t[t.phrasing=48]="phrasing",t[t.staticPhrasing=49]="staticPhrasing",t[t.value=64]="value",t[t.table=80]="table",t[t.tableRow=96]="tableRow"})(_||(_={}));function V(t,e){return t===e||t<e&&(t^e)<16}function A(t){return R(N({},t),{register(e){e.define(t)}})}function S(t,e){return z.isElement(t)?e instanceof Array?e.indexOf(t.type)>=0:t.type===e:!1}function Ve({icon:t,active:e,disabled:n,action:s,tips:r}){const o=de(),i=x.exports.useCallback(y=>{s&&y.button===0&&(y.preventDefault(),y.stopPropagation(),n||v.withoutNormalizing(o,()=>{s(y)}))},[s]),m=u("span",{className:Z("toolbar-item",{active:e,disabled:n}),onMouseDown:i,children:t});return r?u(ae,{content:u("span",{className:"toolbar-item-tips",children:r}),children:m}):m}$.add(Ie,Re);function zt({extraWidth:t,isEmpty:e,element:n,items:s,setActive:r}){return u(ae,{appendTo:"parent",arrow:!1,content:Dt(s),hideOnClick:!1,interactive:!0,onHide:()=>r(!1),onShow:()=>r(!0),children:Y("div",{className:"line-operations",contentEditable:!1,children:[u("span",{className:"icon",children:u(j,{icon:e?Re:Ie})}),u("div",{className:"spacer",style:{width:t,height:"100%"}})]})})}const Dt=t=>u("div",{className:"block-toolbar",children:t.map((e,n)=>u("div",{className:"toolbar-group",children:e.map(s=>u(Ve,{action:s.action,active:s.active,disabled:s.disabled,icon:s.icon,tips:s.tips},s.key))},n))});$.add(he,me,ye,le);function Ot(t,e){const n=e==null?void 0:e.current;return t.factory.blockConfigs.map(s=>s.toolbarItems.map(({key:r,isDisabled:o,isActive:i,action:m,icon:y,tips:P})=>({key:r,disabled:n?o(t,n):!1,active:n?i(t,n):!1,icon:y,action:n?a=>{m(t,n,a),a.preventDefault(),a.stopPropagation()}:()=>{},tips:P}))).filter(s=>s.length>0)}function Ke(){const[t,e]=x.exports.useState(0);return()=>{e(n=>n+1)}}const Qe=x.exports.createContext({getEditorDOMRect:()=>new DOMRect});function ee({element:t,children:e}){const[n,s]=x.exports.useState(null),r=x.exports.useRef(),o=de(),i=Ot(o,r.current),m=Ke(),[y,P]=x.exports.useState(0),{getEditorDOMRect:a}=x.exports.useContext(Qe),p=x.exports.useCallback(()=>{var M;const g=(M=n==null?void 0:n.getBoundingClientRect())!=null?M:new DOMRect,{x:h=0}=g,{x:k}=a();return P(h-k),g},[a,n]);x.exports.useLayoutEffect(()=>{var g,h;if(n){const k=document.createRange();k.selectNode(n.childNodes.item(0));const M=q.toSlateRange(o,k,{exactMatch:!1});let C=T.common(M.anchor.path,M.focus.path);for(;C.length!==0;){if(v.isBlock(o,f.get(o,C))){r.current=v.pathRef(o,C);break}C=T.parent(C)}}else r.current&&((h=(g=r.current).unref)==null||h.call(g)),r.current=void 0},[n]);const[c,w]=x.exports.useState(!1),l=(()=>{const g=t.children[0];return t.children.length===1&&F.isText(g)&&g.text===""})();return ze()?typeof e=="function"?e({active:c,pathRef:r.current}):e:u(it,{appendTo:document.body,arrow:!1,getReferenceClientRect:p,hideOnClick:!1,interactive:!0,interactiveBorder:12,offset:[0,8],onTrigger:m,placement:"left",popperOptions:{modifiers:[{name:"flip",options:{allowedAutoPlacements:["left"]}}]},ref:s,render:()=>u(zt,{element:t,extraWidth:y,isEmpty:l,items:i,setActive:w}),children:typeof e=="function"?e({active:c,pathRef:r.current}):e})}const Lt=["markdown","javascript","typescript","jsx","tsx","sql","bash","go","rust","json","log"],te=Symbol("prism_token"),At=[{key:"code-block",icon:u(j,{icon:le}),isActive:(t,e)=>S(f.get(t,e),"code"),isDisabled:(t,e)=>{const n=f.get(t,e);if(S(n,"code"))return!1;const s=f.parent(t,e),r=t.getContentModelType(s);return r?!V(Ye.contentType,r):!0},tips:u(H,{children:"\u4EE3\u7801\u5757"}),action:(t,e,n)=>{const s=f.get(t,e);if(S(s,"code"))d.unsetNodes(t,Object.keys(f.extractProps(s)),{at:e}),d.setNodes(t,{type:"paragraph"},{at:e});else{const r=f.string(s);d.removeNodes(t,{at:e}),d.insertNodes(t,{type:"code",lang:"markdown",meta:void 0,children:[{text:r}]},{at:e,select:!0})}}}],Ge=({attributes:t,element:e,children:n},s)=>u("pre",R(N({},t),{className:Z({active:s},e.lang?`language-${e.lang}`:void 0),children:u("code",{className:"prism-code",children:n})})),Ye=A({type:"code",isInline:!1,isLeaf:!1,wrappingParagraph:!1,contentType:_.flow,contentModelType:_.value,render:(t,e)=>{const{element:n}=e;return ze()?Ge(e,!1):u(ee,{element:n,children:({active:r,pathRef:o})=>u(ae,{appendTo:document.body,content:u("select",{className:"lang-selector",contentEditable:!1,onChange:i=>{(o==null?void 0:o.current)&&d.setNodes(t,{lang:i.currentTarget.value},{at:o.current})},tabIndex:void 0,value:n.lang||void 0,children:Lt.map(i=>u("option",{children:i},i))}),interactive:!0,placement:"top-start",children:Ge(e,r)})})},toggle:{prefix:/^`{3}(?: (\w+))?$/,toggle:(t,e,n)=>{if(n){const s=f.string(f.get(t,e));d.removeNodes(t,{at:e}),d.insertNodes(t,R(N({type:"code"},n),{children:[{text:s}]}),{at:e}),d.select(t,e.concat(0))}else d.unsetNodes(t,["meta","lang"],{at:e}),d.setNodes(t,{type:"paragraph"},{at:e})},onTrigger:(t,e,n)=>{if(n.length>1)return;const s=/^`{3}(?: (\w+))?$/.exec(t);return s?{lang:s[1]||"markdown",meta:void 0}:{lang:"markdown",meta:void 0}}},events:{},toolbarItems:At,decorate:(t,[e,n],s)=>{if(F.isText(e)&&s.lang){const r=De.languages[s.lang];if(!r)return[];const o=[],i=De.tokenize(e.text,r);let m=0;for(const y of i){const P=Xe(y),a=m+P;typeof y!="string"&&o.push({[te]:y.type,anchor:{path:n,offset:m},focus:{path:n,offset:a}}),m=a}return o}return[]}}),Xe=t=>typeof t=="string"?t.length:typeof t.content=="string"?t.content.length:t.content.reduce((e,n)=>e+Xe(n),0);var Ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SYMBOL_PRISM_TOKEN:te,default:Ye}),I;(function(t){t.strong="strong",t.emphasis="emphasis",t.delete="delete",t.inlineCode="inlineCode"})(I||(I={}));const X=A({isLeaf:!0,contentType:_.staticPhrasing,contentModelType:_.value,canContainsContentModelTypeOf:t=>t.inlineCode?_.value:(t.strong||t.emphasis||t.delete,_.phrasing),normalize:(t,e,n,s)=>{if(e.text===""){const r=[I.strong,I.emphasis,I.delete,I.inlineCode].filter(o=>!!e[o]);r.length>0&&d.unsetNodes(t,r,{at:n})}},render(t,{leaf:e,children:n,attributes:s}){let r=n;return e[te]&&(r=u("span",{className:Z(e[te]?`token ${e[te]}`:void 0,s.className),children:r})),e.delete&&(r=u("del",{children:r})),e.emphasis&&(r=u("em",{children:r})),e.strong&&(r=u("strong",{children:r})),e.inlineCode&&(r=u("code",{children:r})),u("span",R(N({},s),{children:r}))},toggleDecorator:(t,e,n)=>{const s=Je(t),r=o=>s(f.get(t,o.anchor.path),o.anchor.path);ve(t,e,n)?U.isCollapsed(e)?r(e)&&v.addMark(t,n,!1):d.setNodes(t,{[n]:!1},{match:s,split:!0}):U.isCollapsed(e)?r(e)&&(v.addMark(t,n,!0),n===I.inlineCode?(v.addMark(t,I.inlineCode,!1),v.addMark(t,I.emphasis,!1),v.addMark(t,I.delete,!1)):v.addMark(t,I.inlineCode,!1)):(d.setNodes(t,{[n]:!0},{match:s,split:!0}),n===I.inlineCode?d.unsetNodes(t,[I.delete,I.emphasis,I.strong],{match:s,split:!0}):d.unsetNodes(t,I.inlineCode,{match:s,split:!0}))},toolbarItems:[{key:I.strong,icon:he,tips:u(H,{children:"\u52A0\u7C97"})},{key:I.emphasis,icon:me,tips:u(H,{children:"\u659C\u4F53"})},{key:I.inlineCode,icon:le,tips:u(H,{children:"\u884C\u5185\u4EE3\u7801"})},{key:I.delete,icon:ye,tips:u(H,{children:"\u5220\u9664"})}].map(({key:t,icon:e,tips:n})=>({key:t,icon:u(j,{icon:e}),isActive:(s,r)=>ve(s,r,t),isDisabled:(s,r)=>!ce(s,r),action:(s,r,o)=>{X.toggleDecorator(s,r,t)},tips:n}))});function ve(t,e,n){if(!q.hasRange(t,e))return!1;const s=v.marks(t);return s?!!s[n]:!1}const ce=(t,e)=>{const n=xe(t),[s]=v.nodes(t,{at:e,match:n});return!!s},Je=t=>(e,n)=>{const s=xe(t);if(!F.isText(e))return!1;const r=f.parent(t,n);return z.isElement(r)?s(r,T.parent(n)):!1},xe=t=>(e,n)=>{if(z.isElement(e)){const s=t.factory.customElementMap.get(e.type);return s&&s.contentModelType?V(s.contentModelType,_.phrasing):!1}else return!1};function ne(t,e,n,s){if(U.isRange(e)){if(!q.hasRange(t,e))return!1}else if(T.isPath(e)){if(!v.hasPath(t,e))return!1}else if(!q.hasRange(t,{anchor:e,focus:e}))return!1;if(T.isPath(e)){const o=f.get(t,e);return S(o,n)&&(s?s(o):!0)}const[r]=v.nodes(t,{at:U.isRange(e)?v.unhangRange(t,e):e,match:o=>!v.isEditor(o)&&S(o,n)&&(s?s(o):!0)});return!!r}var jt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get TextNodeDecorator(){return I},isDecoratorActive:ve,isRangeCustomTextPropsEnabled:ce,isCustomTextPropsEnabled:Je,isPhrasing:xe,isElementActive:ne,default:X});function $t({schema:t,onSubmit:e,defaultValues:n}){return u("div",{contentEditable:!1,children:u(ct,{className:"action-form",formData:n,onSubmit:s=>e(s.formData),schema:t})})}function Bt(t,e){return x.exports.useCallback(()=>t.selection?q.toDOMRange(t,t.selection).getBoundingClientRect():e.getBoundingClientRect(),[t,e])}function qt(t,e){return x.exports.useCallback(()=>{t("user canceled"),e.current&&e.current.hide()},[t])}function Ht(){const t=x.exports.useRef(),e=x.exports.useCallback(n=>{t.current=n},[t]);return[t,e]}function Wt(t,e,n,s){const r=x.exports.useCallback(o=>{var i;e(o),(i=s.current)==null||i.hide()},[e,s]);return x.exports.useMemo(()=>u($t,{defaultValues:n,onSubmit:r,schema:t}),[t,r])}function Ut({editor:t,el:e,reject:n,resolve:s,schema:r,defaultValues:o}){const[i,m]=Ht(),y=Bt(t,e),P=qt(n,i),a=Wt(r,s,o,i);return u(ae,{content:a,getReferenceClientRect:y,interactive:!0,onClickOutside:P,onMount:m,placement:"right-start",visible:!0,children:u("span",{})})}function Te(t,e,n,s){return new Promise((r,o)=>{t.setActionForm(u(Ut,{defaultValues:s,editor:t,el:e,reject:o,resolve:r,schema:n}))}).catch(r=>{if(r==="user canceled")return Promise.resolve(void 0);throw r})}const Vt="\u6DFB\u52A0\u8D85\u94FE\u63A5",Kt="object",Qt={src:{title:"\u94FE\u63A5",type:"string",format:"url"},text:{title:"\u663E\u793A\u6587\u672C",type:"string"}},Gt=["src","text"];var Yt={title:Vt,type:Kt,properties:Qt,required:Gt};$.add(Oe);const _e=A({type:"link",isInline:!0,isLeaf:!1,contentType:_.phrasing,contentModelType:_.staticPhrasing,normalize:(t,e,n,s)=>{f.string(e).trim().length===0&&(d.removeNodes(t,{at:n}),s())},render:(t,{element:e,attributes:n,children:s})=>u("a",R(N({href:e.url,onClick:()=>window.open(e.url,"_blank"),style:{display:"inline-flex",cursor:"pointer"}},n),{children:s})),insert:(t,e,r)=>{var o=r,{text:n}=o,s=Se(o,["text"]);d.insertNodes(t,[N({type:"link",children:[{text:n}]},s),{text:" "}],{at:e,select:!0}),ut.isPoint(e)&&d.move(t,{distance:1})},match:{regexp:pt()},toolbarItems:[{key:"link",icon:u(j,{icon:Oe}),tips:u(H,{children:"\u8D85\u94FE\u63A5"}),isActive:(t,e)=>ne(t,e,"link"),isDisabled:(t,e)=>!T.equals(T.parent(e.focus.path),T.parent(e.anchor.path))||!ce(t,e),action:(t,e,n)=>{ne(t,e,"link")?d.unwrapNodes(t,{at:v.unhangRange(t,e),match:s=>!v.isEditor(s)&&z.isElement(s)&&s.type==="link"}):Te(t,n.target,Yt,{text:v.string(t,e),src:""}).then(s=>{if(s){const{src:r,text:o}=s;v.withoutNormalizing(t,()=>{_e.insert(t,e,{url:r,title:"",text:o})})}})}}]});var Xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_e});class Jt{constructor(e,n){D(this,"state",[]);this.factory=e,this.editor=n}process(e){const[n,s]=e;if(v.isEditor(n))return this.state=[],[];if(z.isElement(n)){const r=this.factory.customElementMap.get(n.type);if(r&&!r.isInline){const o=r;if(o.decorate)return this.state.push({element:n,path:s,config:o}),[]}}if(this.state.length>0){for(const r of this.state.reverse())if(T.isAncestor(r.path,s))return r.config.decorate(this.editor,e,r.element)}return[]}}const Zt=ft({proto:!1,circles:!1});class en{constructor(){D(this,"blockConfigs",[]);D(this,"inlineConfigs",[]);D(this,"textConfig");D(this,"inlineSet",new Set);D(this,"voidSet",new Set);D(this,"customElementMap",new Map);D(this,"contentTypeMap",new Map);D(this,"contentModelTypeMap",new Map);D(this,"serializerPlugins",[]);D(this,"deserializerPlugins",[]);D(this,"serializeProcessor",be());D(this,"deserializeProcessor",be());D(this,"deserializeHTMLProcessor",be());D(this,"editorWrapHandlers",[]);D(this,"editorMountedHandlers",[])}freezeProcessors(){this.serializeProcessor.use(this.serializerPlugins).use(gt).use(we).use(dt,{emphasis:"*",strong:"*",listItemIndent:"one",fence:"`",bullet:"-"}).freeze(),this.deserializeProcessor.use(ht).use(we).use(Le).use(this.deserializerPlugins).freeze(),this.deserializeHTMLProcessor.use(mt).use(yt).use(we).use(Le).use(this.deserializerPlugins).freeze()}configProcessor(...e){this.configSerializeProcessor(...e),this.configDeserializeProcessor(...e)}configSerializeProcessor(...e){this.serializerPlugins.push(...e)}configDeserializeProcessor(...e){this.deserializerPlugins.push(...e)}use(e){return e(this),this}define(e){return e.isLeaf?this.textConfig=e:(e.isInline?(this.inlineSet.add(e.type),this.inlineConfigs.push(e)):this.blockConfigs.push(e),this.customElementMap.set(e.type,e),this.contentModelTypeMap.set(e.type,e.contentModelType),this.contentTypeMap.set(e.type,e.contentType),e.contentModelType===null&&this.voidSet.add(e.type)),this}onWrapEditor(e){this.editorWrapHandlers.push(e)}onEditorMounted(e){this.editorMountedHandlers.push(e)}triggerEditorMounted(e){this.editorMountedHandlers.forEach(n=>n(e))}generateMarkdown(e){return this.serializeProcessor.stringify(this.serializeProcessor.runSync({type:"root",children:Zt(e)}))}parseMarkdown(e){return this.deserializeProcessor.processSync(e).result}wrapEditor(e,n){const{isVoid:s,isInline:r,normalizeNode:o,insertBreak:i,insertFragment:m,setFragmentData:y}=e;e.factory=this;function P(a){v.isEditor(a)?(console.group("#root"),a.children.forEach(P),console.groupEnd()):z.isElement(a)?(console.group(a.type),a.children.forEach(P),console.groupEnd()):console.debug("text")}return window.debugPrintTree=()=>P(e),window.debugEditor=e,Object.defineProperty(e,"markdown",{enumerable:!1,configurable:!0,get:()=>this.generateMarkdown(e.children),set:a=>{n(this.parseMarkdown(a)),v.setNormalizing(e,!0)}}),e.updatePopper=e.hidePopper=e.togglePopper=()=>{},e.isContent=(a,p)=>z.isElement(a)?this.contentTypeMap.get(a.type)===p:F.isText(a)?this.textConfig.contentType===p:!1,e.canContainsContent=(a,p)=>{if(v.isEditor(a))return p===_.flow;if(z.isElement(a)){const c=this.contentModelTypeMap.get(a.type);return c?V(p,c):!1}else return F.isText(a)?V(p,X.canContainsContentModelTypeOf(a)):!1},e.getContentType=a=>z.isElement(a)?this.contentTypeMap.get(a.type)||null:F.isText(a)&&this.textConfig.contentType||null,e.getContentModelType=a=>v.isEditor(a)?_.flow:z.isElement(a)?this.contentModelTypeMap.get(a.type)||null:F.isText(a)?this.textConfig.contentModelType:null,e.getContentTypePair=a=>z.isElement(a)?[this.contentTypeMap.get(a.type)||null,this.contentModelTypeMap.get(a.type)||null]:F.isText(a)?[this.textConfig.contentType||null,this.textConfig.contentModelType||null]:[null,null],e.toggle=(a,p,c)=>{const w=e.canToggle(a,p,!0);if(!w)return!1;const[[l,b],g]=w,h=typeof c=="object"?c:{};switch(g){case G.replace:return d.unsetNodes(e,Object.keys(f.extractProps(l))),d.setNodes(e,R(N({type:p.type},h),{children:[]}),{at:b}),!0;case G.wrap:return d.wrapNodes(e,N({type:p.type},h),{at:b}),!0;case G.custom:throw new Error("TODO: ToggleStrategy.custom");default:throw new Error("unknown ToggleStrategy: "+g)}},e.canToggle=(a,p,c)=>{const[w]=a,[l,b]=e.getContentTypePair(w);if(p.contentType!==l)return!1;if(p.contentModelType===b)return[a,G.replace];if(p.contentModelType===l)return[a,G.wrap];if(!c)return!1;const g=f.ancestors(e,a[1],{reverse:!0});for(const h of g){const k=e.canToggle(h,p,!1);if(k)return k}return!1},e.unwrap=(a,p)=>{if(!e.canUnwrap(a,p))return!1;const[c,w]=a,l=[[[]]];let b=[[c,[]]],g=0;for(;g<p.length-1;){const h=[];for(const[k,M]of b)for(const[C,E]of k.children.entries())h.push([E,M.concat(C)]);g+=1,b=h,l.push(h.map(([,k])=>k))}for(const h of l.reverse())for(const k of h.reverse())d.unwrapNodes(e,{at:w.concat(k),split:!0});return!0},e.canUnwrap=([a,p],c)=>{if(c.length===0)return!0;const w=e.getContentModelType(f.parent(e,p)),l=c[c.length-1].contentModelType;if(!w||!l||!V(l,w))return!1;let b=[[a,[]]],g=0;for(;g<c.length;){const h=[];for(const[k,M]of b){if(!S(k,c[g].type))return!1;for(const[C,E]of k.children.entries())h.push([E,M.concat(C)])}g+=1,b=h}return!0},e.wrap=(a,p,c)=>{if(!e.canWrap(a,p,c))return!1;const[,w]=a;let l=p.length-1;for(;l>=0;){const b=p[l],g=c[l];d.wrapNodes(e,Object.assign({type:b.type,children:[]},g),{at:w}),l--}return!0},e.canWrap=(a,p,c)=>{console.assert(p.length===c.length,"editor.canWrap: configs.length should be equals to params.length");const[w,l]=a,b=f.parent(e,l);let g=0,h=e.getContentModelType(b);for(;g<p.length;){const M=p[g];if(h===null||!V(M.contentType,h))return!1;h=M.contentModelType,g+=1}if(h===null)return!1;const k=e.getContentType(w);return k?V(k,h):!1},e.nearest=(a,p)=>{const[c,w]=a;if(S(c,p.type))return a;for(const l of f.ancestors(e,w,{reverse:!0}))if(S(l[0],p.type))return l},e.getAndRemoveMark=a=>{if(e.marks){const p=e.marks[a];return e.removeMark(a),p}},e.isVoid=a=>this.voidSet.has(a.type)||s(a),e.isInline=a=>this.inlineSet.has(a.type)||r(a),e.normalizeNode=a=>{let p=!0;const c=()=>{p=!1};v.withoutNormalizing(e,()=>{var b;const[w,l]=a;if(z.isElement(w)){const g=(b=this.customElementMap.get(w.type))==null?void 0:b.normalize;g&&g(e,w,l,c)}F.isText(w)&&this.textConfig.normalize&&this.textConfig.normalize(e,w,l,c),v.isEditor(w)&&(w.children.length===0?d.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[0]}):S(w.children[w.children.length-1],"paragraph")||d.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[w.children.length]}))}),p&&o(a)},e.insertBreak=()=>{if(e.selection){const a=f.parent(e,e.selection.anchor.path);if(e.getContentModelType(a)!==_.phrasing){d.insertText(e,`
`);return}}i()},e.insertFragment=a=>{if(e.selection){const p=f.parent(e,e.selection.anchor.path);if(e.getContentModelType(p)===_.value){const w=this.serializeProcessor.stringify(this.serializeProcessor.runSync({type:"root",children:a}));d.insertText(e,w);return}}m(a)},e.setFragmentData=a=>{y(a),a.setData("text/plain",this.generateMarkdown(e.getFragment()))},this.editorWrapHandlers.forEach(a=>a(e)),e}createDefaultEditableProps(e){const n=l=>{var g;const{selection:b}=e;if(b&&U.isCollapsed(b)){const h=b.anchor,k=f.get(e,h.path),M=f.parent(e,h.path);if(F.isText(k)&&z.isElement(M)&&M.type==="paragraph"&&l.data===" "&&!T.hasPrevious(h.path)){const C=k.text.slice(0,h.offset);for(const{toggle:E}of this.blockConfigs)if(!(typeof E.estimatePrefixLength=="number"&&C.length>E.estimatePrefixLength)&&((g=E.prefix)==null?void 0:g.test(C))){const O=E.onTrigger(C,e,T.parent(h.path));if(typeof O!="undefined"){d.delete(e,{at:{path:h.path,offset:0},distance:h.offset}),E.toggle(e,T.parent(h.path),O),l.preventDefault();return}}}if(F.isText(k)&&!S(M,"link")&&l.data===" "){for(const C of this.inlineConfigs)if(C.match){const E=C.match.regexp.exec(k.text.slice(0,h.offset));if(E){const O=E[0],K=E.index,st=E.index+O.length,rt={anchor:{path:h.path,offset:K},focus:{path:h.path,offset:st}};_e.insert(e,rt,{url:O,title:"",text:O}),l.preventDefault();return}}}if(v.isInline(e,M)){const C=T.parent(h.path).concat(M.children.length);d.insertNodes(e,{text:l.data||""},{at:C}),d.move(e,{distance:1}),l.preventDefault();return}}},s=l=>b=>{const{selection:g}=e;if(g&&U.isCollapsed(g)){const h=g.anchor;if(tn(e,h)){const k=T.parent(h.path),M=f.get(e,k);if(z.isElement(M)){const C=this.customElementMap.get(M.type);if(C){const E=l(C.events);if(E&&E(e,h.path)){b.preventDefault();return}}if(M.type==="paragraph"){const E=f.parent(e,k);if(!T.hasPrevious(k)&&z.isElement(E)){const O=this.customElementMap.get(E.type);if(O==null?void 0:O.wrappingParagraph){const K=l(O.events);if(K&&K(e,h.path)){b.preventDefault();return}}}}}}}},r=s(l=>l.onStartDelete),o=s(l=>l.onStartEnter),m=(l=>b=>{const{selection:g}=e;if(g&&U.isCollapsed(g)){const h=g.anchor,k=T.parent(h.path),M=f.parent(e,h.path);if(z.isElement(M)){const C=this.customElementMap.get(M.type);if(C){const E=l(C.events);if(E&&E(e,h.path)){b.preventDefault();return}}if(M.type==="paragraph"){const E=f.parent(e,k);if(z.isElement(E)){const O=this.customElementMap.get(E.type);if(O==null?void 0:O.wrappingParagraph){const K=l(O.events);if(K&&K(e,h.path)){b.preventDefault();return}}}}}}})(l=>l.onTab),y=new Jt(this,e),P=l=>y.process(l),a=(l,b)=>{const g=b?v.rangeRef(e,b):null;e.uploadFile&&Promise.all(l.map(e.uploadFile)).then(h=>h.map((k,M)=>({type:"image",url:k,title:void 0,alt:l[M].name,children:[{text:""}]}))).then(h=>{var k;d.insertNodes(e,h,{at:(k=g==null?void 0:g.current)!=null?k:v.last(e,[])[1]})}).catch(console.error)},p=(l,b)=>{const g=[...l.files].filter(h=>/image\/*/.test(h.type));g.length>0&&a(g,b)};return{renderElement:l=>{const b=this.customElementMap.get(l.element.type);return b?b.render(e,l):(console.warn(`${l.element.type} not impl`),x.exports.createElement("div",l.attributes,l.children))},renderLeaf:l=>this.textConfig?this.textConfig.render(e,l):x.exports.createElement("span",l.attributes,l.children),decorate:P,onDOMBeforeInput:l=>{Ze(e,()=>{switch(console.log(l.inputType),l.inputType){case"insertText":n(l);break;case"deleteContentBackward":r(l);break;case"insertParagraph":o(l);break}})},onKeyDown:l=>{Ze(e,()=>{if(ie("tab",l)){m(l);return}if(ie(["ctrl+enter"],l)){d.insertText(e,`
`);return}if(e.selection){if(ie("meta+b",l)){X.toggleDecorator(e,e.selection,I.strong),l.preventDefault();return}if(ie("meta+i",l)){X.toggleDecorator(e,e.selection,I.emphasis),l.preventDefault();return}}})},onSelect:l=>{const b=window.getSelection();b&&(b.isCollapsed?e.hidePopper():b.rangeCount>0&&e.updatePopper(b.getRangeAt(0)))},onBlur:l=>{e.hidePopper()},onClick:()=>{const l=window.getSelection();if(l&&l.isCollapsed&&l.rangeCount>0){const b=l.getRangeAt(0),g=q.toSlateRange(e,b,{exactMatch:!0});g&&e.selection&&U.equals(g,e.selection)&&e.togglePopper(b)}},onPaste:l=>{const b=l.clipboardData;if(!!b){if(b.types.indexOf("application/x-slate-fragment")<0){if(b.types.indexOf("text/html")>=0){const g=b.getData("text/html"),h=this.deserializeHTMLProcessor.processSync(g).result;e.insertFragment(h),l.preventDefault()}else if(b.types.indexOf("text/plain")>=0){const g=b.getData("text/plain"),h=this.deserializeProcessor.processSync(g).result;e.insertFragment(h),l.preventDefault()}}p(b,e.selection)}},onDrop:l=>{p(l.dataTransfer,q.findEventRange(e,l))}}}}function tn(t,e){return e.offset===0&&!T.hasPrevious(e.path)&&F.isText(f.get(t,e.path))}function Ze(t,e){let n=!0;v.withoutNormalizing(t,()=>{e(()=>{n=!1})}),n||v.normalize(t)}$.add(Ae);const nn=[{key:"blockquote",icon:u(j,{icon:Ae}),isActive:(t,e)=>{const n=[f.get(t,e),e];return!!t.nearest(n,W)},isDisabled:(t,e)=>{const n=[f.get(t,e),e],s=t.nearest(n,W);return s?!t.canUnwrap(s,[W]):!t.canToggle(n,W,!1)},tips:u(H,{children:"\u5F15\u7528"}),action:(t,e,n)=>{const s=[f.get(t,e),e],r=t.nearest(s,W);return r?t.unwrap(r,[W]):t.toggle(s,W,void 0)}}],W=A({type:"blockquote",isInline:!1,isLeaf:!1,wrappingParagraph:!0,contentType:_.flow,contentModelType:_.flow,render:(t,{children:e,attributes:n})=>u("blockquote",R(N({},n),{children:e})),toggle:{prefix:/^>$/,toggle:(t,e,n)=>{n?d.wrapNodes(t,{type:"blockquote",children:[]},{at:e}):d.unwrapNodes(t,{at:T.parent(e)})},onTrigger(){return!0}},events:{onStartDelete:(t,e)=>{const n=f.parent(t,T.parent(e));return S(n,"blockquote")?(W.toggle.toggle(t,T.parent(e),!1),!0):!1}},toolbarItems:nn});var sn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:W});$.add(Fe);const se=A({type:"paragraph",isLeaf:!1,isInline:!1,wrappingParagraph:!1,contentType:_.flow,contentModelType:_.phrasing,toggle:{},events:{},render(t,{element:e,attributes:n,children:s}){return u(ee,{element:e,children:({active:r})=>u("p",R(N({className:Z({active:r})},n),{children:s}))})},toolbarItems:[{key:"insert-paragraph",isActive:()=>!1,isDisabled:(t,e)=>e.length>1,icon:u(j,{icon:Fe}),action:(t,e)=>{e.length>1||d.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:e})}}]});var rn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:se});const on=[1,2,3,4,5,6].map(t=>{const e=(s,r)=>{const o=[f.get(s,r),r],i=s.nearest(o,Q);return!!(i&&i[0].depth===t)},n=(s,r)=>{const o=[f.get(s,r),r],i=s.nearest(o,Q);return i?!s.canToggle(i,se,!1):!s.canToggle(o,Q,!0)};return{key:`heading-level-${t}`,icon:Y(H,{children:["H",t]}),isActive:e,isDisabled:n,action:(s,r,o)=>{const i=[f.get(s,r),r],m=s.nearest(i,Q);m&&m[0].depth===t?s.toggle(m,se,void 0):s.toggle(i,Q,{depth:t})}}}),Q=A({type:"heading",isInline:!1,isLeaf:!1,wrappingParagraph:!1,contentType:_.flow,contentModelType:_.phrasing,render:(t,{element:e,children:n,attributes:s})=>u(ee,{element:e,children:({active:r})=>x.exports.createElement(`h${e.depth}`,Object.assign(s,{className:Z({active:r})}),n)}),toggle:{prefix:/^#{1,6}$/,estimatePrefixLength:6,toggle:(t,e,n)=>{n?t.toggle([f.get(t,e),e],Q,n):t.toggle([f.get(t,e),e],se,void 0)},onTrigger:t=>({depth:t.length})},events:{onStartEnter:(t,e)=>{const n=f.parent(t,e);return S(n,"heading")?(t.toggle([n,T.parent(e)],se,void 0),!0):!1}},toolbarItems:on});var an=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Q});const ln="\u6DFB\u52A0\u56FE\u7247",cn="object",un={src:{title:"\u94FE\u63A5",type:"string",format:"url"},alt:{title:"\u66FF\u4EE3\u6587\u672C\uFF08alt\uFF09",type:"string"}},pn=["src","alt"];var fn={title:ln,type:cn,properties:un,required:pn};const ke=x.exports.forwardRef(function({children:t},e){return u("span",{className:"void-element",contentEditable:!1,ref:e,children:t})});ke.displayName="VoidElement";$.add(je);const et=A({type:"image",isInline:!0,isLeaf:!1,contentType:_.staticPhrasing,contentModelType:null,render:(t,{element:e,attributes:n,children:s})=>Y(ke,{children:[u("img",N({alt:e.alt,src:e.url,title:e.title},n)),s]}),insert:(t,e,n)=>{d.insertNodes(t,[{text:" "},N({type:"image",children:[]},n),{text:" "}],{at:e})},toolbarItems:[{key:"image",icon:u(j,{icon:je}),tips:u(H,{children:"\u8D85\u94FE\u63A5"}),isActive:(t,e)=>ne(t,e,"image"),isDisabled:(t,e)=>!T.equals(T.parent(e.focus.path),T.parent(e.anchor.path))||!ce(t,e),action:(t,e,n)=>{ne(t,e,"image")?d.removeNodes(t,{at:v.unhangRange(t,e),match:s=>!v.isEditor(s)&&z.isElement(s)&&s.type==="image"}):Te(t,n.target,fn,{alt:v.string(t,e),src:""}).then(s=>{if(s){const{src:r,alt:o}=s;v.withoutNormalizing(t,()=>{et.insert(t,e,{url:r,title:"",alt:o})})}})}}]});var gn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:et});$.add($e,Be);const tt=[!0,!1].map(t=>{const e={ordered:t,spread:void 0,start:void 0},n={spread:void 0,checked:void 0};return{key:`list-${t?"ordered":"unordered"}`,icon:u(j,{icon:t?$e:Be}),isActive:(s,r)=>{const o=[f.get(s,r),r],i=s.nearest(o,L);return i?Boolean(i[0].ordered)===Boolean(t):!1},isDisabled:(s,r)=>{const o=[f.get(s,r),r],i=s.nearest(o,L);return i?!s.canUnwrap(i,[L,J]):!s.canWrap(o,[L,J],[e,n])},action:(s,r,o)=>{const i=s.getAndRemoveMark("start"),m=[f.get(s,r),r],y=s.nearest(m,L);if(y){const[P,a]=y;P.ordered===t?s.unwrap(y,[L,J]):d.setNodes(s,{ordered:t,start:i},{at:a})}else s.wrap(m,[L,J],[Object.assign({},e,{start:i}),n])}}}),L=A({type:"list",isLeaf:!1,isInline:!1,wrappingParagraph:!0,contentType:_.flow,contentModelType:_.list,normalize:(t,e,n,s)=>{if(e.children.length===0){d.removeNodes(t,{at:n}),s();return}if(T.hasPrevious(n)){const r=f.get(t,T.previous(n));if(S(r,"list")&&Boolean(r.ordered)===Boolean(e.ordered)&&r.start===void 0&&e.start===void 0){d.mergeNodes(t,{at:n}),s();return}}},render(t,{element:e,attributes:n,children:s}){return e.ordered?u("ol",R(N({},n),{start:e.start,children:s})):u("ul",R(N({},n),{children:s}))},toggle:{prefix:/^(?:-|\d+\.)$/,toggle:nt,onTrigger:t=>{if(t==="-")return{ordered:!1,start:void 0,spread:void 0};{const e=parseInt(t);return{ordered:!0,start:e===1?void 0:e,spread:void 0}}}},events:{},toolbarItems:tt});function nt(t,e,n){if(n===!1)throw new Error("should never reach");t.addMark("start",n.start),t.nearest([f.get(t,e),e],L)?(t.addMark("ordered",n.ordered),J.toolbarItems[0].action(t,e,{})):tt[n.ordered?0:1].action(t,e,{})}var dn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toggleList:nt,default:L});$.add(qe,He);const ue=[{key:"indent-list-item",isActive:()=>!1,isDisabled:(t,e)=>{const n=t.nearest([f.get(t,e),e],L);return!n||n[0].children.length<=1},icon:u(j,{icon:qe}),action:(t,e,n)=>{const s=t.getAndRemoveMark("ordered"),r=t.getAndRemoveMark("start"),o=[f.get(t,e),e],i=t.nearest(o,L);if(!i||i[0].children.length<=1)return;const m=t.nearest(o,re);!m||!T.hasPrevious(m[1])||t.wrap(m,[re,L],[{spread:void 0,checked:void 0},{ordered:s!=null?s:i[0].ordered,spread:void 0,start:r}])&&d.mergeNodes(t,{at:m[1]})}},{key:"outdent-list-item",isActive:()=>!1,isDisabled:(t,e)=>!t.nearest([f.get(t,e),e],L),icon:u(j,{icon:He}),action:(t,e,n)=>{const s=[f.get(t,e),e];if(!t.nearest(s,L))return;const o=t.nearest(s,re);if(!o)return;const i=v.pathRef(t,o[1]),m=T.next(o[1]);if(v.hasPath(t,m)&&d.splitNodes(t,{at:m}),d.splitNodes(t,{at:o[1]}),i.current){const y=T.parent(i.current),P=[f.get(t,y),y];t.unwrap(P,[L,re]),d.splitNodes(t,{at:y})}i.unref()}}],re=A({type:"listItem",isLeaf:!1,isInline:!1,wrappingParagraph:!0,contentType:_.list,contentModelType:_.flow,normalize:(t,e,n,s)=>{if(e.children.length>0)if(S(e.children[0],"list")){d.moveNodes(t,{at:n.concat(0),to:T.parent(n)}),s();return}else{const i=e.children.length-1;if(e.children.length>1&&S(e.children[i],"paragraph")){const m=T.next(n);d.moveNodes(t,{at:n.concat(i),to:m}),d.wrapNodes(t,{type:"listItem",checked:e.checked,spread:e.spread,children:[]},{at:m}),s();return}}else{d.removeNodes(t,{at:n}),s();return}const r=f.parent(t,n);t.getContentModelType(r)!==_.list&&(d.wrapNodes(t,{type:"list",ordered:!1,start:void 0,spread:void 0,children:[]},{at:n}),s())},render(t,{element:e,attributes:n,children:s}){return u("li",R(N({},n),{children:s}))},toggle:{},events:{onStartDelete:(t,e)=>(ue[1].action(t,T.parent(e),{}),!0),onStartEnter:(t,e)=>f.string(f.get(t,e))?!1:(ue[1].action(t,T.parent(e),{}),!0),onTab:(t,e)=>(ue[0].action(t,T.parent(e),{}),!0)},toolbarItems:ue});var J=re,hn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:J});const pe=x.exports.createContext({isHeader:!1});var mn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",TableContext:pe});const Me=A({type:"tableCell",isInline:!1,isLeaf:!1,contentType:_.tableRow,contentModelType:_.phrasing,wrappingParagraph:!1,events:{},toggle:{},toolbarItems:[],render:(t,{element:e,attributes:n,children:s})=>u(pe.Consumer,{children:({isHeader:r})=>r?u("th",R(N({},n),{children:s})):u("td",R(N({},n),{children:s}))})});var yn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Me});const Pe=A({type:"tableRow",isInline:!1,isLeaf:!1,contentType:_.table,contentModelType:_.tableRow,wrappingParagraph:!1,events:{},toggle:{},toolbarItems:[],render:(t,{element:e,attributes:n,children:s})=>u("tr",R(N({},n),{children:s}))});var bn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pe});const wn="\u6DFB\u52A0\u56FE\u7247",vn="object",xn={cols:{title:"\u5217\u6570",type:"number",min:2},rows:{title:"\u884C\u6570",type:"number",min:2}},Tn=["cols","rows"];var _n={title:wn,type:vn,properties:xn,required:Tn};$.add(We);const kn=t=>t.children.length,Ee=t=>t.children.length>0?t.children[0].children.length:0,Mn=[{key:"toggle-table",icon:u(j,{icon:We}),isActive:(t,e)=>S(f.get(t,e),"table"),isDisabled:(t,e)=>{const n=f.get(t,e);if(S(n,"table"))return!1;const s=f.parent(t,e),r=t.getContentModelType(s);return r?!V(B.contentType,r):!0},action:(t,e,n)=>{const s=f.get(t,e);if(S(s,"table")){const r=[...f.texts(s)].map(([o])=>o.text).join(" ");d.removeNodes(t,{at:e}),d.insertNodes(t,{type:"paragraph",children:[{text:r}]},{at:e})}else Te(t,n.target,_n,{cols:2,rows:2}).then(r=>{r&&v.withoutNormalizing(t,()=>{const{cols:o,rows:i}=r;d.removeNodes(t,{at:e}),d.insertNodes(t,{type:"table",align:void 0,children:Array(i).fill(0).map(()=>({type:"tableRow",children:Array(o).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))}))},{at:e})})})}},{key:"table-insert-row-above",icon:u(bt,{}),isActive:()=>!1,isDisabled:(t,e)=>!t.nearest([f.get(t,e),e],B),action:(t,e,n)=>{const s=t.nearest([f.get(t,e),e],B);if(!s)return;let r;if(t.selection){const i=t.selection.focus.path,m=t.nearest([f.get(t,i),i],Pe);m&&(r=m[1])}r||(r=s[1].concat(0));const o=Ee(s[0]);d.insertNodes(t,{type:"tableRow",children:Array(o).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))},{at:r})}},{key:"table-insert-row-below",icon:u(wt,{}),isActive:()=>!1,isDisabled:(t,e)=>!t.nearest([f.get(t,e),e],B),action:(t,e,n)=>{const s=t.nearest([f.get(t,e),e],B);if(!s)return;let r;if(t.selection){const i=t.selection.focus.path,m=t.nearest([f.get(t,i),i],Pe);m&&(r=m[1])}r||(r=s[1].concat(kn(s[0])-1)),r=T.next(r);const o=Ee(s[0]);d.insertNodes(t,{type:"tableRow",children:Array(o).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))},{at:r})}},{key:"table-insert-row-left",icon:u(vt,{}),isActive:()=>!1,isDisabled:(t,e)=>!t.nearest([f.get(t,e),e],B),action:(t,e,n)=>{const s=t.nearest([f.get(t,e),e],B);if(!s)return;let r;if(t.selection){const o=t.selection.focus.path,i=t.nearest([f.get(t,o),o],Me);i&&(r=i[1][i[1].length-1])}typeof r!="number"&&(r=0);for(const[o]of Array(s[0].children.length).fill(0).entries()){const i=s[1].concat(o,r);d.insertNodes(t,{type:"tableCell",children:[{text:""}]},{at:i})}}},{key:"table-insert-row-right",icon:u(xt,{}),isActive:()=>!1,isDisabled:(t,e)=>!t.nearest([f.get(t,e),e],B),action:(t,e,n)=>{const s=t.nearest([f.get(t,e),e],B);if(!s)return;let r;if(t.selection){const o=t.selection.focus.path,i=t.nearest([f.get(t,o),o],Me);i&&(r=i[1][i[1].length-1])}typeof r!="number"&&(r=Ee(s[0])-1),r+=1;for(const[o]of Array(s[0].children.length).fill(0).entries()){const i=s[1].concat(o,r);d.insertNodes(t,{type:"tableCell",children:[{text:""}]},{at:i})}}}],B=A({type:"table",isInline:!1,isLeaf:!1,contentType:_.flow,contentModelType:_.table,wrappingParagraph:!1,events:{},toggle:{},toolbarItems:Mn,render:(t,{element:e,attributes:n,children:s})=>{const[r,...o]=s,i={isHeader:!0,align:e.align},m={isHeader:!1,align:e.align};return u(ee,{element:e,children:Y("table",R(N({},n),{children:[u(pe.Provider,{value:i,children:u("thead",{children:r})}),u(pe.Provider,{value:m,children:u("tbody",{children:o})})]}))})}});var Pn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:B}),En=A({type:"thematicBreak",isLeaf:!1,isInline:!1,wrappingParagraph:!1,contentType:_.flow,contentModelType:null,render(t,{element:e,children:n,attributes:s}){return u(ee,{element:e,children:Y(ke,{children:[u("hr",N({},s)),n]})})},toggle:{prefix:/^---$/,estimatePrefixLength:3,toggle:(t,e,n)=>{n?(d.removeNodes(t,{at:e}),d.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:e}),d.insertNodes(t,{type:"thematicBreak",children:[]},{at:e}),q.deselect(t),d.select(t,v.start(t,T.next(e)))):d.setNodes(t,{type:"thematicBreak",children:[{text:""}]},{at:e})},onTrigger:(t,e,n)=>{if(!(n.length>1))return!0}},events:{},toolbarItems:[]}),Nn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:En});const Cn={"./blockquote/BlockquoteNode.tsx":sn,"./code/CodeNode.tsx":Ft,"./heading/HeadingNode.tsx":an,"./image/ImageNode.tsx":gn,"./link/LinkNode.tsx":Xt,"./list/ListItemNode.tsx":hn,"./list/ListNode.tsx":dn,"./paragraph/ParagraphNode.tsx":rn,"./table/TableCellNode.tsx":yn,"./table/TableNode.tsx":Pn,"./table/TableRowNode.tsx":bn,"./table/context.tsx":mn,"./text/TextNode.tsx":jt,"./thematic-break/ThematicBreakNode.tsx":Nn};function Sn(t){for(const[e,{default:n}]of Object.entries(Cn))typeof(n==null?void 0:n.register)=="function"&&(console.debug("auto detected",e),n.register(t))}$.add(he,me,ye,le);function In(t,e){var r;if(!e)return[];const n=(r=q.toSlateRange(t,e,{exactMatch:!0}))!=null?r:t.selection;if(n){const[o]=v.nodes(t,{at:n,match:i=>{const m=i.type;if(m){const y=t.factory.customElementMap.get(m);if(y&&y.contentModelType!==_.value)return!0}return!1}});if(!o)return[]}return X.toolbarItems.concat(t.factory.inlineConfigs.flatMap(o=>o.toolbarItems)).map(({key:o,isDisabled:i,isActive:m,action:y,icon:P,tips:a})=>({key:o,disabled:n?i(t,n):!1,active:n?m(t,n):!1,icon:P,action:n?p=>y(t,n,p):()=>{},tips:a}))}function Rn(){const t=de(),e=x.exports.useRef(null),n=x.exports.useRef(),[s,r]=x.exports.useState(!0),o=Ke(),[i,m]=x.exports.useState([]);t.hidePopper=()=>r(!0);const y=x.exports.useMemo(()=>({getBoundingClientRect(){return n.current?n.current.getBoundingClientRect():{width:0,height:0}}}),[t,n]),{styles:P,attributes:a,update:p}=Tt(y,e.current,{placement:"top",modifiers:[{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,8]}}]});return t.updatePopper=c=>{if(c){const l=!n.current;n.current=c,l&&setTimeout(()=>{t.updatePopper()},0)}const w=In(t,n.current);m(w),w.length>0?(r(!1),p&&p()):r(!0),o()},t.togglePopper=c=>{s?t.updatePopper(c):t.hidePopper()},u("div",R(N({className:"ti-hovering-toolbar",ref:e,style:R(N({},P.popper),{opacity:s?0:1,pointerEvents:s?"none":"initial"})},a.popper),{children:i.map(c=>u(Ve,{action:c.action,active:c.active,disabled:c.disabled,icon:c.icon,tips:c.tips},c.key))}))}var G;(function(t){t[t.replace=1]="replace",t[t.wrap=2]="wrap",t[t.unwrap=3]="unwrap",t[t.custom=4]="custom"})(G||(G={}));const fe=x.exports.forwardRef(({disabled:t=!1,initialMarkdown:e="",config:n,uploadFile:s},r)=>{const[o,i]=x.exports.useState([]),m=x.exports.useMemo(()=>{const g=new en;return Sn(g),n&&n(g),g.freezeProcessors(),g},[]),y=x.exports.useMemo(()=>{const g=_t(kt(Mt()));return m.wrapEditor(g,i)},[m]);x.exports.useEffect(()=>{r&&(typeof r=="function"?r(y):r.current=y)},[y,r]),x.exports.useEffect(()=>{e&&(y.markdown=e)},[y]);const P=x.exports.useMemo(()=>m.createDefaultEditableProps(y),[m,y]),a=x.exports.useRef(null),p=x.exports.useMemo(()=>({getEditorDOMRect(){var g,h;return(h=(g=a.current)==null?void 0:g.getBoundingClientRect())!=null?h:new DOMRect}}),[a]),[c,w]=x.exports.useState();y.setActionForm=w,s&&(y.uploadFile=s);const l=x.exports.useMemo(()=>{if(c)return Pt.exports.createPortal(c,document.body)},[c]),b=x.exports.useCallback(g=>{i(g)},[i]);return x.exports.useLayoutEffect(()=>{m.triggerEditorMounted(y)},[y]),Y(Et,{editor:y,onChange:b,value:o,children:[u(Rn,{}),u(Qe.Provider,{value:p,children:u("div",{className:"ti-community-editor-container",ref:a,children:u(Nt,N({as:"article",className:"ti-community-editor markdown-body",readOnly:t},P))})}),l]})});fe.displayName="TiEditor";fe.propTypes={disabled:Ue.bool,initialMarkdown:Ue.string};fe.defaultProps={disabled:!1,initialMarkdown:""};const zn=t=>{console.log(t)};var Dn=A({type:"section",isLeaf:!1,isInline:!1,contentType:_.flow,contentModelType:_.flow,wrappingParagraph:!1,normalize:(t,e,n,s)=>{e.children.length===0&&(d.removeNodes(t,{at:n}),s())},render(t,{attributes:e,children:n}){return u("section",R(N({},e),{contentEditable:!1,onBeforeInputCapture:zn,children:n}))},events:{},toggle:{},toolbarItems:[]});const On=()=>t=>{Ct(t,n=>"children"in n&&"type"in n,n=>{for(let s=n.children.length-1;s>=0;--s){const r=n.children[s];r.type==="section"&&n.children.splice(s,1,...r.children)}})};function Ln(t){Dn.register(t),t.configSerializeProcessor(On);let e=[];t.configSections=n=>{e=n},t.onWrapEditor(n=>{const{normalizeNode:s,deleteFragment:r,deleteBackward:o,deleteForward:i,insertFragment:m}=n,y=[];n.insertFragment=p=>{m(p.filter(c=>!S(c,"section")))},n.deleteFragment=p=>{v.nodes(n,{match:c=>S(c,"section"),mode:"highest"})||r(p)},n.deleteBackward=p=>{if(n.selection){const c=v.before(n,n.selection,{unit:p});if(c&&S(v.node(n,c,{depth:1})[0],"section")){console.warn("match section");return}}o(p)},n.deleteForward=p=>{if(n.selection){const c=v.after(n,n.selection,{unit:p});if(c&&S(v.node(n,c,{depth:1})[0],"section")){console.warn("match section");return}}i(p)};const P=p=>{let c=0;return n.selection&&(c=n.selection.focus.path[0]),d.insertNodes(n,[p,{type:"paragraph",children:[{text:""}]}],{at:[c]}),v.pathRef(n,[c])},a=()=>{let p=!1;return v.withoutNormalizing(n,()=>{if(e.length)if(y.length===0){for(let c=e.length-1;c>=0;--c)y[c]=P(e[c]);return}else{for(let c=e.length-1;c>=0;--c){const w=y[c];w.current&&S(f.get(n,w.current),"section")||(w.unref(),y[c]=P(e[c]),p=!0)}if(p)return}}),p};n.normalizeNode=p=>{a()||s(p)},Object.defineProperty(n,"markdown",{get(){console.warn("editor.markdown was disabled for layout plugin, use editor.getSectionMarkdown instead")},set(){console.warn("editor.markdown was disabled for layout plugin, use editor.setSectionMarkdown instead")}}),n.getSectionRange=p=>{if(p>=y.length)return;let c=y[p].current;if(!c)return;let w;if(p<y.length-1?w=y[p+1].current:w=[n.children.length-1],!!w)return c=T.next(c),w=T.previous(w),T.isBefore(w,c)&&(w=c),{anchor:v.start(n,c),focus:v.end(n,w)}},n.getSection=p=>{const c=n.getSectionRange(p);return c?v.fragment(n,c):[]},n.getSectionMarkdown=p=>t.generateMarkdown(n.getSection(p)),n.setSection=(p,c)=>{const w=n.getSectionRange(p);!w||(d.select(n,w),n.insertFragment(c))},n.setSectionMarkdown=(p,c)=>{n.setSection(p,t.parseMarkdown(c))}}),t.onEditorMounted(n=>{v.normalize(n,{force:!0})})}const An=`### \u5F15\u7528 (blockquote)

\`\`\`markdown
> blockquote
> 
> yeah
\`\`\`

> blockquote
> 
> yeah

- \u6DFB\u52A0\u5F15\u7528
  - \u8F93\u5165 \`>\` \u5E76\u8F93\u5165\u7A7A\u683C
- \u5220\u9664\u5F15\u7528
  - \u5728\u5F15\u7528\u8D77\u59CB\u5904\u70B9\u51FB \`<Backspace>\`
`;var Fn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:An});const jn=`### Codes

### Usage

- \u8F93\u5165 \\\`\\\`\\\` \u52A0\u7A7A\u683C

### Examples

\`\`\`javascript
console.log('hello world')
\`\`\`

\`\`\`sql
SELECT * FROM hello_world;
\`\`\`

`;var $n=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:jn});const Bn=`### \u6807\u9898

\`\`\`markdown
# h1
## h2
### h3
#### h4
##### h5
###### h6
\`\`\`

> # h1
> ## h2
> ### h3
> #### h4
> ##### h5
> ###### h6

- \u521B\u5EFA\u6807\u9898
  1. \u8F93\u5165 1-6 \u4E2A \`#\` \u5E76\u8F93\u5165\u7A7A\u683C
  2. \u5728\u6807\u9898\u4E2D\u95F4\u6216\u7ED3\u5C3E\u70B9\u51FB \`<Enter>\`
- \u5220\u9664\u6807\u9898
  - \u5728\u6807\u9898\u8D77\u59CB\u5904\u70B9\u51FB \`<Enter>\` \u4EE5\u5C06\u6807\u9898\u8F6C\u6362\u6210\u6BB5\u843D
`;var qn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Bn});const Hn=`### Image

![google logo](https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png "google")
`;var Wn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Hn});const Un=`### \u94FE\u63A5

\`\`\`
[title](url)
\`\`\`

> [title](#)

- \u521B\u5EFA\u94FE\u63A5
  - \u8F93\u5165\u94FE\u63A5 url \u5E76\u8F93\u5165\u7A7A\u683C\u4F1A\u81EA\u52A8\u8F6C\u6362
`;var Vn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Un});const Kn=`### \u5217\u8868

\`\`\`markdown
- \u65E0\u5E8F\u5217\u8868
- ...
  - \u7F29\u8FDB\u5217\u8868

1. \u6709\u5E8F\u5217\u8868
\`\`\`

> - \u65E0\u5E8F\u5217\u8868
> - ...
>   - \u7F29\u8FDB\u5217\u8868
> 
> 1. \u6709\u5E8F\u5217\u8868 1
> 2. \u6709\u5E8F\u5217\u8868 2

\u4F7F\u7528\u4EE5\u4E0B\u65B9\u5F0F\u63A7\u5236 Markdown \u5217\u8868\uFF1A
- \u65B0\u5EFA\u5217\u8868\uFF1A
  1. \u8F93\u5165 \`-\` \u52A0\u7A7A\u683C\u63D2\u5165\u65E0\u5E8F\u5217\u8868
  2. \u8F93\u5165 \`number.\` \u52A0\u7A7A\u683C\u63D2\u5165\u6709\u5E8F\u5217\u8868
- \u5217\u8868\u7F29\u8FDB\uFF1A
  1. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`<Tab>\` \u751F\u6210\u4E0B\u7EA7\u5217\u8868 
  2. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`-\` \u6216 \`<number>\`\u3002
- \u53D6\u6D88\u5217\u8868
  1. \u5728\u7A7A\u5217\u8868\u9879\u4E2D\u76F4\u63A5\u8F93\u5165 \`<Enter>\`
`;var Qn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Kn});const Gn=`### Table

| foo | bar |
| :-- | :-: |
| baz | qux |

`;var Yn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Gn});const Xn=`# a-editor

## \u6280\u672F\u6808

- core
  - [slate](https://www.slatejs.org/)
  - [remark](https://remark.js.org/)
  - [remark-slate-transformer](https://github.com/inokawa/remark-slate-transformer)
- code highlight
  - [prism](https://prismjs.com/)

## \u6837\u5F0F\u914D\u7F6E

### \u4EE3\u7801\u9AD8\u4EAE

\u5728 \`src/slate-markdown/elements/code/style.less\` \u6DFB\u52A0\u5BF9\u5E94 token \u6837\u5F0F\u3002

abc
deb

## \u7528\u6CD5
`,Jn={"./slate-markdown/elements/blockquote/instructions.md":Fn,"./slate-markdown/elements/code/instructions.md":$n,"./slate-markdown/elements/heading/instructions.md":qn,"./slate-markdown/elements/image/instructions.md":Wn,"./slate-markdown/elements/link/instructions.md":Vn,"./slate-markdown/elements/list/instructions.md":Qn,"./slate-markdown/elements/table/instructions.md":Yn},Zn=Xn+`

`+Object.values(Jn).map(t=>t.plainText).join(`

`);function es(t){t.use(Ln),t.configSections([{type:"section",children:[{type:"paragraph",depth:1,children:[{text:"section",inlineCode:!0},{text:" \u65E0\u6CD5\u4FEE\u6539\u6216\u5220\u9664\uFF0C\u4F7F\u7528\u65B9\u6CD5\u67E5\u770B "},{text:"plugins/layout",inlineCode:!0}]}]}]),t.onEditorMounted(e=>{setTimeout(()=>{e.setSectionMarkdown(0,Zn)})})}async function ts(t){return new Promise((e,n)=>{const s=new FileReader;s.onloadend=function(){setTimeout(()=>{e(s.result)},500)},s.onerror=function(){n(s.error)},s.readAsDataURL(t)})}function ns(){return u("div",{children:u(fe,{config:es,uploadFile:ts})})}St.render(u(It.StrictMode,{children:u(ns,{})}),document.getElementById("root"));
