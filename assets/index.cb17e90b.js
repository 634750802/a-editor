var Pt=Object.defineProperty,Nt=Object.defineProperties;var Rt=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var we=(t,e,n)=>e in t?Pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P=(t,e)=>{for(var n in e||(e={}))Fe.call(e,n)&&we(t,n,e[n]);if(se)for(var n of se(e))qe.call(e,n)&&we(t,n,e[n]);return t},O=(t,e)=>Nt(t,Rt(e));var Ee=(t,e)=>{var n={};for(var r in t)Fe.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&se)for(var r of se(t))e.indexOf(r)<0&&qe.call(t,r)&&(n[r]=t[r]);return n};var F=(t,e,n)=>(we(t,typeof e!="symbol"?e+"":e,n),n);import{E as z,u as oe,r as x,a as d,j as p,c as Y,T as ae,l as V,f as He,b as We,d as D,F as $,e as Se,g as ke,h as Ce,i as le,R as K,P as T,N as v,k as q,m as Ue,n as At,o as g,p as Me,q as Ve,s as I,_ as ie,t as ce,v as Pe,w as Ge,x as Ot,y as Qe,z as Ke,A as Ye,B as Xe,C as Je,D as Ze,G as Ne,I as zt,H as It,J as Lt,K as Bt,L as Dt,M as jt,O as ue,Q as $t,S as Ft,U as pe,V as et,W as fe,X as qt,Y as Ht,Z as Wt,$ as Ut,a0 as tt,a1 as Vt,a2 as Gt,a3 as Qt,a4 as Kt,a5 as Yt,a6 as Xt,a7 as Jt,a8 as Zt,a9 as en,aa as tn,ab as nt,ac as rt,ad as st,ae as nn,af as rn,ag as sn,ah as de,ai as on,aj as ge}from"./vendor.58180610.js";const an=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};an();var E;(function(t){t[t.flow=16]="flow",t[t.list=32]="list",t[t.phrasing=48]="phrasing",t[t.staticPhrasing=49]="staticPhrasing",t[t.value=64]="value",t[t.table=80]="table",t[t.tableRow=96]="tableRow"})(E||(E={}));function W(t,e){return t===e||t<e&&(t^e)<16}function j(t){return O(P({},t),{register(e){e.define(O(P({},t),{isEditable:typeof t.isEditable=="boolean"?t.isEditable:!0}))}})}function M(t,e){return z.isElement(t)?e instanceof Array?e.indexOf(t.type)>=0:t.type===e:!1}function ot({icon:t,active:e,disabled:n,action:r,tips:s}){const a=oe(),o=x.exports.useCallback(i=>{r&&i.button===0&&(i.preventDefault(),i.stopPropagation(),n||d.withoutNormalizing(a,()=>{r(i)}))},[r]),l=p("span",{className:Y("a-editor-toolbar-item",{active:e,disabled:n}),onMouseDown:o,children:t});return s?p(ae,{content:p("span",{className:"toolbar-item-tips",children:s}),children:l}):l}V.add(He,We);function ln({extraWidth:t,isEmpty:e,element:n,items:r,setActive:s}){return p(ae,{appendTo:"parent",arrow:!1,content:cn(r),hideOnClick:!1,interactive:!0,onHide:()=>s(!1),onShow:()=>s(!0),children:D("div",{className:"line-operations",contentEditable:!1,children:[p("span",{className:"icon",children:p($,{icon:e?We:He})}),p("div",{className:"spacer",style:{width:t,height:"100%"}})]})})}const cn=t=>p("div",{className:"block-toolbar",children:t.map((e,n)=>p("div",{className:"toolbar-group",children:e.map(r=>p(ot,{action:r.action,active:r.active,disabled:r.disabled,icon:r.icon,tips:r.tips},r.key))},n))});V.add(Se,ke,Ce,le);function at(t,e){if(!!e)return typeof e=="function"?e(t):e}function un(t,e){const n=e==null?void 0:e.current;return n?t.factory.lineActions.map(r=>t.getActions(n,r).map(({action:{key:s,icon:a,tips:o},state:l})=>({key:s,disabled:l.disabled,active:l.active,icon:at(l,a),tips:at(l,o),action:i=>{t.runAction(s,n,i)}}))):[]}function lt(){const[t,e]=x.exports.useState(0);return()=>{e(n=>n+1)}}const it=x.exports.createContext({getEditorDOMRect:()=>new DOMRect});function Z({element:t,children:e}){const[n,r]=x.exports.useState(null),s=x.exports.useRef(),a=oe(),o=un(a,s.current),l=lt(),[i,u]=x.exports.useState(0),{getEditorDOMRect:f}=x.exports.useContext(it),m=x.exports.useCallback(()=>{var S;const b=(S=n==null?void 0:n.getBoundingClientRect())!=null?S:new DOMRect,{x:_=0}=b,{x:k}=f();return u(_-k),b},[f,n]);x.exports.useLayoutEffect(()=>{var b,_,k,S;if(typeof document!="undefined")if(n){const A=document.createRange();A.selectNode(n.childNodes.item(0));const R=K.toSlateRange(a,A,{exactMatch:!1,suppressThrow:!0});if(R){let B=T.common(R.anchor.path,R.focus.path);for(;B.length!==0;){if(d.isBlock(a,v.get(a,B))){s.current=d.pathRef(a,B);break}B=T.parent(B)}}else s.current&&((_=(b=s.current).unref)==null||_.call(b)),s.current=void 0}else s.current&&((S=(k=s.current).unref)==null||S.call(k)),s.current=void 0},[n]);const[y,w]=x.exports.useState(!1),c=(()=>{const b=t.children[0];return t.children.length===1&&q.isText(b)&&b.text===""})();return Ue()?typeof e=="function"?e({active:y,pathRef:s.current}):e:p(At,{appendTo:typeof document=="undefined"?"parent":document.body,arrow:!1,getReferenceClientRect:m,hideOnClick:!1,interactive:!0,interactiveBorder:12,offset:[0,8],onTrigger:l,placement:"left",popperOptions:{modifiers:[{name:"flip",options:{allowedAutoPlacements:["left"]}}]},ref:r,render:()=>p(ln,{element:t,extraWidth:i,isEmpty:c,items:o,setActive:w}),children:typeof e=="function"?e({active:y,pathRef:s.current}):e})}function ct({editor:t,pathRef:e,options:n,lang:r}){const s=x.exports.useCallback(a=>{(e==null?void 0:e.current)&&g.setNodes(t,{lang:a.currentTarget.value},{at:e.current})},[t,e]);return D("select",{className:"lang-selector",contentEditable:!1,onChange:s,tabIndex:void 0,value:r||void 0,children:[p("option",{}),n.map(a=>p("option",{children:a},a))]})}var pn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ct});const fn=["markdown","javascript","typescript","jsx","tsx","sql","bash","go","rust","json","log"],ee=Symbol("prism_token"),ut=({attributes:t,element:e,children:n},r,s=!1)=>p("pre",O(P({},t),{className:Y({active:r,selected:s},e.lang?`language-${e.lang}`:void 0),children:p("code",{className:"prism-code",children:n})})),pt=j({type:"code",isInline:!1,isLeaf:!1,wrappingParagraph:!1,contentType:E.flow,contentModelType:E.value,render:(t,e)=>{const{element:n}=e,r=Ue(),s=Me();return r?ut(e,!1):p(Z,{element:n,children:({active:a,pathRef:o})=>p(ae,{appendTo:document.body,content:p(ct,{editor:t,lang:n.lang,options:fn,pathRef:o}),interactive:!0,placement:"top-start",children:ut(e,a,s)})})},toggle:{prefix:/^`{3}(?: (\w+))?$/,toggle:(t,e,n)=>t.runAction("toggle-codeblock",e),onTrigger:(t,e,n)=>{if(n.length>1)return;const r=/^`{3}(?: (\w+))?$/.exec(t);return r?{lang:r[1]||"markdown",meta:void 0}:{lang:"markdown",meta:void 0}}},events:{},decorate:(t,[e,n],r)=>{if(q.isText(e)&&r.lang){const s=Ve.languages[r.lang];if(!s)return[];const a=[],o=Ve.tokenize(e.text,s);let l=0;for(const i of o){const u=ft(i),f=l+u;typeof i!="string"&&a.push({[ee]:i.type,anchor:{path:n,offset:l},focus:{path:n,offset:f}}),l=f}return a}return[]}}),ft=t=>typeof t=="string"?t.length:typeof t.content=="string"?t.content.length:t.content.reduce((e,n)=>e+ft(n),0);var dn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SYMBOL_PRISM_TOKEN:ee,default:pt}),N;(function(t){t.strong="strong",t.emphasis="emphasis",t.delete="delete",t.inlineCode="inlineCode"})(N||(N={}));const Re=j({isLeaf:!0,contentType:E.staticPhrasing,contentModelType:E.value,canContainsContentModelTypeOf:t=>t.inlineCode?E.value:(t.strong||t.emphasis||t.delete,E.phrasing),normalize:(t,e,n,r)=>{if(e.text===""){const s=[N.strong,N.emphasis,N.delete,N.inlineCode].filter(a=>!!e[a]);s.length>0&&g.unsetNodes(t,s,{at:n})}},render(t,{leaf:e,children:n,attributes:r}){let s=n;return e[ee]&&(s=p("span",{className:Y(e[ee]?`token ${e[ee]}`:void 0,r.className),children:s})),e.delete&&(s=p("del",{children:s})),e.emphasis&&(s=p("em",{children:s})),e.strong&&(s=p("strong",{children:s})),e.inlineCode&&(s=p("code",{children:s})),p("span",O(P({},r),{children:s}))},toggleDecorator:(t,e,n)=>{const r=gt(t),s=a=>r(v.get(t,a.anchor.path),a.anchor.path);Ae(t,e,n)?I.isCollapsed(e)?s(e)&&d.addMark(t,n,!1):g.setNodes(t,{[n]:!1},{match:r,split:!0}):I.isCollapsed(e)?s(e)&&(d.addMark(t,n,!0),n===N.inlineCode?(d.addMark(t,N.inlineCode,!1),d.addMark(t,N.emphasis,!1),d.addMark(t,N.delete,!1)):d.addMark(t,N.inlineCode,!1)):(g.setNodes(t,{[n]:!0},{match:r,split:!0}),n===N.inlineCode?g.unsetNodes(t,[N.delete,N.emphasis,N.strong],{match:r,split:!0}):g.unsetNodes(t,N.inlineCode,{match:r,split:!0}))}});function Ae(t,e,n){if(!K.hasRange(t,e))return!1;const r=d.marks(t);return r?!!r[n]:!1}const dt=(t,e)=>{const[n]=d.nodes(t,{at:e,match:r=>!t.isEditable(r)});return!n},he=(t,e)=>{const n=Oe(t),[r]=d.nodes(t,{at:e,match:n});return!!r},gt=t=>(e,n)=>{const r=Oe(t);if(!q.isText(e))return!1;const s=v.parent(t,n);return z.isElement(s)?r(s,T.parent(n)):!1},Oe=t=>(e,n)=>{if(z.isElement(e)){const r=t.factory.customElementMap.get(e.type);return r&&r.contentModelType?W(r.contentModelType,E.phrasing):!1}else return!1};function ze(t,e,n,r){if(I.isRange(e)){if(!K.hasRange(t,e))return!1}else if(T.isPath(e)){if(!d.hasPath(t,e))return!1}else if(!K.hasRange(t,{anchor:e,focus:e}))return!1;if(T.isPath(e)){const a=v.get(t,e);return M(a,n)&&(r?r(a):!0)}const[s]=d.nodes(t,{at:I.isRange(e)?d.unhangRange(t,e):e,match:a=>!d.isEditor(a)&&M(a,n)&&(r?r(a):!0)});return!!s}var gn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get TextNodeDecorator(){return N},isDecoratorActive:Ae,isRangeEditable:dt,isRangeCustomTextPropsEnabled:he,isCustomTextPropsEnabled:gt,isPhrasing:Oe,isElementActive:ze,default:Re});class hn{constructor(e,n){F(this,"state",[]);this.factory=e,this.editor=n}process(e){const[n,r]=e;if(d.isEditor(n))return this.state=[],[];if(z.isElement(n)){const s=this.factory.customElementMap.get(n.type);if(s&&!s.isInline){const a=s;if(a.decorate)return this.state.push({element:n,path:r,config:a}),[]}}if(this.state.length>0){for(const s of this.state.reverse())if(T.isAncestor(s.path,r))return s.config.decorate(this.editor,e,s.element)}return[]}}let mn=0;class bn{constructor(){F(this,"blockConfigs",[]);F(this,"inlineConfigs",[]);F(this,"textConfig");F(this,"inlineSet",new Set);F(this,"voidSet",new Set);F(this,"nonEditableSet",new Set);F(this,"customElementMap",new Map);F(this,"contentTypeMap",new Map);F(this,"contentModelTypeMap",new Map);F(this,"id");F(this,"editorWrapHandlers",[]);F(this,"editorMountedHandlers",[]);this.id=++mn}use(e){return console.debug(`factory@${this.id}.use`,e.name),e(this),this}define(e){return e.isLeaf?this.textConfig=e:(e.isInline?(this.inlineSet.add(e.type),this.inlineConfigs.push(e)):this.blockConfigs.push(e),this.customElementMap.set(e.type,e),this.contentModelTypeMap.set(e.type,e.contentModelType),this.contentTypeMap.set(e.type,e.contentType),e.contentModelType===null&&this.voidSet.add(e.type),e.isEditable&&this.nonEditableSet.add(e.type)),this}onWrapEditor(e){this.editorWrapHandlers.push(e)}onEditorMounted(e){this.editorMountedHandlers.push(e)}triggerEditorMounted(e){this.editorMountedHandlers.forEach(n=>n(e))}wrapEditor(e){const{isVoid:n,isInline:r,normalizeNode:s,insertBreak:a}=e;e.factory=this;function o(l){d.isEditor(l)?(console.group("#root"),l.children.forEach(o),console.groupEnd()):z.isElement(l)?(console.group(l.type),l.children.forEach(o),console.groupEnd()):console.debug("text")}return typeof window!="undefined"&&(window.debugPrintTree=()=>o(e),window.debugEditor=e),e.isContent=(l,i)=>z.isElement(l)?this.contentTypeMap.get(l.type)===i:q.isText(l)?this.textConfig.contentType===i:!1,e.canContainsContent=(l,i)=>{if(d.isEditor(l))return i===E.flow;if(z.isElement(l)){const u=this.contentModelTypeMap.get(l.type);return u?W(i,u):!1}else return q.isText(l)?W(i,Re.canContainsContentModelTypeOf(l)):!1},e.getContentType=l=>z.isElement(l)?this.contentTypeMap.get(l.type)||null:q.isText(l)&&this.textConfig.contentType||null,e.getContentModelType=l=>d.isEditor(l)?E.flow:z.isElement(l)?this.contentModelTypeMap.get(l.type)||null:q.isText(l)?this.textConfig.contentModelType:null,e.getContentTypePair=l=>z.isElement(l)?[this.contentTypeMap.get(l.type)||null,this.contentModelTypeMap.get(l.type)||null]:q.isText(l)?[this.textConfig.contentType||null,this.textConfig.contentModelType||null]:[null,null],e.toggle=(l,i,u)=>{const f=e.canToggle(l,i,!0);if(!f)return!1;const[[m,y],w]=f,c=typeof u=="object"?u:{};switch(w){case X.replace:return g.unsetNodes(e,Object.keys(v.extractProps(m)),{at:y}),g.setNodes(e,O(P({type:i.type},c),{children:[]}),{at:y}),!0;case X.wrap:return g.wrapNodes(e,P({type:i.type},c),{at:y}),!0;case X.custom:throw new Error("TODO: ToggleStrategy.custom");default:throw new Error("unknown ToggleStrategy: "+w)}},e.canToggle=(l,i,u)=>{const[f]=l,[m,y]=e.getContentTypePair(f);if(i.contentType!==m)return!1;if(i.contentModelType===y)return[l,X.replace];if(i.contentModelType===m)return[l,X.wrap];if(!u)return!1;const w=v.ancestors(e,l[1],{reverse:!0});for(const c of w){const h=e.canToggle(c,i,!1);if(h)return h}return!1},e.unwrap=(l,i)=>{if(!e.canUnwrap(l,i))return!1;const[u,f]=l,m=[[[]]];let y=[[u,[]]],w=0;for(;w<i.length-1;){const c=[];for(const[h,b]of y)for(const[_,k]of h.children.entries())c.push([k,b.concat(_)]);w+=1,y=c,m.push(c.map(([,h])=>h))}for(const c of m.reverse())for(const h of c.reverse())g.unwrapNodes(e,{at:f.concat(h),split:!0});return!0},e.canUnwrap=([l,i],u)=>{if(u.length===0)return!0;const f=e.getContentModelType(v.parent(e,i)),m=u[u.length-1].contentModelType;if(!f||!m||!W(m,f))return!1;let y=[[l,[]]],w=0;for(;w<u.length;){const c=[];for(const[h,b]of y){if(!M(h,u[w].type))return!1;for(const[_,k]of h.children.entries())c.push([k,b.concat(_)])}w+=1,y=c}return!0},e.wrap=(l,i,u)=>{if(!e.canWrap(l,i,u))return!1;const[,f]=l;let m=i.length-1;for(;m>=0;){const y=i[m],w=u[m];g.wrapNodes(e,Object.assign({type:y.type,children:[]},w),{at:f}),m--}return!0},e.canWrap=(l,i,u)=>{console.assert(i.length===u.length,"editor.canWrap: configs.length should be equals to params.length");const[f,m]=l,y=v.parent(e,m);let w=0,c=e.getContentModelType(y);for(;w<i.length;){const b=i[w];if(c===null||!W(b.contentType,c))return!1;c=b.contentModelType,w+=1}if(c===null)return!1;const h=e.getContentType(f);return h?W(h,c):!1},e.nearest=(l,i)=>{const[u,f]=l;if(M(u,i.type))return l;for(const m of v.ancestors(e,f,{reverse:!0}))if(M(m[0],i.type))return m},e.isVoid=l=>this.voidSet.has(l.type)||n(l),e.isInline=l=>this.inlineSet.has(l.type)||r(l),e.isEditable=l=>z.isElement(l)?this.nonEditableSet.has(l.type):!0,e.normalizeNode=l=>{let i=!0;const u=()=>{i=!1};d.withoutNormalizing(e,()=>{var y;const[f,m]=l;if(z.isElement(f)){const w=(y=this.customElementMap.get(f.type))==null?void 0:y.normalize;w&&w(e,f,m,u)}q.isText(f)&&this.textConfig.normalize&&this.textConfig.normalize(e,f,m,u),d.isEditor(f)&&(e.customLayout||(f.children.length===0?g.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[0]}):M(f.children[f.children.length-1],"paragraph")||g.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[f.children.length]})))}),i&&s(l)},e.insertBreak=()=>{if(e.selection){const l=v.parent(e,e.selection.anchor.path);if(e.getContentModelType(l)!==E.phrasing){g.insertText(e,`
`);return}}a()},this.editorWrapHandlers.forEach(l=>l(e)),e}createDefaultEditableProps(e){const n=c=>{var b;const{selection:h}=e;if(h&&I.isCollapsed(h)){const _=h.anchor,k=v.get(e,_.path),S=v.parent(e,_.path);if(q.isText(k)&&z.isElement(S)&&S.type==="paragraph"&&c.data===" "&&!T.hasPrevious(_.path)){const A=k.text.slice(0,_.offset);for(const{toggle:R}of this.blockConfigs)if(!(typeof R.estimatePrefixLength=="number"&&A.length>R.estimatePrefixLength)&&((b=R.prefix)==null?void 0:b.test(A))){const B=R.onTrigger(A,e,T.parent(_.path));if(typeof B!="undefined"){g.delete(e,{at:{path:_.path,offset:0},distance:_.offset}),R.toggle(e,T.parent(_.path),B),c.preventDefault();return}}}if(q.isText(k)&&d.isEdge(e,_,_.path)&&k.inlineCode&&e.addMark(N.inlineCode,void 0),d.isInline(e,S)){if(d.isEnd(e,_,_.path)){const A=T.next(T.parent(_.path));g.insertNodes(e,{text:c.data||""},{at:A}),g.move(e,{distance:1}),c.preventDefault();return}if(d.isStart(e,_,_.path)){const A=T.parent(_.path);g.insertNodes(e,{text:c.data||""},{at:A,select:!0}),c.preventDefault()}}}},r=(c,h)=>b=>{const{selection:_}=e;if(_&&I.isCollapsed(_)){const k=_.anchor,S=T.parent(k.path),A=v.get(e,S);if(z.isElement(A)){const R=this.customElementMap.get(A.type);if(!R)return;if(R.isInline){d.isEnd(e,k,S)&&(g.move(e,{unit:"offset"}),e.insertBreak(),b.preventDefault());return}const B=h(R.events);if(B&&B(e,k.path)){b.preventDefault();return}if(yn(e,k)){if(R){const Q=c(R.events);if(Q&&Q(e,k.path)){b.preventDefault();return}}if(A.type==="paragraph"){const Q=v.parent(e,S);if(!T.hasPrevious(S)&&z.isElement(Q)){const re=this.customElementMap.get(Q.type);if(re==null?void 0:re.wrappingParagraph){const $e=c(re.events);if($e&&$e(e,k.path)){b.preventDefault();return}}}}}}}},s=r(c=>c.onStartDelete,c=>c.onDeleteText),a=r(c=>c.onStartEnter,c=>c.onInsertParagraph),l=(c=>h=>{const{selection:b}=e;if(b&&I.isCollapsed(b)){const _=b.anchor,k=T.parent(_.path),S=v.parent(e,_.path);if(z.isElement(S)){const A=this.customElementMap.get(S.type);if(A){const R=c(A.events);if(R&&R(e,_.path)){h.preventDefault();return}}if(S.type==="paragraph"){const R=v.parent(e,k);if(z.isElement(R)){const B=this.customElementMap.get(R.type);if(B==null?void 0:B.wrappingParagraph){const Q=c(B.events);if(Q&&Q(e,_.path)){h.preventDefault();return}}}}}}})(c=>c.onTab),i=new hn(this,e),u=c=>i.process(c),f=(c,h)=>{const b=h?d.rangeRef(e,h):null;e.uploadFile&&Promise.all(c.map(e.uploadFile)).then(_=>_.map((k,S)=>({type:"image",url:k,title:void 0,alt:c[S].name,children:[{text:""}]}))).then(_=>{(b==null?void 0:b.current)&&g.select(e,b.current),e.insertFragment(_)}).catch(console.error)},m=(c,h)=>{const b=[...c.files].filter(_=>/image\/*/.test(_.type));b.length>0&&f(b,h)};return{renderElement:c=>{const h=this.customElementMap.get(c.element.type);return h?h.render(e,c):(console.warn(`${c.element.type} not impl`),x.exports.createElement("div",c.attributes,c.children))},renderLeaf:c=>this.textConfig?this.textConfig.render(e,c):x.exports.createElement("span",c.attributes,c.children),decorate:u,onDOMBeforeInput:c=>{ht(e,()=>{switch(console.log(c.inputType),c.inputType){case"insertText":n(c);break;case"deleteContentBackward":s(c);break;case"insertParagraph":a(c);break}})},onKeyDown:c=>{ht(e,()=>{if(ie("tab",c)){l(c);return}if(ie(["ctrl+enter"],c)){g.insertText(e,`
`);return}})},onSelect:c=>{const h=window.getSelection();h&&(h.isCollapsed?e.hideSelectionToolbar():h.rangeCount>0&&e.updateSelectionToolbar(h.getRangeAt(0)))},onBlur:c=>{e.hideSelectionToolbar()},onClick:()=>{},onPaste:c=>{const h=c.clipboardData;!h||m(h,e.selection)},onDrop:c=>{m(c.dataTransfer,K.findEventRange(e,c))}}}createDefaultChildren(e){return[]}}function yn(t,e){return e.offset===0&&!T.hasPrevious(e.path)&&q.isText(v.get(t,e.path))}function ht(t,e){let n=!0;d.withoutNormalizing(t,()=>{e(()=>{n=!1})}),n||d.normalize(t)}V.add(ce);const U=j({type:"blockquote",isInline:!1,isLeaf:!1,wrappingParagraph:!0,contentType:E.flow,contentModelType:E.flow,render:(t,{children:e,attributes:n})=>p("blockquote",O(P({},n),{children:e})),toggle:{prefix:/^>$/,toggle:(t,e,n)=>n?t.runAction("indent-blockquote",e):!1,onTrigger(){return!0}},events:{onStartDelete:(t,e)=>{const n=v.parent(t,T.parent(e));return M(n,"blockquote")?t.runAction("outdent-blockquote",T.parent(e)):!1}}});var _n=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:U});const xn=t=>{let e=!1,n=!1;const r=()=>{e=!0,t.preventDefault()},s=()=>{n=!0,t.stopPropagation()};return{nativeEvent:t,currentTarget:t.currentTarget,target:t.target,bubbles:t.bubbles,cancelable:t.cancelable,defaultPrevented:t.defaultPrevented,eventPhase:t.eventPhase,isTrusted:t.isTrusted,preventDefault:r,isDefaultPrevented:()=>e,stopPropagation:s,isPropagationStopped:()=>n,persist:()=>{},timeStamp:t.timeStamp,type:t.type}};function L(t,e,n){let r=t[e];return typeof r=="function"&&(Object.prototype.hasOwnProperty.call(t,e)||(r=r.bind(t))),t[e]=n(r),t}var C;(function(t){t.selection="selection",t.phrasing="phrasing",t.toplevel="toplevel"})(C||(C={}));function vn({key:t,type:e,tips:n,defaultParams:r={},action:s,computeState:a,hotkeys:o,icon:l}){const i=P({active:!1,disabled:!1},r),u={key:t,type:e,hotkeys:o!=null?o:[],tips:n!=null?n:null,icon:l!=null?l:null,computeState:a!=null?a:()=>i,action:(f,m,y)=>{const w=u.computeState(f,m);return console.log("run action",t,m,w),w.disabled?!1:s(f,m,w,y)}};return u}function me(t,e,n){let r=n!=null?n:t.selection;if(!!r)switch(I.isRange(r)&&(r=d.unhangRange(t,r)),e){case C.phrasing:{const s=d.path(t,r),a=v.get(t,s);if(t.getContentModelType(a)===E.phrasing||!q.isText(a)&&t.getContentType(a)===E.flow)return s;for(const[l,i]of v.ancestors(t,s))if(t.getContentModelType(l)===E.phrasing)return i;break}case C.selection:return d.range(t,r);case C.toplevel:{const s=d.path(t,r);if(s.length>=1)return[s[0]];break}}}function Tn(t){t.actions=[],t.actionMap=new Map,t.actionTypes={[C.selection]:[],[C.phrasing]:[],[C.toplevel]:[]};const e=new Map;t.defineAction=n=>{const r=vn(n);t.actionMap.set(r.key,r),t.actionTypes[r.type].push(r),t.actions.push(r);for(const s of r.hotkeys)e.set(s,r.key)},t.actionHotKeysHas=n=>{for(const r of e.keys())if(ie(r,n))return r},t.onWrapEditor(n=>{n.runAction=(r,s,a)=>{const o=t.actionMap.get(r);if(!o||(s=me(n,o.type,s),!s))return!1;const l=s;let i;return d.withoutNormalizing(n,()=>{i=o.action(n,l,a!=null?a:xn(new Event("fake")))}),i},n.getActions=(r,s)=>{let a=t.actions;s&&(a=s.map(l=>t.actionMap.get(l)).filter(l=>!!l));const o={[C.toplevel]:me(n,C.toplevel,r),[C.selection]:me(n,C.selection,r),[C.phrasing]:me(n,C.phrasing,r)};return a.map(l=>{const i=o[l.type];return{state:i?l.computeState(n,i):{active:!1,disabled:!0},action:l}})}}),L(t,"createDefaultEditableProps",n=>r=>L(n(r),"onKeyDown",s=>a=>{const o=t.actionHotKeysHas(a);if(o&&r.runAction(o,void 0,a)){a.preventDefault(),a.stopPropagation();return}s==null||s(a)})),t.lineActions||(t.lineActions=[["toggle-heading-1","toggle-heading-2","toggle-heading-3","toggle-heading-4","toggle-heading-5","toggle-heading-6"],["toggle-ordered-list","toggle-unordered-list","indent-list","outdent-list"],["toggle-blockquote","toggle-codeblock","toggle-table"]]),t.selectionActions||(t.selectionActions=[N.strong,N.emphasis,N.delete,N.inlineCode,"toggle-link","toggle-image","remove-selection-table","table-insert-row-right","table-insert-row-left","table-insert-row-above","table-insert-row-below","table-delete-row","table-delete-col"])}function wn(t){t.defineAction({key:"toggle-blockquote",icon:p($,{icon:ce}),type:C.phrasing,computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,U),a=!!s;let o;return s?o=!e.canUnwrap(s,[U]):o=!e.canToggle(r,U,!1),{active:a,disabled:o,blockquoteEntry:s}},action:(e,n,r)=>{if(r.active){if(r.blockquoteEntry)return e.unwrap(r.blockquoteEntry,[U])}else return e.toggle([v.get(e,n),n],U,void 0);return!1}}),t.defineAction({key:"indent-blockquote",icon:p($,{icon:ce}),type:C.phrasing,computeState:(e,n)=>({active:!1,disabled:!e.canToggle([v.get(e,n),n],U,!1)}),action:(e,n)=>e.toggle([v.get(e,n),n],U,void 0)}),t.defineAction({key:"outdent-blockquote",icon:p($,{icon:ce}),type:C.phrasing,computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,U),a=!!s,o=!s||!e.canUnwrap(s,[U]);return{active:a,disabled:o,blockquoteEntry:s}},action:(e,n,r)=>r.blockquoteEntry?e.unwrap(r.blockquoteEntry,[U]):!1})}var En=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:wn});function Sn(t){t.defineAction({key:"toggle-codeblock",type:C.phrasing,icon:p($,{icon:le}),computeState:(e,n)=>{const r=v.get(e,n),s=M(r,"code");let a;if(s)a=!1;else{const o=v.parent(e,n),l=e.getContentModelType(o);l?a=!W(pt.contentType,l):a=!0}return{active:s,disabled:a}},action:(e,n,r)=>{const s=v.get(e,n);if(r.active)g.unsetNodes(e,Object.keys(v.extractProps(s)),{at:n}),g.setNodes(e,{type:"paragraph"},{at:n});else{const a=v.string(s);g.removeNodes(e,{at:n}),g.insertNodes(e,{type:"code",lang:"markdown",meta:void 0,children:[{text:a}]},{at:n,select:!0})}return!0}})}var kn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Sn});const be=j({type:"heading",isInline:!1,isLeaf:!1,wrappingParagraph:!1,contentType:E.flow,contentModelType:E.phrasing,render:(t,{element:e,children:n,attributes:r})=>p(Z,{element:e,children:({active:s})=>x.exports.createElement(`h${e.depth}`,Object.assign(r,{className:Y({active:s})}),n)}),toggle:{prefix:/^#{1,6}$/,estimatePrefixLength:6,toggle:(t,e,n)=>{n?t.runAction(`toggle-heading-${n.depth}`,e):t.runAction("toggle-paragraph",e)},onTrigger:t=>({depth:t.length})},events:{onInsertParagraph:t=>{if(!t.selection)return!1;const e=d.point(t,t.selection),n=T.parent(d.path(t,t.selection));return d.isStart(t,e,n)?t.runAction("toggle-paragraph",n):d.isEnd(t,e,n)?t.runAction("insert-paragraph",T.next(n)):(g.splitNodes(t,{at:t.selection}),t.runAction("toggle-paragraph",T.next(n)))}}});var Cn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:be});V.add(Pe);const J=j({type:"paragraph",isLeaf:!1,isInline:!1,wrappingParagraph:!1,contentType:E.flow,contentModelType:E.phrasing,toggle:{},events:{},render(t,{element:e,attributes:n,children:r}){return p(Z,{element:e,children:({active:s})=>p("p",O(P({className:Y({active:s})},n),{children:r}))})}});var Mn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:J});function Pn(t){[1,2,3,4,5,6].forEach(e=>{const n=`H${e}`;t.defineAction({key:`toggle-heading-${e}`,type:C.phrasing,defaultParams:{depth:e},icon:p("span",{children:n}),computeState:(r,s)=>{const a=[v.get(r,s),s],o=r.nearest(a,be),l=!!o&&o[0].depth===e;let i;return o?i=!r.canToggle(o,J,!1):i=!r.canToggle(a,be,!0),{active:l,disabled:i,depth:e}},action:(r,s,a)=>{const o=[v.get(r,s),s];return a.active?r.toggle(o,J,void 0):r.toggle(o,be,{depth:e})}})})}var Nn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Pn});function mt(t,e){e&&(typeof e=="function"?e(t):e.current=t)}function Rn(t,e){return n=>{mt(n,t),mt(n,e)}}const ye=x.exports.forwardRef(function(s,r){var{children:t,attributes:a}=s,o=a,{ref:e}=o,n=Ee(o,["ref"]);return p("span",O(P({className:"void-element",contentEditable:!1,ref:Rn(r,e)},n),{children:t}))});ye.displayName="VoidElement";var An=j({type:"html",isLeaf:!1,isInline:!1,isEditable:!1,contentType:E.staticPhrasing,contentModelType:E.value,wrappingParagraph:!1,toggle:{},events:{},render(t,e){const{attributes:n,element:r,children:s}=e;return D(ye,{attributes:n,children:[p("span",{dangerouslySetInnerHTML:{__html:r.children[0].text}}),p("span",{hidden:!0,children:s})]})}}),On=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:An});V.add(Ge);const bt=j({type:"image",isInline:!0,isLeaf:!1,contentType:E.staticPhrasing,contentModelType:null,render:(t,{element:e,attributes:n,children:r})=>{const s=Me();return D(ye,{attributes:n,children:[p("img",{alt:e.alt,className:Y({selected:s}),src:e.url,title:e.title}),r]})},insert:(t,e,n)=>{g.insertNodes(t,[{text:" "},P({type:"image",children:[]},n),{text:" "}],{at:e})}});var zn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:bt});function In({schema:t,onSubmit:e,defaultValues:n}){return p("div",{contentEditable:!1,children:p(Ot,{className:"action-form",formData:n,onSubmit:r=>e(r.formData),schema:t})})}function Ln(t,e){return x.exports.useCallback(()=>t.selection?K.toDOMRange(t,t.selection).getBoundingClientRect():e.getBoundingClientRect(),[t,e])}function Bn(t,e){return x.exports.useCallback(()=>{t("user canceled"),e.current&&e.current.hide()},[t])}function Dn(){const t=x.exports.useRef(),e=x.exports.useCallback(n=>{t.current=n},[t]);return[t,e]}function jn(t,e,n,r){const s=x.exports.useCallback(a=>{var o;e(a),(o=r.current)==null||o.hide()},[e,r]);return x.exports.useMemo(()=>p(In,{defaultValues:n,onSubmit:s,schema:t}),[t,s])}function $n({editor:t,el:e,reject:n,resolve:r,schema:s,defaultValues:a}){const[o,l]=Dn(),i=Ln(t,e),u=Bn(n,o),f=jn(s,r,a,o);return p(ae,{content:f,getReferenceClientRect:i,interactive:!0,onClickOutside:u,onMount:l,placement:"right-start",visible:!0,children:p("span",{})})}function Ie(t,e,n,r){return new Promise((s,a)=>{t.setActionForm(p($n,{defaultValues:r,editor:t,el:e,reject:a,resolve:s,schema:n}))}).catch(s=>{if(s==="user canceled")return Promise.resolve(void 0);throw s})}const Fn="\u6DFB\u52A0\u56FE\u7247",qn="object",Hn={src:{title:"\u94FE\u63A5",type:"string",format:"url"},alt:{title:"\u66FF\u4EE3\u6587\u672C\uFF08alt\uFF09",type:"string"}},Wn=["src","alt"];var Un={title:Fn,type:qn,properties:Hn,required:Wn};function Vn(t){t.defineAction({key:"toggle-image",type:C.selection,icon:p($,{icon:Ge}),computeState:(e,n)=>{const r=ze(e,n,"image"),s=!T.equals(T.parent(n.focus.path),T.parent(n.anchor.path))||!he(e,n);return{active:r,disabled:s}},action:(e,n,r,s)=>{if(r.active)return g.unwrapNodes(e,{at:d.unhangRange(e,n),match:a=>!d.isEditor(a)&&z.isElement(a)&&a.type==="image"}),!0;{const a=d.rangeRef(e,n);return Ie(e,s.target,Un,{alt:d.string(e,n),src:""}).then(o=>{if(!!a.current&&o){const{src:l,alt:i}=o;d.withoutNormalizing(e,()=>{bt.insert(e,n,{url:l,title:"",alt:i})})}}).finally(()=>{a.unref()}),!1}}})}var Gn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Vn});V.add(Qe);const yt=j({type:"link",isInline:!0,isLeaf:!1,contentType:E.phrasing,contentModelType:E.staticPhrasing,normalize:(t,e,n,r)=>{v.string(e).trim().length===0&&(g.removeNodes(t,{at:n}),r())},render:(t,{element:e,attributes:n,children:r})=>p("a",O(P({href:e.url,rel:"noreferrer",style:{display:"inline-flex",cursor:"pointer"},target:"_blank"},n),{children:r})),insert:(t,e,s)=>{var a=s,{text:n}=a,r=Ee(a,["text"]);g.insertNodes(t,[P({type:"link",children:[{text:n}]},r),{text:" "}],{at:e,select:!0}),Ke.isPoint(e)&&g.move(t,{distance:1})}});var Qn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:yt});const Kn="\u6DFB\u52A0\u8D85\u94FE\u63A5",Yn="object",Xn={src:{title:"\u94FE\u63A5",type:"string",format:"url"},text:{title:"\u663E\u793A\u6587\u672C",type:"string"}},Jn=["src","text"];var Zn={title:Kn,type:Yn,properties:Xn,required:Jn};function er(t){t.defineAction({key:"toggle-link",type:C.selection,icon:p($,{icon:Qe}),computeState:(e,n)=>{const r=ze(e,n,"link"),s=!T.equals(T.parent(n.focus.path),T.parent(n.anchor.path))||!he(e,n);return{active:r,disabled:s}},action:(e,n,r,s)=>{if(r.active)return g.unwrapNodes(e,{at:d.unhangRange(e,n),match:a=>!d.isEditor(a)&&z.isElement(a)&&a.type==="link"}),!0;{const a=d.rangeRef(e,n);return Ie(e,s.target,Zn,{text:d.string(e,n),src:""}).then(o=>{if(!!a.current&&o){const{src:l,text:i}=o;d.withoutNormalizing(e,()=>{yt.insert(e,n,{url:l,title:"",text:i})})}}).finally(()=>{a.unref()}),!1}}})}var tr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:er});V.add(Ye,Xe);const H=j({type:"list",isLeaf:!1,isInline:!1,wrappingParagraph:!0,contentType:E.flow,contentModelType:E.list,normalize:(t,e,n,r)=>{if(e.children.length===0){g.removeNodes(t,{at:n}),r();return}if(T.hasPrevious(n)){const s=v.get(t,T.previous(n));if(M(s,"list")&&Boolean(s.ordered)===Boolean(e.ordered)&&s.start===void 0&&e.start===void 0){g.mergeNodes(t,{at:n}),r();return}}},render(t,{element:e,attributes:n,children:r}){return e.ordered?p("ol",O(P({},n),{start:e.start,children:r})):p("ul",O(P({},n),{children:r}))},toggle:{prefix:/^(?:-|\d+\.)$/,toggle:(t,e,n)=>{if(n===!1)throw new Error("should never reach");{let r;return t.runActionParams=n,t.nearest([v.get(t,e),e],H)?r=t.runAction("indent-list",e):r=t.runAction(`toggle-${n.ordered?"ordered":"unordered"}-list`,e),t.runActionParams=void 0,r}},onTrigger:t=>{if(t==="-")return{ordered:!1,start:void 0,spread:void 0};{const e=parseInt(t);return{ordered:!0,start:e===1?void 0:e,spread:void 0}}}},events:{}});var nr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:H});V.add(Je,Ze);const G=j({type:"listItem",isLeaf:!1,isInline:!1,wrappingParagraph:!0,contentType:E.list,contentModelType:E.flow,normalize:(t,e,n,r)=>{if(e.children.length>0)if(M(e.children[0],"list")){g.moveNodes(t,{at:n.concat(0),to:T.parent(n)}),r();return}else{const o=e.children.length-1;if(e.children.length>1&&M(e.children[o],"paragraph")){const l=T.next(n);g.moveNodes(t,{at:n.concat(o),to:l}),g.wrapNodes(t,{type:"listItem",checked:e.checked,spread:e.spread,children:[]},{at:l}),r();return}if(e.children.length>=1&&!M(e.children[0],"paragraph")){const l=v.parent(t,n);if(t.unwrap([l,T.parent(n)],[H,G])){r();return}}}else{g.removeNodes(t,{at:n}),r();return}const s=v.parent(t,n);t.getContentModelType(s)!==E.list&&(g.wrapNodes(t,{type:"list",ordered:!1,start:void 0,spread:void 0,children:[]},{at:n}),r())},render(t,{element:e,attributes:n,children:r}){return p("li",O(P({},n),{children:r}))},toggle:{},events:{onStartDelete:(t,e)=>t.runAction("outdent-list",T.parent(e)),onStartEnter:(t,e)=>v.string(v.get(t,e))?!1:t.runAction("outdent-list",T.parent(e)),onTab:(t,e)=>t.runAction("indent-list",T.parent(e))}});var rr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:G});const _t=t=>{let e,n;if(t.runActionParams&&typeof t.runActionParams=="object"){const{ordered:r,start:s}=t.runActionParams;typeof r=="boolean"&&(e=r),typeof s=="number"&&(n=s)}return{ordered:e,start:n}};function sr(t){t.defineAction({key:"indent-list",type:C.phrasing,icon:p($,{icon:Je}),computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,G),a=e.nearest(s!=null?s:r,H),o=!1,l=!a||!s||!T.hasPrevious(s[1])||a[0].children.length<=1;return P({active:o,disabled:l,listEntry:a,listItemEntry:s},_t(e))},action:(e,n,r)=>{var o;const{listEntry:s,listItemEntry:a}=r;return!a||!s?!1:e.wrap(a,[G,H],[{spread:void 0,checked:void 0},{ordered:(o=r.ordered)!=null?o:s[0].ordered,spread:void 0,start:r.start}])?(g.mergeNodes(e,{at:a[1]}),!0):!1}}),t.defineAction({key:"outdent-list",type:C.phrasing,icon:p($,{icon:Ze}),computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,G),a=e.nearest(s!=null?s:r,H);return{active:!1,disabled:!a||!s,listEntry:a,listItemEntry:s}},action:(e,n,r)=>{const{listEntry:s,listItemEntry:a}=r;if(!a||!s)return!1;const o=d.pathRef(e,a[1]),l=T.next(a[1]);if(d.hasPath(e,l)&&g.splitNodes(e,{at:l}),g.splitNodes(e,{at:a[1]}),o.current){const i=T.parent(o.current),u=[v.get(e,i),i];e.unwrap(u,[H,G]),g.splitNodes(e,{at:i})}return o.unref(),!0}}),[!0,!1].forEach(e=>{const n={ordered:e,spread:void 0,start:void 0},r={spread:void 0,checked:void 0};t.defineAction({key:`toggle-${e?"ordered":"unordered"}-list`,type:C.phrasing,icon:p($,{icon:e?Ye:Xe}),computeState:(s,a)=>{const o=[v.get(s,a),a],l=s.nearest(o,H),i=l?Boolean(l[0].ordered)===Boolean(e):!1;let u;return l?i?u=!s.canUnwrap(l,[H,G]):u=!0:u=!s.canWrap(o,[H,G],[n,r]),{active:i,disabled:u,listEntry:l}},action:(s,a,o)=>{const l=[v.get(s,a),a],{ordered:i,start:u}=_t(s);return o.listEntry?o.active?s.unwrap(o.listEntry,[H,G]):(g.setNodes(s,{ordered:i,start:u},{at:o.listEntry[1]}),!0):s.wrap(l,[H,G],[Object.assign({},n,{start:u}),r])}})})}var or=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:sr});function ar(t){t.defineAction({key:"toggle-paragraph",type:C.phrasing,icon:p($,{icon:Pe}),computeState:(e,n)=>{const r=[v.get(e,n),n],s=e.nearest(r,J),a=!!s;let o;return s?o=!0:o=!e.canToggle(r,J,!0),{active:a,disabled:o}},action:(e,n,r)=>{const s=[v.get(e,n),n];return r.active?!1:e.toggle(s,J,void 0)}}),t.defineAction({key:"insert-paragraph",type:C.toplevel,icon:p($,{icon:Pe}),computeState:()=>({active:!1,disabled:!1}),action:(e,n,r)=>(g.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:n,select:!0}),!0)})}var lr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:ar});const _e=x.exports.createContext({isHeader:!1});var ir=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",TableContext:_e});const Le=j({type:"tableCell",isInline:!1,isLeaf:!1,contentType:E.tableRow,contentModelType:E.phrasing,wrappingParagraph:!1,events:{onStartDelete:(t,e)=>!0,onInsertParagraph:(t,e)=>(t.insertText(`
`),!0)},toggle:{},render:(t,{element:e,attributes:n,children:r})=>p(_e.Consumer,{children:({isHeader:s})=>s?p("th",O(P({},n),{children:r})):p("td",O(P({},n),{children:r}))})});var cr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Le});const xt=j({type:"tableRow",isInline:!1,isLeaf:!1,contentType:E.table,contentModelType:E.tableRow,wrappingParagraph:!1,events:{},toggle:{},normalize:(t,e,n,r)=>{for(const[o,l]of e.children.entries())if(!M(l,"tableCell")){const i=t.getContentType(l);if(i)if(W(i,Le.contentModelType))g.unsetNodes(t,Object.keys(v.extractProps(l)),{at:n.concat(o)}),g.setNodes(t,{type:"tableCell"},{at:n.concat(o)});else{const[...u]=d.nodes(t,{at:n.concat(o),mode:"highest",match:m=>{if(q.isText(m))return!0;const y=t.getContentType(m);return!!y&&W(y,E.phrasing)}}),f=u.map(m=>m[0]);f.length===0&&(f[0]={text:""}),g.removeNodes(t,{at:n.concat(o)}),g.insertNodes(t,{type:"tableCell",children:u.map(m=>m[0])},{at:n.concat(o),select:!0})}}const s=e.children.length,a=v.parent(t,n).children[0].children.length;if(s===0)g.removeNodes(t,{at:n}),r();else if(s<a)g.insertNodes(t,Array(a-s).fill({type:"tableCell",children:[{text:""}]}),{at:n.concat(s)});else for(let o=s-1;o>=a;o--)g.removeNodes(t,{at:n.concat(o)})},render:(t,{element:e,attributes:n,children:r})=>p("tr",O(P({},n),{children:r}))});var ur=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xt});V.add(Ne);const vt=j({type:"table",isInline:!1,isLeaf:!1,contentType:E.flow,contentModelType:E.table,wrappingParagraph:!1,events:{},toggle:{},normalize:(t,e,n,r)=>{e.children.length===0&&(g.removeNodes(t,{at:n}),r());for(let s=e.children.length-1;s>=0;--s){const a=e.children[s],o=t.getContentType(a);(!o||!W(o,xt.contentType))&&g.removeNodes(t,{at:n.concat(s)})}},render:(t,{element:e,attributes:n,children:r})=>{const s=Me(),a=Y({selected:s}),[o,...l]=r,i={isHeader:!0,align:e.align},u={isHeader:!1,align:e.align};return p(Z,{element:e,children:D("table",O(P({className:a},n),{children:[o&&p(_e.Provider,{value:i,children:p("thead",{children:o})}),p(_e.Provider,{value:u,children:p("tbody",{children:l})})]}))})}});var pr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:vt});const fr="\u6DFB\u52A0\u56FE\u7247",dr="object",gr={cols:{title:"\u5217\u6570",type:"number",min:2},rows:{title:"\u884C\u6570",type:"number",min:2}},hr=["cols","rows"];var mr={title:fr,type:dr,properties:gr,required:hr};const xe=t=>t.children.length>0?t.children[0].children.length:0;function Be(t,e,n){let r;return t.selection&&([r]=d.nodes(t,{at:t.selection,mode:"lowest",match:s=>M(s,"tableRow")})),r?r[1]:e.concat(n)}function De(t,e){let n;if(t.selection){const r=t.selection.focus.path,s=t.nearest([v.get(t,r),r],Le);s&&(n=s[1][s[1].length-1])}return typeof n!="number"&&(n=e),n}function Tt(t,e,n){g.insertNodes(t,{type:"tableRow",children:Array(n).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))},{at:e})}function wt(t,e,n){for(const[r]of Array(e[0].children.length).fill(0).entries()){const s=e[1].concat(r,n);g.insertNodes(t,{type:"tableCell",children:[{text:""}]},{at:s})}}function br(t){t.defineAction({key:"toggle-table",type:C.phrasing,icon:p($,{icon:Ne}),computeState:(e,n)=>{const r=v.get(e,n),s=M(r,"table");let a,o;if(s)o=!1,a=[r,n];else{const l=v.parent(e,n),i=e.getContentModelType(l);i?o=!W(vt.contentType,i):o=!0}return{active:s,disabled:o,tableEntry:a}},action:(e,n,r,s)=>{if(r.active){if(!r.tableEntry)return!1;const[a,o]=r.tableEntry,l=[...v.texts(a)].map(([i])=>i.text).join(" ");return g.removeNodes(e,{at:o}),g.insertNodes(e,{type:"paragraph",children:[{text:l}]},{at:o}),!0}else{const a=d.pathRef(e,n);return Ie(e,s.target,mr,{cols:2,rows:2}).then(o=>{const l=a.current;!l||o&&d.withoutNormalizing(e,()=>{const{cols:i,rows:u}=o;g.removeNodes(e,{at:l}),g.insertNodes(e,{type:"table",align:void 0,children:Array(u).fill(0).map(()=>({type:"tableRow",children:Array(i).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))}))},{at:l})})}).finally(()=>a.unref()),!0}}}),t.defineAction({key:"remove-selection-table",type:C.selection,icon:p($,{icon:Ne}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,match:o=>M(o,"table")});return{active:!!r,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[s,a]=r.tableEntry,o=[...v.texts(s)].map(([l])=>l.text).join(" ");return g.removeNodes(e,{at:a}),g.insertNodes(e,{type:"paragraph",children:[{text:o}]},{at:a,select:!0}),!0}}),t.defineAction({key:"table-insert-row-above",type:C.selection,icon:p(zt,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>M(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[s,a]=r.tableEntry,o=Be(e,a,0),l=xe(s);return Tt(e,o,l),!0}}),t.defineAction({key:"table-insert-row-below",type:C.selection,icon:p(It,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>M(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[s,a]=r.tableEntry,o=Be(e,a,s.children.length-1);o[o.length-1]+=1;const l=xe(s);return Tt(e,o,l),!0}}),t.defineAction({key:"table-insert-row-left",type:C.selection,icon:p(Lt,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>M(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const s=De(e,0);return wt(e,r.tableEntry,s),!0}}),t.defineAction({key:"table-insert-row-right",type:C.selection,icon:p(Bt,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>M(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const s=De(e,xe(r.tableEntry[0])-1)+1;return wt(e,r.tableEntry,s),!0}}),t.defineAction({key:"table-delete-row",type:C.selection,icon:p(Dt,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>M(s,"table")});return{active:!1,disabled:!r||r[0].children.length<=1,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[,s]=r.tableEntry,a=Be(e,s,0);return g.removeNodes(e,{at:a}),g.deselect(e),!0}}),t.defineAction({key:"table-delete-col",type:C.selection,icon:p(jt,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>M(s,"table")});return{active:!1,disabled:!r||xe(r[0])<=1,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[,s]=r.tableEntry,a=De(e,0);return g.removeNodes(e,{at:s,match:(o,l)=>M(o,"tableCell")&&l[l.length-1]===a}),g.deselect(e),!0}})}var yr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:br});function je(t,e,n){const r=d.nodes(t,{at:n,mode:"highest",match:(s,a)=>a.length>2&&T.isParent(n,T.parent(T.parent(a)))});for(const[,s]of r){const a=I.intersection(e,d.range(t,s));a&&!I.isCollapsed(a)&&g.delete(t,{at:a})}}function ve(t,e,n){for(const[r,s]of v.ancestors(t,e.path,{reverse:!0}))if(M(r,"table")){const a=n==="start"?d.isStart(t,e,s):d.isEnd(t,e,s);return[s,a]}}function Et(t,e,n){for(const[r,s]of v.ancestors(t,e.path,{reverse:!0}))if(M(r,"tableCell"))return n==="start"?d.isStart(t,e,s):d.isEnd(t,e,s);return!1}function _r(t){t.onWrapEditor(e=>{L(e,"deleteFragment",n=>r=>{if(e.selection){const{anchor:s,focus:a}=e.selection,o=Ke.isAfter(s,a),l=ve(e,s,o?"start":"end"),i=ve(e,a,o?"end":"start");if(l&&i&&T.equals(l[0],i[0])){je(e,e.selection,l[0]);return}const u=P({},e.selection);if(l){const[f,m]=l;m||je(e,e.selection,f),u.anchor=d.point(e,T[o?"previous":"next"](f),{edge:o?"end":"start"})}if(i){const[f,m]=i;m||je(e,e.selection,f),u.focus=d.point(e,T[o?"next":"previous"](f),{edge:o?"start":"end"})}g.select(e,d.unhangRange(e,u))}n(r)}),L(e,"deleteForward",n=>r=>{if(e.selection){const s=d.after(e,e.selection,{unit:r});if(s){const o=ve(e,s,"start");if(o){const[l,i]=o;if(i){g.removeNodes(e,{at:l});return}}}if(Et(e,d.point(e,e.selection,{edge:"end"}),"end"))return}n(r)}),L(e,"deleteBackward",n=>r=>{if(e.selection){const s=d.before(e,e.selection,{unit:r});if(s){const o=ve(e,s,"end");if(o){const[l,i]=o;if(i){g.removeNodes(e,{at:l});return}}}if(Et(e,d.point(e,e.selection,{edge:"start"}),"start"))return}n(r)})}),L(t,"createDefaultEditableProps",e=>n=>L(e(n),"onDrag",r=>s=>{const[a]=d.nodes(n,{match:o=>M(o,"table")});a&&(s.preventDefault(),s.stopPropagation()),r==null||r(s)}))}var xr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:_r});function vr(t){[{key:N.strong,icon:Se,tips:p(ue,{children:"\u52A0\u7C97"}),hotkeys:["meta+b"]},{key:N.emphasis,icon:ke,tips:p(ue,{children:"\u659C\u4F53"}),hotkeys:["meta+i"]},{key:N.inlineCode,icon:le,tips:p(ue,{children:"\u884C\u5185\u4EE3\u7801"})},{key:N.delete,icon:Ce,tips:p(ue,{children:"\u5220\u9664"})}].forEach(({icon:e,key:n,tips:r,hotkeys:s})=>{t.defineAction({key:n,type:C.selection,icon:p($,{icon:e}),tips:r,hotkeys:s,computeState:(a,o)=>{const l=Ae(a,o,n),i=!he(a,o);return{active:l,disabled:i}},action:(a,o,l,i)=>(Re.toggleDecorator(a,o,n),!0)})})}var Tr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:vr}),wr=j({type:"thematicBreak",isLeaf:!1,isInline:!1,wrappingParagraph:!1,contentType:E.flow,contentModelType:null,render(t,{element:e,children:n,attributes:r}){return p(Z,{element:e,children:D(ye,{attributes:r,children:[p("hr",{}),n]})})},toggle:{prefix:/^---$/,estimatePrefixLength:3,toggle:(t,e,n)=>{n?(g.removeNodes(t,{at:e}),g.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:e}),g.insertNodes(t,{type:"thematicBreak",children:[]},{at:e}),K.deselect(t),g.select(t,d.start(t,T.next(e)))):g.setNodes(t,{type:"thematicBreak",children:[{text:""}]},{at:e})},onTrigger:(t,e,n)=>{if(!(n.length>1))return!0}},events:{}}),Er=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wr});const Sr={"./blockquote/BlockquoteNode.tsx":_n,"./blockquote/action.tsx":En,"./code/CodeNode.tsx":dn,"./code/LangSelect.tsx":pn,"./code/actions.tsx":kn,"./heading/HeadingNode.tsx":Cn,"./heading/actions.tsx":Nn,"./html/HTMLNode.tsx":On,"./image/ImageNode.tsx":zn,"./image/action.tsx":Gn,"./link/LinkNode.tsx":Qn,"./link/action.tsx":tr,"./list/ListItemNode.tsx":rr,"./list/ListNode.tsx":nr,"./list/actions.tsx":or,"./paragraph/ParagraphNode.tsx":Mn,"./paragraph/actions.tsx":lr,"./table/TableCellNode.tsx":cr,"./table/TableNode.tsx":pr,"./table/TableRowNode.tsx":ur,"./table/actions.tsx":yr,"./table/context.tsx":ir,"./table/rules.tsx":xr,"./text/TextNode.tsx":gn,"./text/actions.tsx":Tr,"./thematic-break/ThematicBreakNode.tsx":Er};function kr(t){const e=[];for(const[n,{default:r,register:s}]of Object.entries(Sr)){const a=s||(r==null?void 0:r.register);typeof a=="function"&&(e.push(n),a(t))}console.debug("auto detected",e)}V.add(Se,ke,Ce,le);function St(t,e){if(!!e)return typeof e=="function"?e(t):e}function Cr(t,e){var r;if(!e)return[];const n=(r=K.toSlateRange(t,e,{exactMatch:!0,suppressThrow:!0}))!=null?r:t.selection;if(n){if(!dt(t,n))return[];const[s]=d.nodes(t,{at:n,match:a=>{const o=a.type;if(o){const l=t.factory.customElementMap.get(o);if(l&&l.contentModelType!==E.value)return!0}return!1}});if(!s)return[]}return t.getActions(n!=null?n:void 0,t.factory.selectionActions).map(({action:{key:s,icon:a,tips:o},state:l})=>({key:s,disabled:l.disabled,active:l.active,icon:St(l,a),tips:St(l,o),action:i=>{t.runAction(s,n!=null?n:void 0,i)}})).filter(s=>!s.disabled)}function Mr(){const t=oe(),e=x.exports.useRef(null),n=x.exports.useRef(),[r,s]=x.exports.useState(!0),a=lt(),[o,l]=x.exports.useState([]);t.hideSelectionToolbar=()=>s(!0);const i=x.exports.useMemo(()=>({getBoundingClientRect(){return n.current?n.current.getBoundingClientRect():{width:0,height:0}}}),[t,n]),{styles:u,attributes:f,update:m}=$t(i,e.current,{placement:"top",modifiers:[{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,8]}}]});return t.updateSelectionToolbar=y=>{if(y){const c=!n.current;n.current=y,c&&setTimeout(()=>{t.updateSelectionToolbar()},0)}const w=Cr(t,n.current);l(w),w.length>0?(s(!1),m&&m()):s(!0),a()},t.toggleSelectionToolbar=y=>{r?t.updateSelectionToolbar(y):t.hideSelectionToolbar()},p("div",O(P({className:"ti-hovering-toolbar",ref:e,style:O(P({},u.popper),{opacity:r?0:1,pointerEvents:r?"none":"initial"})},f.popper),{children:o.map(y=>p(ot,{action:y.action,active:y.active,disabled:y.disabled,icon:y.icon,tips:y.tips},y.key))}))}function Pr(t){const e=t.createDefaultChildren.bind(t);t.createDefaultChildren=n=>{const r=e(n);return r.push(x.exports.createElement(Mr,{key:"selection-toolbar"})),r},t.onWrapEditor(n=>{n.updateSelectionToolbar=n.hideSelectionToolbar=n.toggleSelectionToolbar=()=>{}})}const kt=Ft({proto:!1,circles:!1});function Nr(t){const e=[],n=[],r=pe(),s=pe(),a=pe(),o=pe();t.freezeProcessors=()=>{r.use(e).use(et).use(fe).use(qt,{emphasis:"*",strong:"*",listItemIndent:"one",fence:"`",bullet:"-",fences:!0}).freeze(),s.use(e).use(et).use(fe).use(Ht).use(Wt).freeze(),a.use(Ut).use(fe).use(tt).use(n).freeze(),o.use(Vt).use(Gt,{removeConditional:!0}).use(Qt).use(fe).use(tt).use(n).freeze()},t.configProcessor=(...i)=>{t.configSerializeProcessor(...i),t.configDeserializeProcessor(...i)},t.configSerializeProcessor=(...i)=>{e.push(...i)},t.configDeserializeProcessor=(...i)=>{n.push(...i)},t.generateMarkdown=i=>r.stringify(r.runSync({type:"root",children:kt(i)})),t.generateHtml=i=>s.stringify(s.runSync({type:"root",children:kt(i)})),t.parseMarkdown=i=>a.processSync(i).result,t.parseHtml=i=>o.processSync(i).result;let l="";L(t,"createDefaultEditableProps",i=>u=>L(i(u),"onPaste",f=>m=>{const y=m.clipboardData;if(y&&y.types.indexOf("application/x-slate-fragment")<0){if(y.types.indexOf("text/plain")>=0&&(l=y.getData("text/plain")),y.types.indexOf("text/html")>=0){const w=y.getData("text/html"),c=t.parseHtml(w);u.insertFragment(c),m.preventDefault();return}else if(y.types.indexOf("text/plain")>=0){const w=y.getData("text/plain"),c=t.parseMarkdown(w);u.insertFragment(c),m.preventDefault();return}}f==null||f(m)})),t.onWrapEditor(i=>{L(i,"insertFragment",u=>f=>{if(i.selection){const m=v.parent(i,i.selection.anchor.path);if(i.getContentModelType(m)===E.value){l?g.insertText(i,l):g.insertText(i,t.generateMarkdown(f));return}}u(f)}),L(i,"setFragmentData",u=>f=>{u(f);const m=i.getFragment();f.setData("text/plain",t.generateMarkdown(m)),l=m.map(v.string).join(`
`)})})}var X;(function(t){t[t.replace=1]="replace",t[t.wrap=2]="wrap",t[t.unwrap=3]="unwrap",t[t.custom=4]="custom"})(X||(X={}));function Te(t){const e=new bn;return e.use(Nr),e.use(Tn),e.use(Pr),e.use(kr),t&&t(e),e.freezeProcessors(),e}const te=x.exports.forwardRef(({factory:t,disabled:e=!1,initialMarkdown:n="",config:r,uploadFile:s,value:a,onChange:o,placeholder:l,children:i},u)=>{const f=x.exports.useMemo(()=>{const S=Kt(Yt(Xt()));return S.onAlert=(A,R)=>{console.warn(A,R)},t.wrapEditor(S)},[t]);x.exports.useEffect(()=>{u&&(typeof u=="function"?u(f):u.current=f)},[f,u]),x.exports.useEffect(()=>{n&&(f.markdown=n)},[f]);const m=x.exports.useMemo(()=>t.createDefaultEditableProps(f),[t,f]),y=x.exports.useRef(null),w=x.exports.useMemo(()=>({getEditorDOMRect(){var S,A;return(A=(S=y.current)==null?void 0:S.getBoundingClientRect())!=null?A:new DOMRect}}),[y]),[c,h]=x.exports.useState();f.setActionForm=h,s&&(f.uploadFile=s);const b=x.exports.useMemo(()=>{if(c)return Jt.exports.createPortal(c,document.body)},[c]),_=x.exports.useCallback(S=>{o(S)},[o]);x.exports.useEffect(()=>{t.triggerEditorMounted(f)},[f]);const k=x.exports.useMemo(()=>t.createDefaultChildren(f),[t,f]);return D(Zt,{editor:f,onChange:_,value:a,children:[k,D(it.Provider,{value:w,children:[p("div",{className:"ti-community-editor-container",ref:y,children:p(en,P({as:"article",className:"ti-community-editor markdown-body",placeholder:l,readOnly:e},m))}),i]}),b]})});te.displayName="TiEditor";var Rr=j({type:"section",isLeaf:!1,isInline:!1,isEditable:!1,contentType:E.flow,contentModelType:E.flow,wrappingParagraph:!1,normalize:(t,e,n,r)=>{e.children.length===0&&(g.removeNodes(t,{at:n}),r())},render(t,{attributes:e,children:n}){return p("section",O(P({},e),{children:n}))},events:{},toggle:{}});const Ar=()=>t=>{tn(t,n=>"children"in n&&"type"in n,n=>{for(let r=n.children.length-1;r>=0;--r){const s=n.children[r];s.type==="section"&&n.children.splice(r,1,...s.children)}})};function Or(t,e,n){for(const r of e)if((nt.isNodeOperation(r)||nt.isTextOperation(r))&&I.includes(n,r.path))return!0;return!1}function ne({section:t,value:e=[],onChange:n}){const r=oe(),s=x.exports.useRef(n),a=x.exports.useRef([]);return s.current=n,x.exports.useEffect(()=>{const o=r.factory.registerOnChange(()=>{const i=r.getSectionRange(t);if(!!i&&Or(r,r.operations,i)){const u=r.getSection(t);a.current=u,s.current(u)}}),l=r.factory.registerOnSectionLayout(i=>{t===i&&e!==a.current&&(a.current=e,r.setSection(t,e))});return()=>{o(),l()}},[r]),x.exports.useEffect(()=>{e!==a.current&&r.setSection(t,e)},[e]),null}function Ct(t){Rr.register(t),t.configSerializeProcessor(Ar);let e=[];t.configSections=o=>{e=o};const n=new WeakMap;t.onWrapEditor(o=>{const{normalizeNode:l,deleteBackward:i,deleteForward:u,insertFragment:f,runAction:m,onChange:y}=o,w=[];n.set(o,w),o.customLayout=!0,o.insertFragment=c=>{if(o.selection)for(let h=0;h<w.length;h++){const b=w[h].current;if(b){const _=d.range(o,b);if(I.includes(_,o.selection))return}}f(c.filter(h=>!M(h,"section")))},o.runAction=(c,h,b)=>{if(h){const _=d.range(o,h);let k=!1;for(const S of w)if(S.current&&I.includes(_,S.current)){k=!0;break}if(k)return o.onAlert("\u65E0\u6CD5\u64CD\u4F5C\u56FA\u5B9A\u5185\u5BB9",""),!1}return m(c,h,b)},L(o,"deleteFragment",c=>h=>{if(o.selection){const b=d.rangeRef(o,o.selection);for(let _=w.length-1;_>=0;--_){const k=o.getSectionRange(_);if(k&&b.current){const S=I.intersection(k,b.current);S&&!I.isCollapsed(S)&&(g.select(o,S),c(h))}}b.current&&g.select(o,b.current),b.unref();return}c(h)}),o.deleteBackward=c=>{if(o.selection){const h=d.before(o,o.selection,{unit:c});if(h&&M(d.node(o,h,{depth:1})[0],"section")){o.onAlert("\u65E0\u6CD5\u5220\u9664\u56FA\u5B9A\u5185\u5BB9","");return}}i(c)},o.deleteForward=c=>{if(o.selection){const h=d.after(o,o.selection,{unit:c});if(h&&M(d.node(o,h,{depth:1})[0],"section")){o.onAlert("\u65E0\u6CD5\u5220\u9664\u56FA\u5B9A\u5185\u5BB9","");return}}u(c)},o.normalizeNode=c=>{l(c)},Object.defineProperty(o,"markdown",{get(){console.warn("editor.markdown was disabled for layout plugin, use editor.getSectionMarkdown instead")},set(){console.warn("editor.markdown was disabled for layout plugin, use editor.setSectionMarkdown instead")}}),o.getSectionSpan=c=>{if(c>=w.length)return;let h=w[c].current;if(!h)return;let b;if(c<w.length-1?b=w[c+1].current:b=[o.children.length],!!b&&(h=T.next(h),T.hasPrevious(b)?b=T.previous(b):b=h,T.isBefore(b,h)&&(b=h),!(!d.hasPath(o,h)||!d.hasPath(o,b))))return[h,b]},o.getSectionRange=c=>{const h=o.getSectionSpan(c);if(!h)return;const[b,_]=h,k=d.start(o,b),S=d.end(o,_);return{anchor:k,focus:S}},o.getSection=c=>{const h=o.getSectionSpan(c);if(!h)return[];const[...b]=d.nodes(o,{at:h,mode:"highest",match:_=>!d.isEditor(_)});return b.map(([_])=>_)},o.getSectionMarkdown=c=>t.generateMarkdown(o.getSection(c)),o.setSection=(c,h)=>{const b=o.getSectionSpan(c);!b||d.withoutNormalizing(o,()=>{const[_,k]=b;let S=k;for(;g.removeNodes(o,{at:S}),!T.equals(_,S);)S=T.previous(S);g.insertNodes(o,h,{at:S})})},o.setSectionMarkdown=(c,h)=>{o.setSection(c,t.parseMarkdown(h))},o.onChange=()=>{y(),Object.values(s).forEach(c=>c())},o.onSectionLayout=c=>{Object.values(a).forEach(h=>h(c))}}),t.onEditorMounted(o=>{const l=n.get(o);if(!l)throw new Error;const i=(u,f)=>(g.insertNodes(o,[u,{type:"paragraph",children:[{text:""}]}],{at:[f*2]}),d.pathRef(o,[f*2]));rt.withoutSaving(o,()=>{d.withoutNormalizing(o,()=>{if(e.length&&l.length===0){for(let u=0;u<e.length;++u)l[u]=i(e[u],u);return}})});for(let u=0;u<e.length;++u)o.onSectionLayout(u)});let r=0;const s={},a={};t.registerOnChange=o=>{const l=++r;return s[l]=o,()=>{delete s[r]}},t.registerOnSectionLayout=o=>{const l=++r;return a[l]=o,()=>{delete a[r]}},L(t,"createDefaultEditableProps",o=>l=>{const i=o(l);return L(i,"onDrag",u=>f=>{const[m]=d.nodes(l,{match:y=>M(y,"section")});m&&(f.preventDefault(),f.stopPropagation()),u==null||u(f)}),L(i,"onDrop",u=>f=>{const[m]=d.nodes(l,{match:y=>M(y,"section")});m&&(f.preventDefault(),f.stopPropagation()),u==null||u(f)}),L(i,"onKeyDown",u=>f=>{if((!f.metaKey||t.actionHotKeysHas(f))&&l.selection&&!(ie(["backspace","delete"],f)&&!I.isCollapsed(l.selection))){let m=!1;for(const y of n.get(l)||[])if(y.current&&I.intersection(l.selection,d.range(l,y.current))){m=!0;break}if(m){l.onAlert("\u65E0\u6CD5\u7F16\u8F91\u56FA\u5B9A\u5185\u5BB9",""),f.preventDefault(),f.stopPropagation();return}}u==null||u(f)}),L(i,"onCompositionStart",u=>f=>{if(l.selection)for(const m of n.get(l)||[])m.current&&I.intersection(l.selection,d.range(l,m.current))&&(l.onAlert("\u65E0\u6CD5\u7F16\u8F91\u56FA\u5B9A\u5185\u5BB9",""),f.preventDefault(),f.stopPropagation());u==null||u(f)}),i})}var zr=j({type:"linkBlock",isLeaf:!1,isInline:!1,contentType:E.flow,contentModelType:null,wrappingParagraph:!1,normalize:(t,e,n)=>{const r=T.next(n);d.hasPath(t,r)||g.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:r})},render:(t,{attributes:e,children:n,element:r})=>{const s=t.factory.renderLinkBlock(t,r.link);return D("div",O(P({className:"ti-link-block",contentEditable:!1},e),{children:[s,n]}))},events:{},toggle:{}});function Ir(t,e){return typeof t.test=="function"?t.test(e):t.test.test(e)}function Lr(t){return e=>{zr.register(e),e.renderLinkBlock=(n,r)=>{for(const s of t.rules)if(Ir(s,r))return s.render(n,r);return x.exports.createElement("a",{href:r},[r])}}}const Br=`### \u5F15\u7528 (blockquote)

\`\`\`markdown
> blockquote
> 
> yeah
\`\`\`

> blockquote
> 
> yeah

- \u6DFB\u52A0\u5F15\u7528
  - \u8F93\u5165 \`>\` \u5E76\u8F93\u5165\u7A7A\u683C
- \u5220\u9664\u5F15\u7528
  - \u5728\u5F15\u7528\u8D77\u59CB\u5904\u70B9\u51FB \`<Backspace>\`
`;var Dr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Br});const jr=`### Codes

### Usage

- \u8F93\u5165 \\\`\\\`\\\` \u52A0\u7A7A\u683C

### Examples

\`\`\`javascript
console.log('hello world')
\`\`\`

\`\`\`sql
SELECT * FROM hello_world;
\`\`\`

`;var $r=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:jr});const Fr=`### \u6807\u9898

\`\`\`markdown
# h1
## h2
### h3
#### h4
##### h5
###### h6
\`\`\`

> # h1
> ## h2
> ### h3
> #### h4
> ##### h5
> ###### h6

- \u521B\u5EFA\u6807\u9898
  1. \u8F93\u5165 1-6 \u4E2A \`#\` \u5E76\u8F93\u5165\u7A7A\u683C
  2. \u5728\u6807\u9898\u4E2D\u95F4\u6216\u7ED3\u5C3E\u70B9\u51FB \`<Enter>\`
- \u5220\u9664\u6807\u9898
  - \u5728\u6807\u9898\u8D77\u59CB\u5904\u70B9\u51FB \`<Enter>\` \u4EE5\u5C06\u6807\u9898\u8F6C\u6362\u6210\u6BB5\u843D
`;var qr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Fr});const Hr=`### Image

![google logo](https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png "google")
`;var Wr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Hr});const Ur=`### \u94FE\u63A5

\`\`\`
[title](url)
\`\`\`

> [title](#)

- \u521B\u5EFA\u94FE\u63A5
  - \u8F93\u5165\u94FE\u63A5 url \u5E76\u8F93\u5165\u7A7A\u683C\u4F1A\u81EA\u52A8\u8F6C\u6362
`;var Vr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Ur});const Gr=`### \u5217\u8868

\`\`\`markdown
- \u65E0\u5E8F\u5217\u8868
- ...
  - \u7F29\u8FDB\u5217\u8868

1. \u6709\u5E8F\u5217\u8868
\`\`\`

> - \u65E0\u5E8F\u5217\u8868
> - ...
>   - \u7F29\u8FDB\u5217\u8868
> 
> 1. \u6709\u5E8F\u5217\u8868 1
> 2. \u6709\u5E8F\u5217\u8868 2

\u4F7F\u7528\u4EE5\u4E0B\u65B9\u5F0F\u63A7\u5236 Markdown \u5217\u8868\uFF1A
- \u65B0\u5EFA\u5217\u8868\uFF1A
  1. \u8F93\u5165 \`-\` \u52A0\u7A7A\u683C\u63D2\u5165\u65E0\u5E8F\u5217\u8868
  2. \u8F93\u5165 \`number.\` \u52A0\u7A7A\u683C\u63D2\u5165\u6709\u5E8F\u5217\u8868
- \u5217\u8868\u7F29\u8FDB\uFF1A
  1. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`<Tab>\` \u751F\u6210\u4E0B\u7EA7\u5217\u8868 
  2. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`-\` \u6216 \`<number>\`\u3002
- \u53D6\u6D88\u5217\u8868
  1. \u5728\u7A7A\u5217\u8868\u9879\u4E2D\u76F4\u63A5\u8F93\u5165 \`<Enter>\`
`;var Qr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Gr});const Kr=`### Table

| foo | bar |
| :-- | :-: |
| baz | qux |

`;var Yr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Kr});const Xr=`# tidb-community-editor

## \u6280\u672F\u6808

- core
  - [slate](https://www.slatejs.org/)
  - [remark](https://remark.js.org/)
  - [remark-slate-transformer](https://github.com/inokawa/remark-slate-transformer)
- code highlight
  - [prism](https://prismjs.com/)

## \u6837\u5F0F\u914D\u7F6E

### \u4EE3\u7801\u9AD8\u4EAE

\u5728 \`src/slate-markdown/elements/code/style.less\` \u6DFB\u52A0\u5BF9\u5E94 token \u6837\u5F0F\u3002

abc
deb

## \u7528\u6CD5
`,Jr={"../src/slate-markdown/elements/blockquote/instructions.md":Dr,"../src/slate-markdown/elements/code/instructions.md":$r,"../src/slate-markdown/elements/heading/instructions.md":qr,"../src/slate-markdown/elements/image/instructions.md":Wr,"../src/slate-markdown/elements/link/instructions.md":Vr,"../src/slate-markdown/elements/list/instructions.md":Qr,"../src/slate-markdown/elements/table/instructions.md":Yr},Zr=Xr+`

`+Object.values(Jr).map(t=>t.plainText).join(`

`);function es(t){t.use(Ct),t.configSections([{type:"section",children:[{type:"heading",depth:1,children:[{text:"section 1",inlineCode:!0},{text:" \u65E0\u6CD5\u4FEE\u6539\u6216\u5220\u9664\uFF0C\u4F7F\u7528\u65B9\u6CD5\u67E5\u770B "},{text:"plugins/layout",inlineCode:!0}]},{type:"blockquote",children:[{type:"paragraph",children:[{text:"\u7528\u4E8E\u56FA\u5B9A\u7684\u5185\u5BB9\u7ED3\u6784"}]}]}]},{type:"section",children:[{type:"heading",depth:1,children:[{text:"section 2",inlineCode:!0}]}]}]),t.onEditorMounted(e=>{setTimeout(()=>{rt.withoutSaving(e,()=>{e.setSectionMarkdown(0,"write something here"),e.setSectionMarkdown(1,Zr)})})})}async function ts(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=function(){setTimeout(()=>{e(r.result)},500)},r.onerror=function(){n(r.error)},r.readAsDataURL(t)})}const ns=Te(es);function rs(){const[t,e]=x.exports.useState([]),n=x.exports.useCallback(l=>{e(l)},[t]),[r,s]=x.exports.useState([]),[a,o]=x.exports.useState([]);return p("div",{children:D(te,{factory:ns,onChange:n,uploadFile:ts,value:t,children:[p(ne,{onChange:s,section:0,value:r}),p(ne,{onChange:o,section:1,value:a})]})})}async function ss(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=function(){setTimeout(()=>{e(r.result)},500)},r.onerror=function(){n(r.error)},r.readAsDataURL(t)})}const os=Te();function as(){const[t,e]=x.exports.useState([{type:"paragraph",children:[{text:"here to input"}]}]),n=x.exports.useCallback(r=>{e(r)},[t]);return p("div",{children:p(te,{factory:os,onChange:n,uploadFile:ss,value:t})})}function ls(t){t.use(Ct),t.configSections([{type:"section",children:[{type:"heading",depth:1,children:[{text:"section 1",inlineCode:!0}]},{type:"blockquote",children:[{type:"paragraph",children:[{text:"\u7528\u4E8E\u56FA\u5B9A\u7684\u5185\u5BB9\u7ED3\u6784"}]}]}]},{type:"section",children:[{type:"heading",depth:1,children:[{text:"section 2",inlineCode:!0}]}]},{type:"section",children:[{type:"heading",depth:1,children:[{text:"section 3",inlineCode:!0}]}]}])}async function is(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=function(){setTimeout(()=>{e(r.result)},500)},r.onerror=function(){n(r.error)},r.readAsDataURL(t)})}const cs=Te(ls);function us(){const[t,e]=x.exports.useState([]),n=x.exports.useCallback(u=>{e(u)},[t]),[r,s]=x.exports.useState([{type:"paragraph",children:[{text:"write something here"}]}]),[a,o]=x.exports.useState([{type:"paragraph",children:[{text:"write something here"}]}]),[l,i]=x.exports.useState([{type:"paragraph",children:[{text:"write something here"}]}]);return p("div",{children:D(te,{factory:cs,onChange:n,uploadFile:is,value:t,children:[p(ne,{onChange:s,section:0,value:r}),p(ne,{onChange:o,section:1,value:a}),p(ne,{onChange:i,section:2,value:l})]})})}async function ps(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=function(){setTimeout(()=>{e(r.result)},500)},r.onerror=function(){n(r.error)},r.readAsDataURL(t)})}const Mt=Te(t=>{t.use(Lr({rules:[{test:/github\.com/,render:(e,n)=>{const r=/github\.com\/([^/]+)\/([^/]+)/.exec(n);if(r){const[,s,a]=r;return D("span",{children:[p(st,{}),"\xA0",s,"/",a]})}else return D("span",{children:[p(st,{}),"\xA0",n]})}}]}))});function fs(){const[t,e]=x.exports.useState([...Mt.parseMarkdown(`# LinkBlock example
`),{type:"linkBlock",link:"https://github.com/pingcap-inc/tidb-community-editor",children:[{text:""}]},{type:"paragraph",children:[{text:""}]}]),n=x.exports.useCallback(r=>{e(r)},[t]);return p("div",{children:p(te,{factory:Mt,onChange:n,uploadFile:ps,value:t})})}nn.render(p(rn.StrictMode,{children:p(sn,{basename:"/tidb-community-editor",children:D("div",{children:[D("nav",{children:[p(de,{to:"/",children:"Full example"}),p(de,{to:"/empty",children:"Empty example"}),p(de,{to:"/sections",children:"Sections example"}),p(de,{to:"/linkblock",children:"LinkBlock example"})]}),p("main",{children:D(on,{children:[p(ge,{component:as,exact:!0,path:"/empty"}),p(ge,{component:us,exact:!0,path:"/sections"}),p(ge,{component:fs,exact:!0,path:"/linkblock"}),p(ge,{component:rs,path:"/"})]})})]})})}),document.getElementById("root"));
