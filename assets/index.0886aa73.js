var Ot=Object.defineProperty,zt=Object.defineProperties;var At=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var we=(t,e,n)=>e in t?Ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R=(t,e)=>{for(var n in e||(e={}))Qe.call(e,n)&&we(t,n,e[n]);if(fe)for(var n of fe(e))Ze.call(e,n)&&we(t,n,e[n]);return t},I=(t,e)=>zt(t,At(e));var Ee=(t,e)=>{var n={};for(var r in t)Qe.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&fe)for(var r of fe(t))e.indexOf(r)<0&&Ze.call(t,r)&&(n[r]=t[r]);return n};var $=(t,e,n)=>(we(t,typeof e!="symbol"?e+"":e,n),n);import{E as D,u as ke,r as m,a as d,j as p,c as J,T as de,l as Z,f as Ge,b as Ye,d as H,F as L,e as Se,g as Ce,h as Me,i as ge,R as W,P as T,N as y,k as F,m as Xe,n as It,o as f,p as Pe,q as Je,s as G,_ as Ne,t as he,v as Re,w as Oe,x as Dt,y as Lt,z as et,A as tt,B as nt,C as rt,D as st,G as at,H as ze,I as jt,J as $t,K as Ft,L as Bt,M as qt,O as Ht,Q as me,S as Wt,U as Ut,V as oe,W as Ae,X as le,Y as Vt,Z as Kt,$ as Qt,a0 as Zt,a1 as ot,a2 as Gt,a3 as Yt,a4 as Xt,a5 as Jt,a6 as en,a7 as tn,a8 as nn,a9 as rn,aa as sn,ab as an,ac as on,ad as ln,ae as cn,af as un,ag as pn,ah as fn,ai as dn,aj as gn}from"./vendor.c427c321.js";const hn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};hn();var w;(function(t){t[t.flow=16]="flow",t[t.list=32]="list",t[t.phrasing=48]="phrasing",t[t.staticPhrasing=49]="staticPhrasing",t[t.value=64]="value",t[t.table=80]="table",t[t.tableRow=96]="tableRow"})(w||(w={}));function V(t,e){return t===e||t<e&&(t^e)<16}function j(t){return I(R({},t),{register(e){e.define(I(R({},t),{isEditable:typeof t.isEditable=="boolean"?t.isEditable:!0}))}})}function C(t,e){return D.isElement(t)?e instanceof Array?e.indexOf(t.type)>=0:t.type===e:!1}function lt({icon:t,active:e,disabled:n,action:r,tips:s}){const a=ke(),l=m.exports.useCallback(i=>{r&&i.button===0&&(i.preventDefault(),i.stopPropagation(),n||d.withoutNormalizing(a,()=>{r(i)}))},[r]),o=p("span",{className:J("a-editor-toolbar-item",{active:e,disabled:n}),onMouseDown:l,children:t});return s?p(de,{content:p("span",{className:"toolbar-item-tips",children:s}),children:o}):o}Z.add(Ge,Ye);function mn({extraWidth:t,isEmpty:e,element:n,items:r,setActive:s}){return p(de,{appendTo:"parent",arrow:!1,content:bn(r),hideOnClick:!1,interactive:!0,onHide:()=>s(!1),onShow:()=>s(!0),children:H("div",{className:"line-operations",contentEditable:!1,children:[p("span",{className:"icon",children:p(L,{icon:e?Ye:Ge})}),p("div",{className:"spacer",style:{width:t,height:"100%"}})]})})}const bn=t=>p("div",{className:"block-toolbar",children:t.map((e,n)=>p("div",{className:"toolbar-group",children:e.map(r=>p(lt,{action:r.action,active:r.active,disabled:r.disabled,icon:r.icon,tips:r.tips},r.key))},n))});Z.add(Se,Ce,Me,ge);function it(t,e){if(!!e)return typeof e=="function"?e(t):e}function yn(t,e){const n=e==null?void 0:e.current;return n?t.factory.lineActions.map(r=>t.getActions(n,r).map(({action:{key:s,icon:a,tips:l},state:o})=>({key:s,disabled:o.disabled,active:o.active,icon:it(o,a),tips:it(o,l),action:i=>{t.runAction(s,n,i)}}))):[]}function Ie(){const[t,e]=m.exports.useState(0);return()=>{e(n=>n+1)}}const De=m.exports.createContext({getEditorDOMRect:()=>new DOMRect,containerWidth:0});function ie({element:t,children:e}){const[n,r]=m.exports.useState(null),s=m.exports.useRef(),a=ke(),l=yn(a,s.current),o=Ie(),[i,u]=m.exports.useState(0),{getEditorDOMRect:g}=m.exports.useContext(De),h=m.exports.useCallback(()=>{var P;const x=(P=n==null?void 0:n.getBoundingClientRect())!=null?P:new DOMRect,{x:_=0}=x,{x:k}=g();return u(_-k),x},[g,n]);m.exports.useLayoutEffect(()=>{var x,_,k,P;if(typeof document!="undefined")if(n){const O=document.createRange();O.selectNode(n.childNodes.item(0));const N=W.toSlateRange(a,O,{exactMatch:!1,suppressThrow:!0});if(N){let A=T.common(N.anchor.path,N.focus.path);for(;A.length!==0;){if(d.isBlock(a,y.get(a,A))){s.current=d.pathRef(a,A);break}A=T.parent(A)}}else s.current&&((_=(x=s.current).unref)==null||_.call(x)),s.current=void 0}else s.current&&((P=(k=s.current).unref)==null||P.call(k)),s.current=void 0},[n]);const[v,E]=m.exports.useState(!1),c=(()=>{const x=t.children[0];return t.children.length===1&&F.isText(x)&&x.text===""})();return Xe()?typeof e=="function"?e({active:v,pathRef:s.current}):e:p(It,{appendTo:typeof document=="undefined"?"parent":document.body,arrow:!1,getReferenceClientRect:h,hideOnClick:!1,interactive:!0,interactiveBorder:12,offset:[0,8],onTrigger:o,placement:"left",popperOptions:{modifiers:[{name:"flip",options:{allowedAutoPlacements:["left"]}}]},ref:r,render:()=>p(mn,{element:t,extraWidth:i,isEmpty:c,items:l,setActive:E}),children:typeof e=="function"?e({active:v,pathRef:s.current}):e})}function ct({editor:t,pathRef:e,options:n,lang:r}){const s=m.exports.useCallback(a=>{(e==null?void 0:e.current)&&f.setNodes(t,{lang:a.currentTarget.value},{at:e.current})},[t,e]);return H("select",{className:"lang-selector",contentEditable:!1,onChange:s,tabIndex:void 0,value:r||void 0,children:[p("option",{}),n.map(a=>p("option",{children:a},a))]})}var vn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ct});const _n=["markdown","javascript","typescript","jsx","tsx","sql","bash","go","rust","json","log"],ce=Symbol("prism_token"),ut=({attributes:t,element:e,children:n},r,s=!1)=>p("pre",I(R({},t),{className:J({active:r,selected:s},e.lang?`language-${e.lang}`:void 0),children:p("code",{className:"prism-code",children:n})})),pt=j({type:"code",isInline:!1,isLeaf:!1,wrappingParagraph:!1,contentType:w.flow,contentModelType:w.value,render:(t,e)=>{const{element:n}=e,r=Xe(),s=Pe();return r?ut(e,!1):p(ie,{element:n,children:({active:a,pathRef:l})=>{var o;return p(de,{appendTo:typeof document=="undefined"?"parent":document.body,content:p(ct,{editor:t,lang:(o=n.lang)!=null?o:void 0,options:_n,pathRef:l}),interactive:!0,placement:"top-start",children:ut(e,a,s)})}})},toggle:{prefix:/^`{3}(?: (\w+))?$/,toggle:(t,e,n)=>t.runAction("toggle-codeblock",e),onTrigger:(t,e,n)=>{if(n.length>1)return;const r=/^`{3}(?: (\w+))?$/.exec(t);return r?{lang:r[1]||"markdown",meta:void 0}:{lang:"markdown",meta:void 0}}},events:{},decorate:(t,[e,n],r)=>{if(F.isText(e)&&r.lang){const s=Je.languages[r.lang];if(!s)return[];const a=[],l=Je.tokenize(e.text,s);let o=0;for(const i of l){const u=ft(i),g=o+u;typeof i!="string"&&a.push({[ce]:i.type,anchor:{path:n,offset:o},focus:{path:n,offset:g}}),o=g}return a}return[]}}),ft=t=>typeof t=="string"?t.length:typeof t.content=="string"?t.content.length:t.content.reduce((e,n)=>e+ft(n),0);var xn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SYMBOL_PRISM_TOKEN:ce,default:pt}),M;(function(t){t.strong="strong",t.emphasis="emphasis",t.delete="delete",t.inlineCode="inlineCode"})(M||(M={}));const Le=j({isLeaf:!0,contentType:w.staticPhrasing,contentModelType:w.value,canContainsContentModelTypeOf:t=>t.inlineCode?w.value:(t.strong||t.emphasis||t.delete,w.phrasing),normalize:(t,e,n,r)=>{if(e.text===""){const s=[M.strong,M.emphasis,M.delete,M.inlineCode].filter(a=>!!e[a]);s.length>0&&f.unsetNodes(t,s,{at:n})}if(e.inlineCode){const s=[M.strong,M.emphasis,M.delete].filter(a=>!!e[a]);s.length>0&&f.unsetNodes(t,s,{at:n})}},render(t,{leaf:e,children:n,attributes:r}){let s=n;return e[ce]&&(s=p("span",{className:J(e[ce]?`token ${e[ce]}`:void 0,r.className),children:s})),e.delete&&(s=p("del",{children:s})),e.emphasis&&(s=p("em",{children:s})),e.strong&&(s=p("strong",{children:s})),e.inlineCode&&(s=p("code",{children:s})),p("span",I(R({},r),{children:s}))},toggleDecorator:(t,e,n)=>{const r=gt(t),s=a=>r(y.get(t,a.anchor.path),a.anchor.path);je(t,e,n)?G.isCollapsed(e)?s(e)&&d.addMark(t,n,!1):f.setNodes(t,{[n]:!1},{match:r,split:!0}):G.isCollapsed(e)?s(e)&&(d.addMark(t,n,!0),n===M.inlineCode?(d.addMark(t,M.inlineCode,!1),d.addMark(t,M.emphasis,!1),d.addMark(t,M.delete,!1)):d.addMark(t,M.inlineCode,!1)):(f.setNodes(t,{[n]:!0},{match:r,split:!0}),n===M.inlineCode?f.unsetNodes(t,[M.delete,M.emphasis,M.strong],{match:r,split:!0}):f.unsetNodes(t,M.inlineCode,{match:r,split:!0}))}});function je(t,e,n){if(!W.hasRange(t,e))return!1;const r=d.marks(t);return r?!!r[n]:!1}const dt=(t,e)=>{const[n]=d.nodes(t,{at:e,match:r=>!t.isEditable(r)});return!n},be=(t,e)=>{const n=$e(t),[r]=d.nodes(t,{at:e,match:n});return!!r},gt=t=>(e,n)=>{const r=$e(t);if(!F.isText(e))return!1;const s=y.parent(t,n);return D.isElement(s)?r(s,T.parent(n)):!1},$e=t=>(e,n)=>{if(D.isElement(e)){const r=t.factory.customElementMap.get(e.type);return r&&r.contentModelType?V(r.contentModelType,w.phrasing):!1}else return!1};function Fe(t,e,n,r){if(G.isRange(e)){if(!W.hasRange(t,e))return!1}else if(T.isPath(e)){if(!d.hasPath(t,e))return!1}else if(!W.hasRange(t,{anchor:e,focus:e}))return!1;if(T.isPath(e)){const a=y.get(t,e);return C(a,n)&&(r?r(a):!0)}const[s]=d.nodes(t,{at:G.isRange(e)?d.unhangRange(t,e):e,match:a=>!d.isEditor(a)&&C(a,n)&&(r?r(a):!0)});return!!s}var Tn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get TextNodeDecorator(){return M},isDecoratorActive:je,isRangeEditable:dt,isRangeCustomTextPropsEnabled:be,isCustomTextPropsEnabled:gt,isPhrasing:$e,isElementActive:Fe,default:Le});class wn{constructor(e,n){$(this,"state",[]);this.factory=e,this.editor=n}process(e){const[n,r]=e;if(d.isEditor(n))return this.state=[],[];if(D.isElement(n)){const s=this.factory.customElementMap.get(n.type);if(s&&!s.isInline){const a=s;if(a.decorate)return this.state.push({element:n,path:r,config:a}),[]}}if(this.state.length>0){for(const s of this.state.reverse())if(T.isAncestor(s.path,r))return s.config.decorate(this.editor,e,s.element)}return[]}}let En=0;class kn{constructor(){$(this,"blockConfigs",[]);$(this,"inlineConfigs",[]);$(this,"textConfig");$(this,"inlineSet",new Set);$(this,"voidSet",new Set);$(this,"nonEditableSet",new Set);$(this,"customElementMap",new Map);$(this,"contentTypeMap",new Map);$(this,"contentModelTypeMap",new Map);$(this,"id");$(this,"editorWrapHandlers",[]);$(this,"editorMountedHandlers",[]);this.id=++En}use(e){return console.debug(`factory@${this.id}.use`,e.name),e(this),this}define(e){return e.isLeaf?this.textConfig=e:(e.isInline?(this.inlineSet.add(e.type),this.inlineConfigs.push(e)):this.blockConfigs.push(e),this.customElementMap.set(e.type,e),this.contentModelTypeMap.set(e.type,e.contentModelType),this.contentTypeMap.set(e.type,e.contentType),e.contentModelType===null&&this.voidSet.add(e.type),e.isEditable&&this.nonEditableSet.add(e.type)),this}onWrapEditor(e){this.editorWrapHandlers.push(e)}onEditorMounted(e){this.editorMountedHandlers.push(e)}triggerEditorMounted(e){this.editorMountedHandlers.forEach(n=>n(e))}wrapEditor(e){const{isVoid:n,isInline:r,normalizeNode:s,insertBreak:a}=e;e.factory=this;function l(o){d.isEditor(o)?(console.group("#root"),o.children.forEach(l),console.groupEnd()):D.isElement(o)?(console.group(o.type),o.children.forEach(l),console.groupEnd()):console.debug("text")}return typeof window!="undefined"&&(window.debugPrintTree=()=>l(e),window.debugEditor=e),e.isContent=(o,i)=>D.isElement(o)?this.contentTypeMap.get(o.type)===i:F.isText(o)?this.textConfig.contentType===i:!1,e.canContainsContent=(o,i)=>{if(d.isEditor(o))return i===w.flow;if(D.isElement(o)){const u=this.contentModelTypeMap.get(o.type);return u?V(i,u):!1}else return F.isText(o)?V(i,Le.canContainsContentModelTypeOf(o)):!1},e.getContentType=o=>D.isElement(o)?this.contentTypeMap.get(o.type)||null:F.isText(o)&&this.textConfig.contentType||null,e.getContentModelType=o=>d.isEditor(o)?w.flow:D.isElement(o)?this.contentModelTypeMap.get(o.type)||null:F.isText(o)?this.textConfig.contentModelType:null,e.getContentTypePair=o=>D.isElement(o)?[this.contentTypeMap.get(o.type)||null,this.contentModelTypeMap.get(o.type)||null]:F.isText(o)?[this.textConfig.contentType||null,this.textConfig.contentModelType||null]:[null,null],e.toggle=(o,i,u)=>{const g=e.canToggle(o,i,!0);if(!g)return!1;const[[h,v],E]=g,c=typeof u=="object"?u:{};switch(E){case re.replace:return f.unsetNodes(e,Object.keys(y.extractProps(h)),{at:v}),f.setNodes(e,I(R({type:i.type},c),{children:[]}),{at:v}),!0;case re.wrap:return f.wrapNodes(e,R({type:i.type},c),{at:v}),!0;case re.custom:throw new Error("TODO: ToggleStrategy.custom");default:throw new Error("unknown ToggleStrategy: "+E)}},e.canToggle=(o,i,u)=>{const[g]=o,[h,v]=e.getContentTypePair(g);if(i.contentType!==h)return!1;if(i.contentModelType===v)return[o,re.replace];if(i.contentModelType===h)return[o,re.wrap];if(!u)return!1;const E=y.ancestors(e,o[1],{reverse:!0});for(const c of E){const b=e.canToggle(c,i,!1);if(b)return b}return!1},e.unwrap=(o,i)=>{if(!e.canUnwrap(o,i))return!1;const[u,g]=o,h=[[[]]];let v=[[u,[]]],E=0;for(;E<i.length-1;){const c=[];for(const[b,x]of v)for(const[_,k]of b.children.entries())c.push([k,x.concat(_)]);E+=1,v=c,h.push(c.map(([,b])=>b))}for(const c of h.reverse())for(const b of c.reverse())f.unwrapNodes(e,{at:g.concat(b),split:!0});return!0},e.canUnwrap=([o,i],u)=>{if(u.length===0)return!0;const g=e.getContentModelType(y.parent(e,i)),h=u[u.length-1].contentModelType;if(!g||!h||!V(h,g))return!1;let v=[[o,[]]],E=0;for(;E<u.length;){const c=[];for(const[b,x]of v){if(!C(b,u[E].type))return!1;for(const[_,k]of b.children.entries())c.push([k,x.concat(_)])}E+=1,v=c}return!0},e.wrap=(o,i,u)=>{if(!e.canWrap(o,i,u))return!1;const[,g]=o;let h=i.length-1;for(;h>=0;){const v=i[h],E=u[h];f.wrapNodes(e,Object.assign({type:v.type,children:[]},E),{at:g}),h--}return!0},e.canWrap=(o,i,u)=>{console.assert(i.length===u.length,"editor.canWrap: configs.length should be equals to params.length");const[g,h]=o,v=y.parent(e,h);let E=0,c=e.getContentModelType(v);for(;E<i.length;){const x=i[E];if(c===null||!V(x.contentType,c))return!1;c=x.contentModelType,E+=1}if(c===null)return!1;const b=e.getContentType(g);return b?V(b,c):!1},e.nearest=(o,i)=>{const[u,g]=o;if(C(u,i.type))return o;for(const h of y.ancestors(e,g,{reverse:!0}))if(C(h[0],i.type))return h},e.isVoid=o=>this.voidSet.has(o.type)||n(o),e.isInline=o=>this.inlineSet.has(o.type)||r(o),e.isEditable=o=>D.isElement(o)?this.nonEditableSet.has(o.type):!0,e.normalizeNode=o=>{let i=!0;const u=()=>{i=!1};d.withoutNormalizing(e,()=>{var v;const[g,h]=o;if(D.isElement(g)){const E=(v=this.customElementMap.get(g.type))==null?void 0:v.normalize;E&&E(e,g,h,u)}F.isText(g)&&this.textConfig.normalize&&this.textConfig.normalize(e,g,h,u),d.isEditor(g)&&(e.customLayout||(g.children.length===0?f.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[0]}):C(g.children[g.children.length-1],"paragraph")||f.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[g.children.length]})))}),i&&s(o)},e.insertBreak=()=>{if(e.selection){const o=y.parent(e,e.selection.anchor.path);if(e.getContentModelType(o)!==w.phrasing){f.insertText(e,`
`);return}}a()},this.editorWrapHandlers.forEach(o=>o(e)),e}createDefaultEditableProps(e){const n=c=>{var x;const{selection:b}=e;if(b&&G.isCollapsed(b)){const _=b.anchor,k=y.get(e,_.path),P=y.parent(e,_.path);if(F.isText(k)&&D.isElement(P)&&P.type==="paragraph"&&c.data===" "&&!T.hasPrevious(_.path)){const O=k.text.slice(0,_.offset);for(const{toggle:N}of this.blockConfigs)if(!(typeof N.estimatePrefixLength=="number"&&O.length>N.estimatePrefixLength)&&((x=N.prefix)==null?void 0:x.test(O))){const A=N.onTrigger(O,e,T.parent(_.path));if(typeof A!="undefined"){f.delete(e,{at:{path:_.path,offset:0},distance:_.offset}),N.toggle(e,T.parent(_.path),A),c.preventDefault();return}}}if(F.isText(k)&&d.isEdge(e,_,_.path)&&k.inlineCode&&e.addMark(M.inlineCode,void 0),d.isInline(e,P)){if(d.isEnd(e,_,_.path)){const O=T.next(T.parent(_.path));f.insertNodes(e,{text:c.data||""},{at:O}),f.move(e,{distance:1}),c.preventDefault();return}if(d.isStart(e,_,_.path)){const O=T.parent(_.path);f.insertNodes(e,{text:c.data||""},{at:O,select:!0}),c.preventDefault()}}}},r=(c,b)=>x=>{const{selection:_}=e;if(_&&G.isCollapsed(_)){const k=_.anchor,P=T.parent(k.path),O=y.get(e,P);if(D.isElement(O)){const N=this.customElementMap.get(O.type);if(!N)return;if(N.isInline){d.isEnd(e,k,P)&&(f.move(e,{unit:"offset"}),e.insertBreak(),x.preventDefault());return}const A=b(N.events);if(A&&A(e,k.path)){x.preventDefault();return}if(Sn(e,k)){if(N){const B=c(N.events);if(B&&B(e,k.path)){x.preventDefault();return}}if(O.type==="paragraph"){const B=y.parent(e,P);if(!T.hasPrevious(P)&&D.isElement(B)){const X=this.customElementMap.get(B.type);if(X==null?void 0:X.wrappingParagraph){const ee=c(X.events);if(ee&&ee(e,k.path)){x.preventDefault();return}}}}}}}},s=r(c=>c.onStartDelete,c=>c.onDeleteText),a=r(c=>c.onStartEnter,c=>c.onInsertParagraph),o=(c=>b=>{const{selection:x}=e;if(x&&G.isCollapsed(x)){const _=x.anchor,k=T.parent(_.path),P=y.parent(e,_.path);if(D.isElement(P)){const O=this.customElementMap.get(P.type);if(O){const N=c(O.events);if(N&&N(e,_.path)){b.preventDefault();return}}if(P.type==="paragraph"){const N=y.parent(e,k);if(D.isElement(N)){const A=this.customElementMap.get(N.type);if(A==null?void 0:A.wrappingParagraph){const B=c(A.events);if(B&&B(e,_.path)){b.preventDefault();return}}}}}}})(c=>c.onTab),i=new wn(this,e),u=c=>i.process(c),g=(c,b)=>{const x=b?d.rangeRef(e,b):null;e.uploadFile&&Promise.all(c.map(e.uploadFile)).then(_=>_.flatMap((k,P)=>[{text:""},{type:"image",url:k,title:void 0,alt:c[P].name,children:[{text:""}]}])).then(_=>{(x==null?void 0:x.current)&&f.select(e,x.current),e.insertFragment(_.concat({text:""}))}).catch(console.error)},h=(c,b)=>{const x=[...c.files].filter(_=>/image\/*/.test(_.type));x.length>0&&g(x,b)};return{renderElement:c=>{const b=this.customElementMap.get(c.element.type);return b?b.render(e,c):(console.warn(`${c.element.type} not impl`),m.exports.createElement("div",c.attributes,c.children))},renderLeaf:c=>this.textConfig?this.textConfig.render(e,c):m.exports.createElement("span",c.attributes,c.children),decorate:u,onDOMBeforeInput:c=>{ht(e,()=>{switch(c.inputType){case"insertText":n(c);break;case"deleteContentBackward":s(c);break;case"insertParagraph":a(c);break}})},onKeyDown:c=>{ht(e,()=>{if(Ne("tab",c)){o(c);return}if(Ne(["ctrl+enter"],c)){f.insertText(e,`
`);return}})},onSelect:c=>{const b=window.getSelection();b&&(b.isCollapsed?e.hideSelectionToolbar():b.rangeCount>0&&e.updateSelectionToolbar(b.getRangeAt(0)))},onBlur:c=>{e.hideSelectionToolbar()},onClick:()=>{},onPaste:c=>{const b=c.clipboardData;!b||h(b,e.selection)},onDrop:c=>{h(c.dataTransfer,W.findEventRange(e,c))}}}createDefaultChildren(e){return[]}}function Sn(t,e){return e.offset===0&&!T.hasPrevious(e.path)&&F.isText(y.get(t,e.path))}function ht(t,e){let n=!0;d.withoutNormalizing(t,()=>{e(()=>{n=!1})}),n||d.normalize(t)}Z.add(he);const K=j({type:"blockquote",isInline:!1,isLeaf:!1,wrappingParagraph:!0,contentType:w.flow,contentModelType:w.flow,render:(t,{children:e,attributes:n})=>p("blockquote",I(R({},n),{children:e})),toggle:{prefix:/^>$/,toggle:(t,e,n)=>n?t.runAction("indent-blockquote",e):!1,onTrigger(){return!0}},events:{onStartDelete:(t,e)=>{const n=y.parent(t,T.parent(e));return C(n,"blockquote")?t.runAction("outdent-blockquote",T.parent(e)):!1}}});var Cn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:K});const Mn=t=>{let e=!1,n=!1;const r=()=>{e=!0,t.preventDefault()},s=()=>{n=!0,t.stopPropagation()};return{nativeEvent:t,currentTarget:t.currentTarget,target:t.target,bubbles:t.bubbles,cancelable:t.cancelable,defaultPrevented:t.defaultPrevented,eventPhase:t.eventPhase,isTrusted:t.isTrusted,preventDefault:r,isDefaultPrevented:()=>e,stopPropagation:s,isPropagationStopped:()=>n,persist:()=>{},timeStamp:t.timeStamp,type:t.type}};function Q(t,e,n){let r=t[e];return typeof r=="function"&&(Object.prototype.hasOwnProperty.call(t,e)||(r=r.bind(t))),t[e]=n(r),t}var S;(function(t){t.selection="selection",t.phrasing="phrasing",t.toplevel="toplevel"})(S||(S={}));function Pn({key:t,type:e,tips:n,defaultParams:r={},action:s,computeState:a,hotkeys:l,icon:o}){const i=R({active:!1,disabled:!1},r),u={key:t,type:e,hotkeys:l!=null?l:[],tips:n!=null?n:null,icon:o!=null?o:null,computeState:a!=null?a:()=>i,action:(g,h,v)=>{const E=u.computeState(g,h);return console.log("run action",t,h,E),E.disabled?!1:s(g,h,E,v)}};return u}function ye(t,e,n){let r=n!=null?n:t.selection;if(!!r)switch(G.isRange(r)&&(r=d.unhangRange(t,r)),e){case S.phrasing:{const s=d.path(t,r),a=y.get(t,s);if(t.getContentModelType(a)===w.phrasing||!F.isText(a)&&t.getContentType(a)===w.flow)return s;for(const[o,i]of y.ancestors(t,s))if(t.getContentModelType(o)===w.phrasing)return i;break}case S.selection:return d.range(t,r);case S.toplevel:{const s=d.path(t,r);if(s.length>=1)return[s[0]];break}}}function Nn(t){t.actions=[],t.actionMap=new Map,t.actionTypes={[S.selection]:[],[S.phrasing]:[],[S.toplevel]:[]};const e=new Map;t.defineAction=n=>{const r=Pn(n);t.actionMap.set(r.key,r),t.actionTypes[r.type].push(r),t.actions.push(r);for(const s of r.hotkeys)e.set(s,r.key)},t.actionHotKeysHas=n=>{for(const r of e.keys())if(Ne(r,n))return r},t.onWrapEditor(n=>{n.runAction=(r,s,a)=>{const l=t.actionMap.get(r);if(!l||(s=ye(n,l.type,s),!s))return!1;const o=s;let i;return d.withoutNormalizing(n,()=>{i=l.action(n,o,a!=null?a:Mn(new Event("fake")))}),i},n.getActions=(r,s)=>{let a=t.actions;s&&(a=s.map(o=>t.actionMap.get(o)).filter(o=>!!o));const l={[S.toplevel]:ye(n,S.toplevel,r),[S.selection]:ye(n,S.selection,r),[S.phrasing]:ye(n,S.phrasing,r)};return a.map(o=>{const i=l[o.type];return{state:i?o.computeState(n,i):{active:!1,disabled:!0},action:o}})}}),Q(t,"createDefaultEditableProps",n=>r=>Q(n(r),"onKeyDown",s=>a=>{const l=t.actionHotKeysHas(a);if(l&&r.runAction(l,void 0,a)){a.preventDefault(),a.stopPropagation();return}s==null||s(a)})),t.lineActions||(t.lineActions=[["toggle-heading-1","toggle-heading-2","toggle-heading-3","toggle-heading-4","toggle-heading-5","toggle-heading-6"],["toggle-ordered-list","toggle-unordered-list","indent-list","outdent-list"],["toggle-blockquote","toggle-codeblock","toggle-table","insert-image"]]),t.selectionActions||(t.selectionActions=[M.strong,M.emphasis,M.delete,M.inlineCode,"toggle-link","remove-selection-table","table-insert-row-right","table-insert-row-left","table-insert-row-above","table-insert-row-below","table-delete-row","table-delete-col"])}function Rn(t){t.defineAction({key:"toggle-blockquote",icon:p(L,{icon:he}),type:S.phrasing,computeState:(e,n)=>{const r=[y.get(e,n),n],s=e.nearest(r,K),a=!!s;let l;return s?l=!e.canUnwrap(s,[K]):l=!e.canToggle(r,K,!1),{active:a,disabled:l,blockquoteEntry:s}},action:(e,n,r)=>{if(r.active){if(r.blockquoteEntry)return e.unwrap(r.blockquoteEntry,[K])}else return e.toggle([y.get(e,n),n],K,void 0);return!1}}),t.defineAction({key:"indent-blockquote",icon:p(L,{icon:he}),type:S.phrasing,computeState:(e,n)=>({active:!1,disabled:!e.canToggle([y.get(e,n),n],K,!1)}),action:(e,n)=>e.toggle([y.get(e,n),n],K,void 0)}),t.defineAction({key:"outdent-blockquote",icon:p(L,{icon:he}),type:S.phrasing,computeState:(e,n)=>{const r=[y.get(e,n),n],s=e.nearest(r,K),a=!!s,l=!s||!e.canUnwrap(s,[K]);return{active:a,disabled:l,blockquoteEntry:s}},action:(e,n,r)=>r.blockquoteEntry?e.unwrap(r.blockquoteEntry,[K]):!1})}var On=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Rn});function zn(t){t.defineAction({key:"toggle-codeblock",type:S.phrasing,icon:p(L,{icon:ge}),computeState:(e,n)=>{const r=y.get(e,n),s=C(r,"code");let a;if(s)a=!1;else{const l=y.parent(e,n),o=e.getContentModelType(l);o?a=!V(pt.contentType,o):a=!0}return{active:s,disabled:a}},action:(e,n,r)=>{const s=y.get(e,n);if(r.active)f.unsetNodes(e,Object.keys(y.extractProps(s)),{at:n}),f.setNodes(e,{type:"paragraph"},{at:n});else{const a=y.string(s);f.removeNodes(e,{at:n}),f.insertNodes(e,{type:"code",lang:"markdown",meta:void 0,children:[{text:a}]},{at:n,select:!0})}return!0}})}var An=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:zn});const ve=j({type:"heading",isInline:!1,isLeaf:!1,wrappingParagraph:!1,contentType:w.flow,contentModelType:w.phrasing,render:(t,{element:e,children:n,attributes:r})=>{const s=W.isReadOnly(t);return p(ie,{element:e,children:({active:a})=>{const l=m.exports.createElement(`h${e.depth}`,Object.assign(r,{className:J({active:a}),id:e.id}),n);return s&&e.id?p("a",{className:`heading-href heading-href-${e.depth}`,href:`#${e.id}`,children:l}):l}})},toggle:{prefix:/^#{1,6}$/,estimatePrefixLength:6,toggle:(t,e,n)=>{n?t.runAction(`toggle-heading-${n.depth}`,e):t.runAction("toggle-paragraph",e)},onTrigger:t=>({depth:t.length})},events:{onInsertParagraph:t=>{if(!t.selection)return!1;const e=d.point(t,t.selection),n=T.parent(d.path(t,t.selection));return d.isStart(t,e,n)?t.runAction("toggle-paragraph",n):d.isEnd(t,e,n)?t.runAction("insert-paragraph",T.next(n)):(f.splitNodes(t,{at:t.selection}),t.runAction("toggle-paragraph",T.next(n)))}}});var In=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ve});Z.add(Re);const se=j({type:"paragraph",isLeaf:!1,isInline:!1,wrappingParagraph:!1,contentType:w.flow,contentModelType:w.phrasing,toggle:{},events:{},render(t,{element:e,attributes:n,children:r}){return p(ie,{element:e,children:({active:s})=>p("p",I(R({className:J({active:s})},n),{children:r}))})}});var Dn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:se});function Ln(t){[1,2,3,4,5,6].forEach(e=>{const n=`H${e}`;t.defineAction({key:`toggle-heading-${e}`,type:S.phrasing,defaultParams:{depth:e},icon:p("span",{children:n}),computeState:(r,s)=>{const a=[y.get(r,s),s],l=r.nearest(a,ve),o=!!l&&l[0].depth===e;let i;return l?i=!r.canToggle(l,se,!1):i=!r.canToggle(a,ve,!0),{active:o,disabled:i,depth:e}},action:(r,s,a)=>{const l=[y.get(r,s),s];return a.active?r.toggle(l,se,void 0):r.toggle(l,ve,{depth:e})}})})}var jn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Ln});function mt(t,e){e&&(typeof e=="function"?e(t):e.current=t)}function $n(t,e){return n=>{mt(n,t),mt(n,e)}}const ue=m.exports.forwardRef(function(s,r){var{children:t,attributes:a}=s,l=a,{ref:e}=l,n=Ee(l,["ref"]);return p("span",I(R({className:"void-element",contentEditable:!1,ref:$n(r,e)},n),{children:t}))});ue.displayName="VoidElement";var Fn=j({type:"html",isLeaf:!1,isInline:!1,isEditable:!1,contentType:w.staticPhrasing,contentModelType:w.value,wrappingParagraph:!1,toggle:{},events:{},render(t,e){const{attributes:n,element:r,children:s}=e;return H(ue,{attributes:n,children:[p("span",{dangerouslySetInnerHTML:{__html:r.children[0].text}}),p("span",{hidden:!0,children:s})]})}}),Bn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fn});Z.add(Oe);function bt(t,e){if(t)return e?{width:t.width+e.width,height:t.height+e.height}:t}function yt(t){return!(!t||!t.complete||t.naturalWidth===0)}const Be=j({type:"image",isInline:!0,isLeaf:!1,contentType:w.staticPhrasing,contentModelType:null,render:(t,{element:e,attributes:n,children:r})=>{var X,ee,q,te;const s=Pe(),a=W.isReadOnly(t),{containerWidth:l}=m.exports.useContext(De),[o,i]=m.exports.useState(!1),[u,g]=m.exports.useState(e.size),[h,v]=m.exports.useState(),E=m.exports.useRef(),[c,b]=m.exports.useState(),[x,_]=m.exports.useState(!1),k=m.exports.useRef(null),P=m.exports.useCallback(()=>{_(!0)},[]);m.exports.useEffect(()=>(yt(k.current)&&_(!0),()=>{_(!1),i(!1)}),[e.url]),m.exports.useEffect(()=>{i(!0);const z=k.current;if(!z)return;const ne=z.naturalWidth/z.naturalHeight;E.current=ne;const pe={width:z.width,height:z.height};if(g(pe),v(ne),!e.size){const ae=W.findPath(t,e);d.withoutNormalizing(t,()=>{f.setNodes(t,{size:pe},{at:ae})})}},[x]);const O=m.exports.useCallback(()=>{var ne;const z=k.current;!z||(z.height=z.clientWidth/((ne=E.current)!=null?ne:1))},[]);m.exports.useEffect(()=>{if(!(!a||!x&&!yt(k.current))){if(O(),typeof ResizeObserver=="undefined")return window.addEventListener("resize",O),()=>{window.removeEventListener("resize",O)};k.current&&new ResizeObserver(O).observe(k.current)}},[a,x]);const N=m.exports.useMemo(()=>({bottomRight:!a&&o}),[o,a]),A=m.exports.useCallback((z,ne,pe,ae)=>{b(ae)},[]),B=m.exports.useCallback((z,ne,pe,ae)=>{g(Nt=>{const Rt=W.findPath(t,e),Ke=bt(Nt,ae);return d.withoutNormalizing(t,()=>{f.setNodes(t,{size:Ke},{at:Rt})}),Ke}),b(void 0)},[]);if(a)return H(ue,{attributes:n,children:[p("img",{alt:(X=e.alt)!=null?X:void 0,className:J({selected:s}),height:u==null?void 0:u.height,ref:k,src:e.url,title:(ee=e.title)!=null?ee:void 0,width:u==null?void 0:u.width}),r]});{const z=bt(u,c);return H(ue,{attributes:n,children:[p(Dt,{className:J("resizable",{selected:s}),defaultSize:u,enable:N,handleClasses:{bottomRight:"resize-handle-bottom-right"},lockAspectRatio:h,maxWidth:l||640,onResize:A,onResizeStop:B,size:z,children:p("img",{alt:(q=e.alt)!=null?q:void 0,height:z==null?void 0:z.height,onLoad:P,ref:k,src:e.url,title:(te=e.title)!=null?te:void 0,width:z==null?void 0:z.width})}),r]})}},insert:(t,e,n)=>{f.insertNodes(t,[{text:" "},R({type:"image",children:[]},n),{text:" "}],{at:e})}});var qn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Be});function Hn({schema:t,onSubmit:e,defaultValues:n}){return p("div",{contentEditable:!1,children:p(Lt,{className:"action-form",formData:n,onSubmit:r=>e(r.formData),schema:t})})}function Wn(t,e){return m.exports.useCallback(()=>t.selection?W.toDOMRange(t,t.selection).getBoundingClientRect():e.getBoundingClientRect(),[t,e])}function Un(t,e){return m.exports.useCallback(()=>{t("user canceled"),e.current&&e.current.hide()},[t])}function Vn(){const t=m.exports.useRef(),e=m.exports.useCallback(n=>{t.current=n},[t]);return[t,e]}function Kn(t,e,n,r){const s=m.exports.useCallback(a=>{var l;e(a),(l=r.current)==null||l.hide()},[e,r]);return m.exports.useMemo(()=>p(Hn,{defaultValues:n,onSubmit:s,schema:t}),[t,s])}function Qn({editor:t,el:e,reject:n,resolve:r,schema:s,defaultValues:a}){const[l,o]=Vn(),i=Wn(t,e),u=Un(n,l),g=Kn(s,r,a,l);return p(de,{content:g,getReferenceClientRect:i,interactive:!0,onClickOutside:u,onMount:o,placement:"right-start",visible:!0,children:p("span",{})})}function qe(t,e,n,r){return new Promise((s,a)=>{t.setActionForm(p(Qn,{defaultValues:r,editor:t,el:e,reject:a,resolve:s,schema:n}))}).catch(s=>{if(s==="user canceled")return Promise.resolve(void 0);throw s})}const Zn="\u6DFB\u52A0\u56FE\u7247",Gn="object",Yn={src:{title:"\u94FE\u63A5",type:"string",format:"url"},alt:{title:"\u66FF\u4EE3\u6587\u672C\uFF08alt\uFF09",type:"string"}},Xn=["src","alt"];var Jn={title:Zn,type:Gn,properties:Yn,required:Xn};function er(t){t.defineAction({key:"toggle-image",type:S.selection,icon:p(L,{icon:Oe}),computeState:(e,n)=>{const r=Fe(e,n,"image"),s=!T.equals(T.parent(n.focus.path),T.parent(n.anchor.path))||!be(e,n);return{active:r,disabled:s}},action:(e,n,r,s)=>{if(r.active)return f.unwrapNodes(e,{at:d.unhangRange(e,n),match:a=>!d.isEditor(a)&&D.isElement(a)&&a.type==="image"}),!0;{const a=d.rangeRef(e,n);return qe(e,s.target,Jn,{alt:d.string(e,n),src:""}).then(l=>{if(!!a.current&&l){const{src:o,alt:i}=l;d.withoutNormalizing(e,()=>{Be.insert(e,n,{url:o,title:"",alt:i})})}}).finally(()=>{a.unref()}),!1}}}),t.defineAction({key:"insert-image",type:S.toplevel,icon:p(L,{icon:Oe}),computeState:(e,n)=>{const r=y.get(e,n);if(C(r,"paragraph")){let s=!1,a=!1;for(const l of r.children)"text"in l?l.text&&(a=!0):C(l,"image")?s=!0:a=!0;return{active:s,disabled:s||a}}else return{active:!1,disabled:!0}},action:(e,n,r,s)=>{const a=document.createElement("input");return a.accept=".jpg,.jpeg,.png,.gif,.webp",a.type="file",a.onchange=()=>{if(a.files){const l=a.files.item(0);l&&(async()=>{var i;const o=await((i=e.uploadFile)==null?void 0:i.call(e,l));o&&(f.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:n}),Be.insert(e,n.concat(0),{url:o,title:"",alt:"no-alt"}))})()}},a.click(),!1}})}var tr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:er});Z.add(et);const vt=j({type:"link",isInline:!0,isLeaf:!1,contentType:w.phrasing,contentModelType:w.staticPhrasing,normalize:(t,e,n,r)=>{y.string(e).trim().length===0&&e.children.findIndex(s=>C(s,"image"))===-1&&(f.removeNodes(t,{at:n}),r())},render:(t,{element:e,attributes:n,children:r})=>p("a",I(R({href:e.url,rel:"noreferrer",style:{display:"inline-flex",cursor:"pointer"},target:"_blank"},n),{children:r})),insert:(t,e,s)=>{var a=s,{text:n}=a,r=Ee(a,["text"]);f.insertNodes(t,[R({type:"link",children:[{text:n}]},r),{text:" "}],{at:e,select:!0}),tt.isPoint(e)&&f.move(t,{distance:1})}});var nr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:vt});const rr="\u6DFB\u52A0\u8D85\u94FE\u63A5",sr="object",ar={src:{title:"\u94FE\u63A5",type:"string",format:"url"},text:{title:"\u663E\u793A\u6587\u672C",type:"string"}},or=["src","text"];var lr={title:rr,type:sr,properties:ar,required:or};function ir(t){t.defineAction({key:"toggle-link",type:S.selection,icon:p(L,{icon:et}),computeState:(e,n)=>{const r=Fe(e,n,"link"),s=!T.equals(T.parent(n.focus.path),T.parent(n.anchor.path))||!be(e,n);return{active:r,disabled:s}},action:(e,n,r,s)=>{if(r.active)return f.unwrapNodes(e,{at:d.unhangRange(e,n),match:a=>!d.isEditor(a)&&D.isElement(a)&&a.type==="link"}),!0;{const a=d.rangeRef(e,n);return qe(e,s.target,lr,{text:d.string(e,n),src:""}).then(l=>{if(!!a.current&&l){const{src:o,text:i}=l;d.withoutNormalizing(e,()=>{vt.insert(e,n,{url:o,title:"",text:i})})}}).finally(()=>{a.unref()}),!1}}})}var cr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:ir});Z.add(nt,rt);const U=j({type:"list",isLeaf:!1,isInline:!1,wrappingParagraph:!0,contentType:w.flow,contentModelType:w.list,normalize:(t,e,n,r)=>{if(e.children.length===0){f.removeNodes(t,{at:n}),r();return}if(T.hasPrevious(n)){const s=y.get(t,T.previous(n));if(C(s,"list")&&Boolean(s.ordered)===Boolean(e.ordered)&&s.start===void 0&&e.start===void 0){f.mergeNodes(t,{at:n}),r();return}}},render(t,{element:e,attributes:n,children:r}){var s;return e.ordered?p("ol",I(R({},n),{start:(s=e.start)!=null?s:void 0,children:r})):p("ul",I(R({},n),{children:r}))},toggle:{prefix:/^(?:-|\d+\.)$/,toggle:(t,e,n)=>{if(n===!1)throw new Error("should never reach");{let r;return t.runActionParams=n,t.nearest([y.get(t,e),e],U)?r=t.runAction("indent-list",e):r=t.runAction(`toggle-${n.ordered?"ordered":"unordered"}-list`,e),t.runActionParams=void 0,r}},onTrigger:t=>{if(t==="-")return{ordered:!1,start:void 0,spread:void 0};{const e=parseInt(t);return{ordered:!0,start:e===1?void 0:e,spread:void 0}}}},events:{}});var ur=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:U});Z.add(st,at);const Y=j({type:"listItem",isLeaf:!1,isInline:!1,wrappingParagraph:!0,contentType:w.list,contentModelType:w.flow,normalize:(t,e,n,r)=>{if(e.children.length>0)if(C(e.children[0],"list")){f.moveNodes(t,{at:n.concat(0),to:T.parent(n)}),r();return}else{const l=e.children.length-1;if(e.children.length>1&&C(e.children[l],"paragraph")){const o=T.next(n);f.moveNodes(t,{at:n.concat(l),to:o}),f.wrapNodes(t,{type:"listItem",checked:e.checked,spread:e.spread,children:[]},{at:o}),r();return}if(e.children.length>=1&&!C(e.children[0],"paragraph")){const o=y.parent(t,n);if(t.unwrap([o,T.parent(n)],[U,Y])){r();return}}}else{f.removeNodes(t,{at:n}),r();return}const s=y.parent(t,n);t.getContentModelType(s)!==w.list&&(f.wrapNodes(t,{type:"list",ordered:!1,start:void 0,spread:void 0,children:[]},{at:n}),r())},render(t,{element:e,attributes:n,children:r}){return p("li",I(R({},n),{children:r}))},toggle:{},events:{onStartDelete:(t,e)=>t.runAction("outdent-list",T.parent(e)),onStartEnter:(t,e)=>y.string(y.get(t,e))?!1:t.runAction("outdent-list",T.parent(e)),onTab:(t,e)=>t.runAction("indent-list",T.parent(e))}});var pr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Y});const _t=t=>{let e,n;if(t.runActionParams&&typeof t.runActionParams=="object"){const{ordered:r,start:s}=t.runActionParams;typeof r=="boolean"&&(e=r),typeof s=="number"&&(n=s)}return{ordered:e,start:n}};function fr(t){t.defineAction({key:"indent-list",type:S.phrasing,icon:p(L,{icon:st}),computeState:(e,n)=>{const r=[y.get(e,n),n],s=e.nearest(r,Y),a=e.nearest(s!=null?s:r,U),l=!1,o=!a||!s||!T.hasPrevious(s[1])||a[0].children.length<=1;return R({active:l,disabled:o,listEntry:a,listItemEntry:s},_t(e))},action:(e,n,r)=>{var l;const{listEntry:s,listItemEntry:a}=r;return!a||!s?!1:e.wrap(a,[Y,U],[{spread:void 0,checked:void 0},{ordered:(l=r.ordered)!=null?l:s[0].ordered,spread:void 0,start:r.start}])?(f.mergeNodes(e,{at:a[1]}),!0):!1}}),t.defineAction({key:"outdent-list",type:S.phrasing,icon:p(L,{icon:at}),computeState:(e,n)=>{const r=[y.get(e,n),n],s=e.nearest(r,Y),a=e.nearest(s!=null?s:r,U);return{active:!1,disabled:!a||!s,listEntry:a,listItemEntry:s}},action:(e,n,r)=>{const{listEntry:s,listItemEntry:a}=r;if(!a||!s)return!1;const l=d.pathRef(e,a[1]),o=T.next(a[1]);if(d.hasPath(e,o)&&f.splitNodes(e,{at:o}),f.splitNodes(e,{at:a[1]}),l.current){const i=T.parent(l.current),u=[y.get(e,i),i];e.unwrap(u,[U,Y]),f.splitNodes(e,{at:i})}return l.unref(),!0}}),[!0,!1].forEach(e=>{const n={ordered:e,spread:void 0,start:void 0},r={spread:void 0,checked:void 0};t.defineAction({key:`toggle-${e?"ordered":"unordered"}-list`,type:S.phrasing,icon:p(L,{icon:e?nt:rt}),computeState:(s,a)=>{const l=[y.get(s,a),a],o=s.nearest(l,U),i=o?Boolean(o[0].ordered)===Boolean(e):!1;let u;return o?i?u=!s.canUnwrap(o,[U,Y]):u=!0:u=!s.canWrap(l,[U,Y],[n,r]),{active:i,disabled:u,listEntry:o}},action:(s,a,l)=>{const o=[y.get(s,a),a],{ordered:i,start:u}=_t(s);return l.listEntry?l.active?s.unwrap(l.listEntry,[U,Y]):(f.setNodes(s,{ordered:i,start:u},{at:l.listEntry[1]}),!0):s.wrap(o,[U,Y],[Object.assign({},n,{start:u}),r])}})})}var dr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:fr});function gr(t){t.defineAction({key:"toggle-paragraph",type:S.phrasing,icon:p(L,{icon:Re}),computeState:(e,n)=>{const r=[y.get(e,n),n],s=e.nearest(r,se),a=!!s;let l;return s?l=!0:l=!e.canToggle(r,se,!0),{active:a,disabled:l}},action:(e,n,r)=>{const s=[y.get(e,n),n];return r.active?!1:e.toggle(s,se,void 0)}}),t.defineAction({key:"insert-paragraph",type:S.toplevel,icon:p(L,{icon:Re}),computeState:()=>({active:!1,disabled:!1}),action:(e,n,r)=>(f.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:n,select:!0}),!0)})}var hr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:gr});const _e=m.exports.createContext({isHeader:!1});var mr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",TableContext:_e});const He=j({type:"tableCell",isInline:!1,isLeaf:!1,contentType:w.tableRow,contentModelType:w.phrasing,wrappingParagraph:!1,events:{onStartDelete:(t,e)=>!0,onInsertParagraph:(t,e)=>(t.insertText(`
`),!0)},toggle:{},render:(t,{element:e,attributes:n,children:r})=>p(_e.Consumer,{children:({isHeader:s})=>s?p("th",I(R({},n),{children:r})):p("td",I(R({},n),{children:r}))})});var br=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:He});const xt=j({type:"tableRow",isInline:!1,isLeaf:!1,contentType:w.table,contentModelType:w.tableRow,wrappingParagraph:!1,events:{},toggle:{},normalize:(t,e,n,r)=>{for(const[l,o]of e.children.entries())if(!C(o,"tableCell")){const i=t.getContentType(o);if(i)if(V(i,He.contentModelType))f.unsetNodes(t,Object.keys(y.extractProps(o)),{at:n.concat(l)}),f.setNodes(t,{type:"tableCell"},{at:n.concat(l)});else{const[...u]=d.nodes(t,{at:n.concat(l),mode:"highest",match:h=>{if(F.isText(h))return!0;const v=t.getContentType(h);return!!v&&V(v,w.phrasing)}}),g=u.map(h=>h[0]);g.length===0&&(g[0]={text:""}),f.removeNodes(t,{at:n.concat(l)}),f.insertNodes(t,{type:"tableCell",children:u.map(h=>h[0])},{at:n.concat(l),select:!0})}}const s=e.children.length,a=y.parent(t,n).children[0].children.length;if(s===0)f.removeNodes(t,{at:n}),r();else if(s<a)f.insertNodes(t,Array(a-s).fill({type:"tableCell",children:[{text:""}]}),{at:n.concat(s)});else for(let l=s-1;l>=a;l--)f.removeNodes(t,{at:n.concat(l)})},render:(t,{element:e,attributes:n,children:r})=>p("tr",I(R({},n),{children:r}))});var yr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xt});Z.add(ze);const Tt=j({type:"table",isInline:!1,isLeaf:!1,contentType:w.flow,contentModelType:w.table,wrappingParagraph:!1,events:{},toggle:{},normalize:(t,e,n,r)=>{e.children.length===0&&(f.removeNodes(t,{at:n}),r());for(let s=e.children.length-1;s>=0;--s){const a=e.children[s],l=t.getContentType(a);(!l||!V(l,xt.contentType))&&f.removeNodes(t,{at:n.concat(s)})}},render:(t,{element:e,attributes:n,children:r})=>{var g,h;const s=Pe(),a=J({selected:s}),[l,...o]=r,i={isHeader:!0,align:(g=e.align)!=null?g:void 0},u={isHeader:!1,align:(h=e.align)!=null?h:void 0};return p(ie,{element:e,children:H("table",I(R({className:a},n),{children:[l&&p(_e.Provider,{value:i,children:p("thead",{children:l})}),p(_e.Provider,{value:u,children:p("tbody",{children:o})})]}))})}});var vr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Tt});const _r="\u6DFB\u52A0\u8868\u683C",xr="object",Tr={cols:{title:"\u5217\u6570",type:"number",minimum:2},rows:{title:"\u884C\u6570",type:"number",minimum:2}},wr=["cols","rows"];var Er={title:_r,type:xr,properties:Tr,required:wr};const xe=t=>t.children.length>0?t.children[0].children.length:0;function We(t,e,n){let r;return t.selection&&([r]=d.nodes(t,{at:t.selection,mode:"lowest",match:s=>C(s,"tableRow")})),r?r[1]:e.concat(n)}function Ue(t,e){let n;if(t.selection){const r=t.selection.focus.path,s=t.nearest([y.get(t,r),r],He);s&&(n=s[1][s[1].length-1])}return typeof n!="number"&&(n=e),n}function wt(t,e,n){f.insertNodes(t,{type:"tableRow",children:Array(n).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))},{at:e})}function Et(t,e,n){for(const[r]of Array(e[0].children.length).fill(0).entries()){const s=e[1].concat(r,n);f.insertNodes(t,{type:"tableCell",children:[{text:""}]},{at:s})}}function kr(t){t.defineAction({key:"toggle-table",type:S.phrasing,icon:p(L,{icon:ze}),computeState:(e,n)=>{const r=y.get(e,n),s=C(r,"table");let a,l;if(s)l=!1,a=[r,n];else{const o=y.parent(e,n),i=e.getContentModelType(o);i?l=!V(Tt.contentType,i):l=!0}return{active:s,disabled:l,tableEntry:a}},action:(e,n,r,s)=>{if(r.active){if(!r.tableEntry)return!1;const[a,l]=r.tableEntry,o=[...y.texts(a)].map(([i])=>i.text).join(" ");return f.removeNodes(e,{at:l}),f.insertNodes(e,{type:"paragraph",children:[{text:o}]},{at:l}),!0}else{const a=d.pathRef(e,n);return qe(e,s.target,Er,{cols:2,rows:2}).then(l=>{const o=a.current;!o||l&&d.withoutNormalizing(e,()=>{const{cols:i,rows:u}=l;f.removeNodes(e,{at:o}),f.insertNodes(e,{type:"table",align:void 0,children:Array(u).fill(0).map(()=>({type:"tableRow",children:Array(i).fill(0).map(()=>({type:"tableCell",children:[{text:""}]}))}))},{at:o})})}).finally(()=>a.unref()),!0}}}),t.defineAction({key:"remove-selection-table",type:S.selection,icon:p(L,{icon:ze}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,match:l=>C(l,"table")});return{active:!!r,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[s,a]=r.tableEntry,l=[...y.texts(s)].map(([o])=>o.text).join(" ");return f.removeNodes(e,{at:a}),f.insertNodes(e,{type:"paragraph",children:[{text:l}]},{at:a,select:!0}),!0}}),t.defineAction({key:"table-insert-row-above",type:S.selection,icon:p(jt,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>C(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[s,a]=r.tableEntry,l=We(e,a,0),o=xe(s);return wt(e,l,o),!0}}),t.defineAction({key:"table-insert-row-below",type:S.selection,icon:p($t,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>C(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[s,a]=r.tableEntry,l=We(e,a,s.children.length-1);l[l.length-1]+=1;const o=xe(s);return wt(e,l,o),!0}}),t.defineAction({key:"table-insert-row-left",type:S.selection,icon:p(Ft,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>C(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const s=Ue(e,0);return Et(e,r.tableEntry,s),!0}}),t.defineAction({key:"table-insert-row-right",type:S.selection,icon:p(Bt,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>C(s,"table")});return{active:!1,disabled:!r,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const s=Ue(e,xe(r.tableEntry[0])-1)+1;return Et(e,r.tableEntry,s),!0}}),t.defineAction({key:"table-delete-row",type:S.selection,icon:p(qt,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>C(s,"table")});return{active:!1,disabled:!r||r[0].children.length<=1,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[,s]=r.tableEntry,a=We(e,s,0);return f.removeNodes(e,{at:a}),f.deselect(e),!0}}),t.defineAction({key:"table-delete-col",type:S.selection,icon:p(Ht,{}),computeState:(e,n)=>{const[r]=d.nodes(e,{at:n,mode:"lowest",match:s=>C(s,"table")});return{active:!1,disabled:!r||xe(r[0])<=1,tableEntry:r}},action:(e,n,r)=>{if(!r.tableEntry)return!1;const[,s]=r.tableEntry,a=Ue(e,0);return f.removeNodes(e,{at:s,match:(l,o)=>C(l,"tableCell")&&o[o.length-1]===a}),f.deselect(e),!0}})}var Sr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:kr});function Ve(t,e,n){const r=d.nodes(t,{at:n,mode:"highest",match:(s,a)=>a.length>2&&T.isParent(n,T.parent(T.parent(a)))});for(const[,s]of r){const a=G.intersection(e,d.range(t,s));a&&!G.isCollapsed(a)&&f.delete(t,{at:a})}}function Te(t,e,n){for(const[r,s]of y.ancestors(t,e.path,{reverse:!0}))if(C(r,"table")){const a=n==="start"?d.isStart(t,e,s):d.isEnd(t,e,s);return[s,a]}}function kt(t,e,n){for(const[r,s]of y.ancestors(t,e.path,{reverse:!0}))if(C(r,"tableCell"))return n==="start"?d.isStart(t,e,s):d.isEnd(t,e,s);return!1}function Cr(t){t.onWrapEditor(e=>{Q(e,"deleteFragment",n=>r=>{if(e.selection){const{anchor:s,focus:a}=e.selection,l=tt.isAfter(s,a),o=Te(e,s,l?"start":"end"),i=Te(e,a,l?"end":"start");if(o&&i&&T.equals(o[0],i[0])){Ve(e,e.selection,o[0]);return}const u=R({},e.selection);if(o){const[g,h]=o;h||Ve(e,e.selection,g),u.anchor=d.point(e,T[l?"previous":"next"](g),{edge:l?"end":"start"})}if(i){const[g,h]=i;h||Ve(e,e.selection,g),u.focus=d.point(e,T[l?"next":"previous"](g),{edge:l?"start":"end"})}f.select(e,d.unhangRange(e,u))}n(r)}),Q(e,"deleteForward",n=>r=>{if(e.selection){const s=d.after(e,e.selection,{unit:r});if(s){const l=Te(e,s,"start");if(l){const[o,i]=l;if(i){f.removeNodes(e,{at:o});return}}}if(kt(e,d.point(e,e.selection,{edge:"end"}),"end"))return}n(r)}),Q(e,"deleteBackward",n=>r=>{if(e.selection){const s=d.before(e,e.selection,{unit:r});if(s){const l=Te(e,s,"end");if(l){const[o,i]=l;if(i){f.removeNodes(e,{at:o});return}}}if(kt(e,d.point(e,e.selection,{edge:"start"}),"start"))return}n(r)})}),Q(t,"createDefaultEditableProps",e=>n=>Q(e(n),"onDrag",r=>s=>{const[a]=d.nodes(n,{match:l=>C(l,"table")});a&&(s.preventDefault(),s.stopPropagation()),r==null||r(s)}))}var Mr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Cr});function Pr(t){[{key:M.strong,icon:Se,tips:p(me,{children:"\u52A0\u7C97"}),hotkeys:["meta+b"]},{key:M.emphasis,icon:Ce,tips:p(me,{children:"\u659C\u4F53"}),hotkeys:["meta+i"]},{key:M.inlineCode,icon:ge,tips:p(me,{children:"\u884C\u5185\u4EE3\u7801"})},{key:M.delete,icon:Me,tips:p(me,{children:"\u5220\u9664"})}].forEach(({icon:e,key:n,tips:r,hotkeys:s})=>{t.defineAction({key:n,type:S.selection,icon:p(L,{icon:e}),tips:r,hotkeys:s,computeState:(a,l)=>{const o=je(a,l,n),i=!be(a,l);return{active:o,disabled:i}},action:(a,l,o,i)=>(Le.toggleDecorator(a,l,n),!0)})})}var Nr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",register:Pr}),Rr=j({type:"thematicBreak",isLeaf:!1,isInline:!1,wrappingParagraph:!1,contentType:w.flow,contentModelType:null,render(t,{element:e,children:n,attributes:r}){return p(ie,{element:e,children:H(ue,{attributes:r,children:[p("hr",{}),n]})})},toggle:{prefix:/^---$/,estimatePrefixLength:3,toggle:(t,e,n)=>{n?(f.removeNodes(t,{at:e}),f.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:e}),f.insertNodes(t,{type:"thematicBreak",children:[]},{at:e}),W.deselect(t),f.select(t,d.start(t,T.next(e)))):f.setNodes(t,{type:"thematicBreak",children:[{text:""}]},{at:e})},onTrigger:(t,e,n)=>{if(!(n.length>1))return!0}},events:{}}),Or=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Rr});const zr={"./blockquote/BlockquoteNode.tsx":Cn,"./blockquote/action.tsx":On,"./code/CodeNode.tsx":xn,"./code/LangSelect.tsx":vn,"./code/actions.tsx":An,"./heading/HeadingNode.tsx":In,"./heading/actions.tsx":jn,"./html/HTMLNode.tsx":Bn,"./image/ImageNode.tsx":qn,"./image/action.tsx":tr,"./link/LinkNode.tsx":nr,"./link/action.tsx":cr,"./list/ListItemNode.tsx":pr,"./list/ListNode.tsx":ur,"./list/actions.tsx":dr,"./paragraph/ParagraphNode.tsx":Dn,"./paragraph/actions.tsx":hr,"./table/TableCellNode.tsx":br,"./table/TableNode.tsx":vr,"./table/TableRowNode.tsx":yr,"./table/actions.tsx":Sr,"./table/context.tsx":mr,"./table/rules.tsx":Mr,"./text/TextNode.tsx":Tn,"./text/actions.tsx":Nr,"./thematic-break/ThematicBreakNode.tsx":Or};function Ar(t){for(const[e,{default:n,register:r}]of Object.entries(zr)){const s=r||(n==null?void 0:n.register);typeof s=="function"&&s(t)}}Z.add(Se,Ce,Me,ge);function St(t,e){if(!!e)return typeof e=="function"?e(t):e}function Ir(t,e){var r;if(!e)return[];const n=(r=W.toSlateRange(t,e,{exactMatch:!0,suppressThrow:!0}))!=null?r:t.selection;if(n){if(!dt(t,n))return[];const[s]=d.nodes(t,{at:n,match:a=>{const l=a.type;if(l){const o=t.factory.customElementMap.get(l);if(o&&o.contentModelType!==w.value)return!0}return!1}});if(!s)return[]}return t.getActions(n!=null?n:void 0,t.factory.selectionActions).map(({action:{key:s,icon:a,tips:l},state:o})=>({key:s,disabled:o.disabled,active:o.active,icon:St(o,a),tips:St(o,l),action:i=>{t.runAction(s,n!=null?n:void 0,i)}})).filter(s=>!s.disabled)}function Dr(){const t=ke(),e=m.exports.useRef(null),n=m.exports.useRef(),[r,s]=m.exports.useState(!0),a=Ie(),[l,o]=m.exports.useState([]);t.hideSelectionToolbar=()=>s(!0);const i=m.exports.useMemo(()=>({getBoundingClientRect(){return n.current?n.current.getBoundingClientRect():{width:0,height:0}}}),[t,n]),{styles:u,attributes:g,update:h}=Wt(i,e.current,{placement:"top",modifiers:[{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,8]}}]});return t.updateSelectionToolbar=v=>{if(v){const c=!n.current;n.current=v,c&&setTimeout(()=>{t.updateSelectionToolbar()},0)}const E=Ir(t,n.current);o(E),E.length>0?(s(!1),h&&h()):s(!0),a()},t.toggleSelectionToolbar=v=>{r?t.updateSelectionToolbar(v):t.hideSelectionToolbar()},p("div",I(R({className:"ti-hovering-toolbar",ref:e,style:I(R({},u.popper),{opacity:r?0:1,pointerEvents:r?"none":"initial"})},g.popper),{children:l.map(v=>p(lt,{action:v.action,active:v.active,disabled:v.disabled,icon:v.icon,tips:v.tips},v.key))}))}function Lr(t){const e=t.createDefaultChildren.bind(t);t.createDefaultChildren=n=>{const r=e(n);return r.push(m.exports.createElement(Dr,{key:"selection-toolbar"})),r},t.onWrapEditor(n=>{n.updateSelectionToolbar=n.hideSelectionToolbar=n.toggleSelectionToolbar=()=>{}})}function jr(t){return fetch(t).then(async e=>{var n;if(e.ok){const r=$r(t);return[await e.arrayBuffer(),r,(n=e.headers.get("content-type"))!=null?n:void 0]}else return Promise.reject()}).then(([e,n,r])=>new File([e],n,{type:r}))}function $r(t){try{const{protocol:e,pathname:n}=new URL(t);return/https?/.test(e)&&n.split("/").reverse()[0]||"unnamed"}catch{return"unnamed"}}const Ct=Ut({proto:!1,circles:!1});function Fr(t){const e=[],n=[],r=oe(),s=oe(),a=oe(),l=oe(),o=oe(),i=t;return i.freezeProcessors=()=>{r.use(e).use(Ae).use(le).use(Vt,{emphasis:"*",strong:"*",listItemIndent:"one",fence:"`",bullet:"-",fences:!0}).freeze(),s.use(e).use(Ae).use(le).use(Kt).use(Qt).freeze(),a.use(e).use(Ae).use(le).freeze(),l.use(Zt).use(le).use(ot).use(n).freeze(),o.use(Gt).use(Yt,{removeConditional:!0}).use(Xt).use(le).use(ot).use(n).freeze()},i.configProcessor=(...u)=>{i.configSerializeProcessor(...u),i.configDeserializeProcessor(...u)},i.configSerializeProcessor=(...u)=>{e.push(...u)},i.configDeserializeProcessor=(...u)=>{n.push(...u)},i.generateMarkdown=u=>r.stringify(r.runSync({type:"root",children:Ct(u)})),i.generateHtml=u=>s.stringify(s.runSync({type:"root",children:Ct(u)})),i.parseMarkdown=u=>l.processSync(u).result,i.parseHtml=u=>o.processSync(u).result,i.generateText=u=>{const g=a.runSync({type:"root",children:u});return Jt(g)},i.generateHeadingId=(u,g=3)=>{let h=[],v=new Set;function E(b){if(b.text)return b.text;if(b.children)return b.children.map(E).join(" ")}function c(b){if(b.type==="heading"){if(b.depth>g)return;h[b.depth-1]=E(b);let x=h.slice(0,b.depth).filter(_=>!!_).join("/");if(v.has(x)){let _=0;for(;v.has(`${x}-${_}`);)_++;x=`${x}-${_}`}v.add(x),b.id=x;return}b.children&&b.children.forEach(c)}u.forEach(c)},i}const Mt='data:image/svg+xml;utf8,<svg t="1652176551337" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1695" width="200" height="200"><path d="M512.504177 1023.999994C468.211373 1023.999994 423.585924 1018.165933 379.549 1006.344284 106.96018 933.290582-55.395594 652.104199 17.658108 379.540968 53.046293 247.48137 137.71694 137.120384 256.086965 68.774872 374.508166 0.429361 512.453001-17.712522 644.461423 17.650075 917.024655 90.678189 1079.380429 371.864572 1006.352316 644.478979 993.83979 691.177055 974.444096 736.237499 948.779346 778.4065 941.410006 790.458442 925.698982 794.271052 913.595865 786.952888 901.518335 779.583548 897.705725 763.846936 905.049477 751.769406 928.206605 713.771247 945.657612 673.214288 956.916326 631.224402 988.747781 512.368205 972.397058 388.240883 910.909126 281.692508 849.395607 175.144132 750.063043 98.91752 631.206846 67.086065 512.350649 35.280198 388.248915 51.579745 281.674952 113.118853 175.126576 174.632372 98.899964 273.964936 67.068509 392.795545 1.332972 638.107571 147.440375 891.198345 392.752401 956.933882 515.39562 989.840032 642.951732 971.211978 751.905378 904.683213 763.982908 897.313873 779.71952 901.126483 787.08886 913.178425 794.4582 925.255954 790.64559 940.992566 778.593648 948.361906 696.686504 998.360832 605.286216 1023.999994 512.504177 1023.999994L512.504177 1023.999994Z" p-id="1696"></path><path d="M511.992418 588.748345C497.842261 588.748345 486.404431 577.310515 486.404431 563.160358L486.404431 281.692508C486.404431 267.567939 497.842261 256.104521 511.992418 256.104521 526.142574 256.104521 537.580404 267.567939 537.580404 281.692508L537.580404 563.160358C537.605992 577.310515 526.142574 588.748345 511.992418 588.748345L511.992418 588.748345Z" p-id="1697"></path><path d="M511.992418 665.512304C526.116986 665.512304 537.580404 676.975722 537.580404 691.100291L537.580404 742.276263C537.580404 756.400832 526.116986 767.86425 511.992418 767.86425 497.867849 767.86425 486.404431 756.400832 486.404431 742.276263L486.404431 691.100291C486.404431 676.975722 497.867849 665.512304 511.992418 665.512304L511.992418 665.512304Z" p-id="1698"></path></svg>';function Br(t){Fr(t);let e="";Q(t,"createDefaultEditableProps",n=>r=>Q(n(r),"onPaste",s=>a=>{var o;const l=a.clipboardData;if(l&&l.types.indexOf("application/x-slate-fragment")<0){l.types.indexOf("text/plain")>=0&&(e=l.getData("text/plain"));let i;if(l.types.indexOf("text/html")>=0){const u=l.getData("text/html");i=t.parseHtml(u)}else if(l.types.indexOf("text/plain")>=0){const u=l.getData("text/plain");i=t.parseMarkdown(u)}if(i!==void 0){const u=[];en({type:"Root",children:i},g=>g.type==="image",g=>{var h;C(g,"image")&&(/^data:image\/\w+\/;base64,/.test(g.url)?u.push(g):((h=r.isCdnHost)==null?void 0:h.call(r,g.url))||u.push(g))}),(o=r.setHang)==null||o.call(r,!0),(async()=>{var h;let g=0;try{await Promise.all(u.map(async v=>{var E,c;try{v.url=(c=await((E=r.uploadFile)==null?void 0:E.call(r,await jr(v.url))))!=null?c:Mt}catch{g+=1,v.url=Mt}})),g>0&&r.onAlert(`${g} \u5F20\u56FE\u7247\u4E0A\u4F20\u5931\u8D25`,"\u5982\u679C\u60A8\u5E0C\u671B\u4E0A\u4F20\u5176\u4ED6\u7AD9\u70B9\u7684\u56FE\u7247\uFF0C\u9700\u8981\u4E0B\u8F7D\u5230\u672C\u5730\u540E\u7C98\u8D34\u81F3\u7F16\u8F91\u5668\uFF08\u5426\u5219\u53EF\u80FD\u4F1A\u6709\u56FE\u7247\u8DE8\u57DF\u95EE\u9898\uFF09"),r.insertFragment(i)}finally{(h=r.setHang)==null||h.call(r,!1)}})(),a.preventDefault();return}}s==null||s(a)})),t.onWrapEditor(n=>{Q(n,"insertFragment",r=>s=>{if(n.selection){const a=y.parent(n,n.selection.anchor.path);if(n.getContentModelType(a)===w.value){e?f.insertText(n,e):f.insertText(n,t.generateMarkdown(s));return}}r(s)}),Q(n,"setFragmentData",r=>s=>{r(s);const a=n.getFragment();s.setData("text/plain",t.generateMarkdown(a)),e=a.map(y.string).join(`
`)})})}var re;(function(t){t[t.replace=1]="replace",t[t.wrap=2]="wrap",t[t.unwrap=3]="unwrap",t[t.custom=4]="custom"})(re||(re={}));function qr(t){const e=new kn;return e.use(Br),e.use(Nn),e.use(Lr),e.use(Ar),t&&t(e),e.freezeProcessors(),e}const Pt=m.exports.forwardRef(({factory:t,disabled:e=!1,initialMarkdown:n="",config:r,uploadFile:s,value:a,onChange:l,placeholder:o,isCdnHost:i,setHang:u,onAlert:g,children:h},v)=>{const E=Ie(),c=m.exports.useMemo(()=>{const q=tn(nn(rn()));return q.setHang=u,q.isCdnHost=i,q.onAlert=g!=null?g:(te,z)=>{console.warn(te,z)},t.wrapEditor(q)},[t]);m.exports.useEffect(()=>{v&&(typeof v=="function"?v(c):v.current=c)},[c,v]),m.exports.useEffect(()=>{n&&(c.markdown=n)},[c]);const b=m.exports.useMemo(()=>t.createDefaultEditableProps(c),[t,c]),{observe:x,unobserve:_,width:k}=sn(),P=m.exports.useRef(null);m.exports.useLayoutEffect(()=>(x(P.current),_),[]);const O=m.exports.useMemo(()=>({getEditorDOMRect(){var q,te;return(te=(q=P.current)==null?void 0:q.getBoundingClientRect())!=null?te:new DOMRect},containerWidth:k}),[P,k]),[N,A]=m.exports.useState();c.setActionForm=A,s&&(c.uploadFile=s);const B=m.exports.useMemo(()=>{if(N)return an.exports.createPortal(N,document.body)},[N]),X=m.exports.useCallback(q=>{l(q)},[l]);m.exports.useEffect(()=>{t.triggerEditorMounted(c)},[c]),m.exports.useEffect(()=>{c.children=a,E()},[c,a]);const ee=m.exports.useMemo(()=>t.createDefaultChildren(c),[t,c]);return H(on,{editor:c,onChange:X,value:a,children:[ee,H(De.Provider,{value:O,children:[p("div",{className:"ti-community-editor-container",ref:P,children:p(ln,R({as:"article",className:"ti-community-editor markdown-body",placeholder:o,readOnly:e},b))}),h]}),B]})});Pt.displayName="TiEditor";j({type:"linkBlock",isLeaf:!1,isInline:!1,contentType:w.flow,contentModelType:null,wrappingParagraph:!1,normalize:(t,e,n)=>{const r=T.next(n);d.hasPath(t,r)||f.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:r})},render:(t,{attributes:e,children:n,element:r})=>{const s=t.factory.renderLinkBlock(t,r.link);return H("div",I(R({className:"ti-link-block",contentEditable:!1},e),{children:[s,n]}))},events:{},toggle:{}});const Hr=`### \u5F15\u7528 (blockquote)

\`\`\`markdown
> blockquote
> 
> yeah
\`\`\`

> blockquote
> 
> yeah

- \u6DFB\u52A0\u5F15\u7528
  - \u8F93\u5165 \`>\` \u5E76\u8F93\u5165\u7A7A\u683C
- \u5220\u9664\u5F15\u7528
  - \u5728\u5F15\u7528\u8D77\u59CB\u5904\u70B9\u51FB \`<Backspace>\`
`;var Wr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Hr});const Ur=`### Codes

### Usage

- \u8F93\u5165 \\\`\\\`\\\` \u52A0\u7A7A\u683C

### Examples

\`\`\`javascript
console.log('hello world')
\`\`\`

\`\`\`sql
SELECT * FROM hello_world;
\`\`\`

`;var Vr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Ur});const Kr=`### \u6807\u9898

\`\`\`markdown
# h1
## h2
### h3
#### h4
##### h5
###### h6
\`\`\`

> # h1
> ## h2
> ### h3
> #### h4
> ##### h5
> ###### h6

- \u521B\u5EFA\u6807\u9898
  1. \u8F93\u5165 1-6 \u4E2A \`#\` \u5E76\u8F93\u5165\u7A7A\u683C
  2. \u5728\u6807\u9898\u4E2D\u95F4\u6216\u7ED3\u5C3E\u70B9\u51FB \`<Enter>\`
- \u5220\u9664\u6807\u9898
  - \u5728\u6807\u9898\u8D77\u59CB\u5904\u70B9\u51FB \`<Enter>\` \u4EE5\u5C06\u6807\u9898\u8F6C\u6362\u6210\u6BB5\u843D
`;var Qr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Kr});const Zr=`### Image

> \u7531\u4E8E\u5927\u5C0F\u8C03\u6574\u4E0D\u88AB markdown \u652F\u6301\uFF0C\u8C03\u6574\u8FC7\u5927\u5C0F\u7684\u56FE\u7247\u5728\u5E8F\u5217\u5316\u5230 markdown \u4E4B\u540E\u4E0D\u4F1A\u4FDD\u5B58\u5927\u5C0F\u4FE1\u606F\u3002
> 
> \u670D\u52A1\u5668\u53EF\u4EE5\u4FDD\u5B58\u56FE\u7247\u5927\u5C0F\u4FE1\u606F\u3002

![google logo](https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png "google")
`;var Gr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Zr});const Yr=`### \u94FE\u63A5

\`\`\`
[title](url)
\`\`\`

> [title](#)

- \u521B\u5EFA\u94FE\u63A5
  - \u8F93\u5165\u94FE\u63A5 url \u5E76\u8F93\u5165\u7A7A\u683C\u4F1A\u81EA\u52A8\u8F6C\u6362
`;var Xr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Yr});const Jr=`### \u5217\u8868

\`\`\`markdown
- \u65E0\u5E8F\u5217\u8868
- ...
  - \u7F29\u8FDB\u5217\u8868

1. \u6709\u5E8F\u5217\u8868
\`\`\`

> - \u65E0\u5E8F\u5217\u8868
> - ...
>   - \u7F29\u8FDB\u5217\u8868
> 
> 1. \u6709\u5E8F\u5217\u8868 1
> 2. \u6709\u5E8F\u5217\u8868 2

\u4F7F\u7528\u4EE5\u4E0B\u65B9\u5F0F\u63A7\u5236 Markdown \u5217\u8868\uFF1A
- \u65B0\u5EFA\u5217\u8868\uFF1A
  1. \u8F93\u5165 \`-\` \u52A0\u7A7A\u683C\u63D2\u5165\u65E0\u5E8F\u5217\u8868
  2. \u8F93\u5165 \`number.\` \u52A0\u7A7A\u683C\u63D2\u5165\u6709\u5E8F\u5217\u8868
- \u5217\u8868\u7F29\u8FDB\uFF1A
  1. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`<Tab>\` \u751F\u6210\u4E0B\u7EA7\u5217\u8868 
  2. \u5728\u5217\u8868\u9879\u4E2D\u8F93\u5165 \`-\` \u6216 \`<number>\`\u3002
- \u53D6\u6D88\u5217\u8868
  1. \u5728\u7A7A\u5217\u8868\u9879\u4E2D\u76F4\u63A5\u8F93\u5165 \`<Enter>\`
`;var es=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:Jr});const ts=`### Table

| foo | bar |
| :-- | :-: |
| baz | qux |

`;var ns=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",plainText:ts});const rs=`# tidb-community-editor

## \u6280\u672F\u6808

- core
  - [slate](https://www.slatejs.org/)
  - [remark](https://remark.js.org/)
  - [remark-slate-transformer](https://github.com/inokawa/remark-slate-transformer)
- code highlight
  - [prism](https://prismjs.com/)

## \u6837\u5F0F\u914D\u7F6E

### \u4EE3\u7801\u9AD8\u4EAE

\u5728 \`src/slate-markdown/elements/code/style.less\` \u6DFB\u52A0\u5BF9\u5E94 token \u6837\u5F0F\u3002

abc
deb

## \u7528\u6CD5
`,ss={"../src/slate-markdown/elements/blockquote/instructions.md":Wr,"../src/slate-markdown/elements/code/instructions.md":Vr,"../src/slate-markdown/elements/heading/instructions.md":Qr,"../src/slate-markdown/elements/image/instructions.md":Gr,"../src/slate-markdown/elements/link/instructions.md":Xr,"../src/slate-markdown/elements/list/instructions.md":es,"../src/slate-markdown/elements/table/instructions.md":ns},as=rs+`

`+Object.values(ss).map(t=>t.plainText).join(`

`);function os(t){t.onEditorMounted(e=>{setTimeout(()=>{cn.withoutSaving(e,()=>{f.select(e,[0]);const n=t.parseMarkdown(as);t.generateHeadingId(n),e.insertFragment(n)})},0)})}async function ls(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=function(){setTimeout(()=>{e(r.result)},500)},r.onerror=function(){n(r.error)},r.readAsDataURL(t)})}const is=qr(os);function cs(){const[t,e]=m.exports.useState([{type:"paragraph",children:[{text:"test"}]}]),[n,r]=m.exports.useState(!1),s=m.exports.useCallback(l=>{e(l)},[t]),a=m.exports.useCallback(l=>{r(l.target.checked)},[]);return H("div",{children:[H("label",{children:[p("span",{children:"Disabled"}),p("input",{checked:n,onChange:a,type:"checkbox"})]}),p(Pt,{disabled:n,factory:is,onChange:s,uploadFile:ls,value:t})]})}un.render(p(pn.StrictMode,{children:p(fn,{basename:"/tidb-community-editor",children:p("div",{children:p("main",{children:p(dn,{children:p(gn,{component:cs,path:"/"})})})})})}),document.getElementById("root"));
